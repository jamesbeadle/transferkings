import{c as jr,g as Iu,_ as Ru,a as Ou}from"./B47vXuiC.js";const Ch=!1;function to(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=to(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Mh(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=to(e))&&(n&&(n+=" "),n+=t);return n}var ro={},bn={};bn.byteLength=Pu;bn.toByteArray=Cu;bn.fromByteArray=$u;var kt=[],pt=[],Uu=typeof Uint8Array<"u"?Uint8Array:Array,Li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ar=0,Fu=Li.length;Ar<Fu;++Ar)kt[Ar]=Li[Ar],pt[Li.charCodeAt(Ar)]=Ar;pt[45]=62;pt[95]=63;function no(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function Pu(e){var t=no(e),r=t[0],n=t[1];return(r+n)*3/4-n}function ku(e,t,r){return(t+r)*3/4-r}function Cu(e){var t,r=no(e),n=r[0],i=r[1],c=new Uu(ku(e,n,i)),f=0,o=i>0?n-4:n,w;for(w=0;w<o;w+=4)t=pt[e.charCodeAt(w)]<<18|pt[e.charCodeAt(w+1)]<<12|pt[e.charCodeAt(w+2)]<<6|pt[e.charCodeAt(w+3)],c[f++]=t>>16&255,c[f++]=t>>8&255,c[f++]=t&255;return i===2&&(t=pt[e.charCodeAt(w)]<<2|pt[e.charCodeAt(w+1)]>>4,c[f++]=t&255),i===1&&(t=pt[e.charCodeAt(w)]<<10|pt[e.charCodeAt(w+1)]<<4|pt[e.charCodeAt(w+2)]>>2,c[f++]=t>>8&255,c[f++]=t&255),c}function Mu(e){return kt[e>>18&63]+kt[e>>12&63]+kt[e>>6&63]+kt[e&63]}function Vu(e,t,r){for(var n,i=[],c=t;c<r;c+=3)n=(e[c]<<16&16711680)+(e[c+1]<<8&65280)+(e[c+2]&255),i.push(Mu(n));return i.join("")}function $u(e){for(var t,r=e.length,n=r%3,i=[],c=16383,f=0,o=r-n;f<o;f+=c)i.push(Vu(e,f,f+c>o?o:f+c));return n===1?(t=e[r-1],i.push(kt[t>>2]+kt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(kt[t>>10]+kt[t>>4&63]+kt[t<<2&63]+"=")),i.join("")}var _n={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_n.read=function(e,t,r,n,i){var c,f,o=i*8-n-1,w=(1<<o)-1,_=w>>1,B=-7,I=r?i-1:0,S=r?-1:1,N=e[t+I];for(I+=S,c=N&(1<<-B)-1,N>>=-B,B+=o;B>0;c=c*256+e[t+I],I+=S,B-=8);for(f=c&(1<<-B)-1,c>>=-B,B+=n;B>0;f=f*256+e[t+I],I+=S,B-=8);if(c===0)c=1-_;else{if(c===w)return f?NaN:(N?-1:1)*(1/0);f=f+Math.pow(2,n),c=c-_}return(N?-1:1)*f*Math.pow(2,c-n)};_n.write=function(e,t,r,n,i,c){var f,o,w,_=c*8-i-1,B=(1<<_)-1,I=B>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=n?0:c-1,b=n?1:-1,$=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,f=B):(f=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+I>=1?t+=S/w:t+=S*Math.pow(2,1-I),t*w>=2&&(f++,w/=2),f+I>=B?(o=0,f=B):f+I>=1?(o=(t*w-1)*Math.pow(2,i),f=f+I):(o=t*Math.pow(2,I-1)*Math.pow(2,i),f=0));i>=8;e[r+N]=o&255,N+=b,o/=256,i-=8);for(f=f<<i|o,_+=i;_>0;e[r+N]=f&255,N+=b,f/=256,_-=8);e[r+N-b]|=$*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=bn,r=_n,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=z,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const y=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(y,l),y.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(y){if(y>i)throw new RangeError('The value "'+y+'" is invalid for option "size"');const l=new Uint8Array(y);return Object.setPrototypeOf(l,o.prototype),l}function o(y,l,d){if(typeof y=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(y)}return w(y,l,d)}o.poolSize=8192;function w(y,l,d){if(typeof y=="string")return S(y,l);if(ArrayBuffer.isView(y))return b(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(H(y,ArrayBuffer)||y&&H(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(y,SharedArrayBuffer)||y&&H(y.buffer,SharedArrayBuffer)))return $(y,l,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=y.valueOf&&y.valueOf();if(A!=null&&A!==y)return o.from(A,l,d);const C=M(y);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return o.from(y[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}o.from=function(y,l,d){return w(y,l,d)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function _(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function B(y,l,d){return _(y),y<=0?f(y):l!==void 0?typeof d=="string"?f(y).fill(l,d):f(y).fill(l):f(y)}o.alloc=function(y,l,d){return B(y,l,d)};function I(y){return _(y),f(y<0?0:W(y)|0)}o.allocUnsafe=function(y){return I(y)},o.allocUnsafeSlow=function(y){return I(y)};function S(y,l){if((typeof l!="string"||l==="")&&(l="utf8"),!o.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const d=q(y,l)|0;let A=f(d);const C=A.write(y,l);return C!==d&&(A=A.slice(0,C)),A}function N(y){const l=y.length<0?0:W(y.length)|0,d=f(l);for(let A=0;A<l;A+=1)d[A]=y[A]&255;return d}function b(y){if(H(y,Uint8Array)){const l=new Uint8Array(y);return $(l.buffer,l.byteOffset,l.byteLength)}return N(y)}function $(y,l,d){if(l<0||y.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');let A;return l===void 0&&d===void 0?A=new Uint8Array(y):d===void 0?A=new Uint8Array(y,l):A=new Uint8Array(y,l,d),Object.setPrototypeOf(A,o.prototype),A}function M(y){if(o.isBuffer(y)){const l=W(y.length)|0,d=f(l);return d.length===0||y.copy(d,0,0,l),d}if(y.length!==void 0)return typeof y.length!="number"||Y(y.length)?f(0):N(y);if(y.type==="Buffer"&&Array.isArray(y.data))return N(y.data)}function W(y){if(y>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return y|0}function z(y){return+y!=y&&(y=0),o.alloc(+y)}o.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==o.prototype},o.compare=function(l,d){if(H(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),H(d,Uint8Array)&&(d=o.from(d,d.offset,d.byteLength)),!o.isBuffer(l)||!o.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===d)return 0;let A=l.length,C=d.length;for(let K=0,L=Math.min(A,C);K<L;++K)if(l[K]!==d[K]){A=l[K],C=d[K];break}return A<C?-1:C<A?1:0},o.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(l,d){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return o.alloc(0);let A;if(d===void 0)for(d=0,A=0;A<l.length;++A)d+=l[A].length;const C=o.allocUnsafe(d);let K=0;for(A=0;A<l.length;++A){let L=l[A];if(H(L,Uint8Array))K+L.length>C.length?(o.isBuffer(L)||(L=o.from(L)),L.copy(C,K)):Uint8Array.prototype.set.call(C,L,K);else if(o.isBuffer(L))L.copy(C,K);else throw new TypeError('"list" argument must be an Array of Buffers');K+=L.length}return C};function q(y,l){if(o.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||H(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const d=y.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&d===0)return 0;let C=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return a(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return v(y).length;default:if(C)return A?-1:a(y).length;l=(""+l).toLowerCase(),C=!0}}o.byteLength=q;function ie(y,l,d){let A=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(y||(y="utf8");;)switch(y){case"hex":return ee(this,l,d);case"utf8":case"utf-8":return P(this,l,d);case"ascii":return j(this,l,d);case"latin1":case"binary":return J(this,l,d);case"base64":return O(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,l,d);default:if(A)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),A=!0}}o.prototype._isBuffer=!0;function k(y,l,d){const A=y[l];y[l]=y[d],y[d]=A}o.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<l;d+=2)k(this,d,d+1);return this},o.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<l;d+=4)k(this,d,d+3),k(this,d+1,d+2);return this},o.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<l;d+=8)k(this,d,d+7),k(this,d+1,d+6),k(this,d+2,d+5),k(this,d+3,d+4);return this},o.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?P(this,0,l):ie.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(l){if(!o.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:o.compare(this,l)===0},o.prototype.inspect=function(){let l="";const d=e.INSPECT_MAX_BYTES;return l=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(l+=" ... "),"<Buffer "+l+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(l,d,A,C,K){if(H(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(d===void 0&&(d=0),A===void 0&&(A=l?l.length:0),C===void 0&&(C=0),K===void 0&&(K=this.length),d<0||A>l.length||C<0||K>this.length)throw new RangeError("out of range index");if(C>=K&&d>=A)return 0;if(C>=K)return-1;if(d>=A)return 1;if(d>>>=0,A>>>=0,C>>>=0,K>>>=0,this===l)return 0;let L=K-C,_e=A-d;const ve=Math.min(L,_e),xe=this.slice(C,K),Ee=l.slice(d,A);for(let Re=0;Re<ve;++Re)if(xe[Re]!==Ee[Re]){L=xe[Re],_e=Ee[Re];break}return L<_e?-1:_e<L?1:0};function Z(y,l,d,A,C){if(y.length===0)return-1;if(typeof d=="string"?(A=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Y(d)&&(d=C?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(C)return-1;d=y.length-1}else if(d<0)if(C)d=0;else return-1;if(typeof l=="string"&&(l=o.from(l,A)),o.isBuffer(l))return l.length===0?-1:G(y,l,d,A,C);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(y,l,d):Uint8Array.prototype.lastIndexOf.call(y,l,d):G(y,[l],d,A,C);throw new TypeError("val must be string, number or Buffer")}function G(y,l,d,A,C){let K=1,L=y.length,_e=l.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(y.length<2||l.length<2)return-1;K=2,L/=2,_e/=2,d/=2}function ve(Ee,Re){return K===1?Ee[Re]:Ee.readUInt16BE(Re*K)}let xe;if(C){let Ee=-1;for(xe=d;xe<L;xe++)if(ve(y,xe)===ve(l,Ee===-1?0:xe-Ee)){if(Ee===-1&&(Ee=xe),xe-Ee+1===_e)return Ee*K}else Ee!==-1&&(xe-=xe-Ee),Ee=-1}else for(d+_e>L&&(d=L-_e),xe=d;xe>=0;xe--){let Ee=!0;for(let Re=0;Re<_e;Re++)if(ve(y,xe+Re)!==ve(l,Re)){Ee=!1;break}if(Ee)return xe}return-1}o.prototype.includes=function(l,d,A){return this.indexOf(l,d,A)!==-1},o.prototype.indexOf=function(l,d,A){return Z(this,l,d,A,!0)},o.prototype.lastIndexOf=function(l,d,A){return Z(this,l,d,A,!1)};function Q(y,l,d,A){d=Number(d)||0;const C=y.length-d;A?(A=Number(A),A>C&&(A=C)):A=C;const K=l.length;A>K/2&&(A=K/2);let L;for(L=0;L<A;++L){const _e=parseInt(l.substr(L*2,2),16);if(Y(_e))return L;y[d+L]=_e}return L}function te(y,l,d,A){return R(a(l,y.length-d),y,d,A)}function X(y,l,d,A){return R(u(l),y,d,A)}function he(y,l,d,A){return R(v(l),y,d,A)}function le(y,l,d,A){return R(g(l,y.length-d),y,d,A)}o.prototype.write=function(l,d,A,C){if(d===void 0)C="utf8",A=this.length,d=0;else if(A===void 0&&typeof d=="string")C=d,A=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(A)?(A=A>>>0,C===void 0&&(C="utf8")):(C=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const K=this.length-d;if((A===void 0||A>K)&&(A=K),l.length>0&&(A<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let L=!1;for(;;)switch(C){case"hex":return Q(this,l,d,A);case"utf8":case"utf-8":return te(this,l,d,A);case"ascii":case"latin1":case"binary":return X(this,l,d,A);case"base64":return he(this,l,d,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,l,d,A);default:if(L)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),L=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(y,l,d){return l===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(l,d))}function P(y,l,d){d=Math.min(y.length,d);const A=[];let C=l;for(;C<d;){const K=y[C];let L=null,_e=K>239?4:K>223?3:K>191?2:1;if(C+_e<=d){let ve,xe,Ee,Re;switch(_e){case 1:K<128&&(L=K);break;case 2:ve=y[C+1],(ve&192)===128&&(Re=(K&31)<<6|ve&63,Re>127&&(L=Re));break;case 3:ve=y[C+1],xe=y[C+2],(ve&192)===128&&(xe&192)===128&&(Re=(K&15)<<12|(ve&63)<<6|xe&63,Re>2047&&(Re<55296||Re>57343)&&(L=Re));break;case 4:ve=y[C+1],xe=y[C+2],Ee=y[C+3],(ve&192)===128&&(xe&192)===128&&(Ee&192)===128&&(Re=(K&15)<<18|(ve&63)<<12|(xe&63)<<6|Ee&63,Re>65535&&Re<1114112&&(L=Re))}}L===null?(L=65533,_e=1):L>65535&&(L-=65536,A.push(L>>>10&1023|55296),L=56320|L&1023),A.push(L),C+=_e}return V(A)}const D=4096;function V(y){const l=y.length;if(l<=D)return String.fromCharCode.apply(String,y);let d="",A=0;for(;A<l;)d+=String.fromCharCode.apply(String,y.slice(A,A+=D));return d}function j(y,l,d){let A="";d=Math.min(y.length,d);for(let C=l;C<d;++C)A+=String.fromCharCode(y[C]&127);return A}function J(y,l,d){let A="";d=Math.min(y.length,d);for(let C=l;C<d;++C)A+=String.fromCharCode(y[C]);return A}function ee(y,l,d){const A=y.length;(!l||l<0)&&(l=0),(!d||d<0||d>A)&&(d=A);let C="";for(let K=l;K<d;++K)C+=oe[y[K]];return C}function ge(y,l,d){const A=y.slice(l,d);let C="";for(let K=0;K<A.length-1;K+=2)C+=String.fromCharCode(A[K]+A[K+1]*256);return C}o.prototype.slice=function(l,d){const A=this.length;l=~~l,d=d===void 0?A:~~d,l<0?(l+=A,l<0&&(l=0)):l>A&&(l=A),d<0?(d+=A,d<0&&(d=0)):d>A&&(d=A),d<l&&(d=l);const C=this.subarray(l,d);return Object.setPrototypeOf(C,o.prototype),C};function ae(y,l,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+l>d)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(l,d,A){l=l>>>0,d=d>>>0,A||ae(l,d,this.length);let C=this[l],K=1,L=0;for(;++L<d&&(K*=256);)C+=this[l+L]*K;return C},o.prototype.readUintBE=o.prototype.readUIntBE=function(l,d,A){l=l>>>0,d=d>>>0,A||ae(l,d,this.length);let C=this[l+--d],K=1;for(;d>0&&(K*=256);)C+=this[l+--d]*K;return C},o.prototype.readUint8=o.prototype.readUInt8=function(l,d){return l=l>>>0,d||ae(l,1,this.length),this[l]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(l,d){return l=l>>>0,d||ae(l,2,this.length),this[l]|this[l+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(l,d){return l=l>>>0,d||ae(l,2,this.length),this[l]<<8|this[l+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},o.prototype.readBigUInt64LE=ye(function(l){l=l>>>0,x(l,"offset");const d=this[l],A=this[l+7];(d===void 0||A===void 0)&&T(l,this.length-8);const C=d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,K=this[++l]+this[++l]*2**8+this[++l]*2**16+A*2**24;return BigInt(C)+(BigInt(K)<<BigInt(32))}),o.prototype.readBigUInt64BE=ye(function(l){l=l>>>0,x(l,"offset");const d=this[l],A=this[l+7];(d===void 0||A===void 0)&&T(l,this.length-8);const C=d*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],K=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+A;return(BigInt(C)<<BigInt(32))+BigInt(K)}),o.prototype.readIntLE=function(l,d,A){l=l>>>0,d=d>>>0,A||ae(l,d,this.length);let C=this[l],K=1,L=0;for(;++L<d&&(K*=256);)C+=this[l+L]*K;return K*=128,C>=K&&(C-=Math.pow(2,8*d)),C},o.prototype.readIntBE=function(l,d,A){l=l>>>0,d=d>>>0,A||ae(l,d,this.length);let C=d,K=1,L=this[l+--C];for(;C>0&&(K*=256);)L+=this[l+--C]*K;return K*=128,L>=K&&(L-=Math.pow(2,8*d)),L},o.prototype.readInt8=function(l,d){return l=l>>>0,d||ae(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},o.prototype.readInt16LE=function(l,d){l=l>>>0,d||ae(l,2,this.length);const A=this[l]|this[l+1]<<8;return A&32768?A|4294901760:A},o.prototype.readInt16BE=function(l,d){l=l>>>0,d||ae(l,2,this.length);const A=this[l+1]|this[l]<<8;return A&32768?A|4294901760:A},o.prototype.readInt32LE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},o.prototype.readInt32BE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},o.prototype.readBigInt64LE=ye(function(l){l=l>>>0,x(l,"offset");const d=this[l],A=this[l+7];(d===void 0||A===void 0)&&T(l,this.length-8);const C=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(A<<24);return(BigInt(C)<<BigInt(32))+BigInt(d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),o.prototype.readBigInt64BE=ye(function(l){l=l>>>0,x(l,"offset");const d=this[l],A=this[l+7];(d===void 0||A===void 0)&&T(l,this.length-8);const C=(d<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(C)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+A)}),o.prototype.readFloatLE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),r.read(this,l,!0,23,4)},o.prototype.readFloatBE=function(l,d){return l=l>>>0,d||ae(l,4,this.length),r.read(this,l,!1,23,4)},o.prototype.readDoubleLE=function(l,d){return l=l>>>0,d||ae(l,8,this.length),r.read(this,l,!0,52,8)},o.prototype.readDoubleBE=function(l,d){return l=l>>>0,d||ae(l,8,this.length),r.read(this,l,!1,52,8)};function fe(y,l,d,A,C,K){if(!o.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>C||l<K)throw new RangeError('"value" argument is out of bounds');if(d+A>y.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(l,d,A,C){if(l=+l,d=d>>>0,A=A>>>0,!C){const _e=Math.pow(2,8*A)-1;fe(this,l,d,A,_e,0)}let K=1,L=0;for(this[d]=l&255;++L<A&&(K*=256);)this[d+L]=l/K&255;return d+A},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(l,d,A,C){if(l=+l,d=d>>>0,A=A>>>0,!C){const _e=Math.pow(2,8*A)-1;fe(this,l,d,A,_e,0)}let K=A-1,L=1;for(this[d+K]=l&255;--K>=0&&(L*=256);)this[d+K]=l/L&255;return d+A},o.prototype.writeUint8=o.prototype.writeUInt8=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,1,255,0),this[d]=l&255,d+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,2,65535,0),this[d]=l&255,this[d+1]=l>>>8,d+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,2,65535,0),this[d]=l>>>8,this[d+1]=l&255,d+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,4,4294967295,0),this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255,d+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,4,4294967295,0),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4};function re(y,l,d,A,C){h(l,A,C,y,d,7);let K=Number(l&BigInt(4294967295));y[d++]=K,K=K>>8,y[d++]=K,K=K>>8,y[d++]=K,K=K>>8,y[d++]=K;let L=Number(l>>BigInt(32)&BigInt(4294967295));return y[d++]=L,L=L>>8,y[d++]=L,L=L>>8,y[d++]=L,L=L>>8,y[d++]=L,d}function E(y,l,d,A,C){h(l,A,C,y,d,7);let K=Number(l&BigInt(4294967295));y[d+7]=K,K=K>>8,y[d+6]=K,K=K>>8,y[d+5]=K,K=K>>8,y[d+4]=K;let L=Number(l>>BigInt(32)&BigInt(4294967295));return y[d+3]=L,L=L>>8,y[d+2]=L,L=L>>8,y[d+1]=L,L=L>>8,y[d]=L,d+8}o.prototype.writeBigUInt64LE=ye(function(l,d=0){return re(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ye(function(l,d=0){return E(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(l,d,A,C){if(l=+l,d=d>>>0,!C){const ve=Math.pow(2,8*A-1);fe(this,l,d,A,ve-1,-ve)}let K=0,L=1,_e=0;for(this[d]=l&255;++K<A&&(L*=256);)l<0&&_e===0&&this[d+K-1]!==0&&(_e=1),this[d+K]=(l/L>>0)-_e&255;return d+A},o.prototype.writeIntBE=function(l,d,A,C){if(l=+l,d=d>>>0,!C){const ve=Math.pow(2,8*A-1);fe(this,l,d,A,ve-1,-ve)}let K=A-1,L=1,_e=0;for(this[d+K]=l&255;--K>=0&&(L*=256);)l<0&&_e===0&&this[d+K+1]!==0&&(_e=1),this[d+K]=(l/L>>0)-_e&255;return d+A},o.prototype.writeInt8=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,1,127,-128),l<0&&(l=255+l+1),this[d]=l&255,d+1},o.prototype.writeInt16LE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,2,32767,-32768),this[d]=l&255,this[d+1]=l>>>8,d+2},o.prototype.writeInt16BE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,2,32767,-32768),this[d]=l>>>8,this[d+1]=l&255,d+2},o.prototype.writeInt32LE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,4,2147483647,-2147483648),this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24,d+4},o.prototype.writeInt32BE=function(l,d,A){return l=+l,d=d>>>0,A||fe(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4},o.prototype.writeBigInt64LE=ye(function(l,d=0){return re(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ye(function(l,d=0){return E(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(y,l,d,A,C,K){if(d+A>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function ue(y,l,d,A,C){return l=+l,d=d>>>0,C||se(y,l,d,4),r.write(y,l,d,A,23,4),d+4}o.prototype.writeFloatLE=function(l,d,A){return ue(this,l,d,!0,A)},o.prototype.writeFloatBE=function(l,d,A){return ue(this,l,d,!1,A)};function pe(y,l,d,A,C){return l=+l,d=d>>>0,C||se(y,l,d,8),r.write(y,l,d,A,52,8),d+8}o.prototype.writeDoubleLE=function(l,d,A){return pe(this,l,d,!0,A)},o.prototype.writeDoubleBE=function(l,d,A){return pe(this,l,d,!1,A)},o.prototype.copy=function(l,d,A,C){if(!o.isBuffer(l))throw new TypeError("argument should be a Buffer");if(A||(A=0),!C&&C!==0&&(C=this.length),d>=l.length&&(d=l.length),d||(d=0),C>0&&C<A&&(C=A),C===A||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),l.length-d<C-A&&(C=l.length-d+A);const K=C-A;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,A,C):Uint8Array.prototype.set.call(l,this.subarray(A,C),d),K},o.prototype.fill=function(l,d,A,C){if(typeof l=="string"){if(typeof d=="string"?(C=d,d=0,A=this.length):typeof A=="string"&&(C=A,A=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!o.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(l.length===1){const L=l.charCodeAt(0);(C==="utf8"&&L<128||C==="latin1")&&(l=L)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(d<0||this.length<d||this.length<A)throw new RangeError("Out of range index");if(A<=d)return this;d=d>>>0,A=A===void 0?this.length:A>>>0,l||(l=0);let K;if(typeof l=="number")for(K=d;K<A;++K)this[K]=l;else{const L=o.isBuffer(l)?l:o.from(l,C),_e=L.length;if(_e===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(K=0;K<A-d;++K)this[K+d]=L[K%_e]}return this};const ne={};function ce(y,l,d){ne[y]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(y,l){return`The "${y}" argument must be of type number. Received type ${typeof l}`},TypeError),ce("ERR_OUT_OF_RANGE",function(y,l,d){let A=`The value of "${y}" is out of range.`,C=d;return Number.isInteger(d)&&Math.abs(d)>2**32?C=m(String(d)):typeof d=="bigint"&&(C=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(C=m(C)),C+="n"),A+=` It must be ${l}. Received ${C}`,A},RangeError);function m(y){let l="",d=y.length;const A=y[0]==="-"?1:0;for(;d>=A+4;d-=3)l=`_${y.slice(d-3,d)}${l}`;return`${y.slice(0,d)}${l}`}function s(y,l,d){x(l,"offset"),(y[l]===void 0||y[l+d]===void 0)&&T(l,y.length-(d+1))}function h(y,l,d,A,C,K){if(y>d||y<l){const L=typeof l=="bigint"?"n":"";let _e;throw l===0||l===BigInt(0)?_e=`>= 0${L} and < 2${L} ** ${(K+1)*8}${L}`:_e=`>= -(2${L} ** ${(K+1)*8-1}${L}) and < 2 ** ${(K+1)*8-1}${L}`,new ne.ERR_OUT_OF_RANGE("value",_e,y)}s(A,C,K)}function x(y,l){if(typeof y!="number")throw new ne.ERR_INVALID_ARG_TYPE(l,"number",y)}function T(y,l,d){throw Math.floor(y)!==y?(x(y,d),new ne.ERR_OUT_OF_RANGE("offset","an integer",y)):l<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,y)}const U=/[^+/0-9A-Za-z-_]/g;function p(y){if(y=y.split("=")[0],y=y.trim().replace(U,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function a(y,l){l=l||1/0;let d;const A=y.length;let C=null;const K=[];for(let L=0;L<A;++L){if(d=y.charCodeAt(L),d>55295&&d<57344){if(!C){if(d>56319){(l-=3)>-1&&K.push(239,191,189);continue}else if(L+1===A){(l-=3)>-1&&K.push(239,191,189);continue}C=d;continue}if(d<56320){(l-=3)>-1&&K.push(239,191,189),C=d;continue}d=(C-55296<<10|d-56320)+65536}else C&&(l-=3)>-1&&K.push(239,191,189);if(C=null,d<128){if((l-=1)<0)break;K.push(d)}else if(d<2048){if((l-=2)<0)break;K.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;K.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;K.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return K}function u(y){const l=[];for(let d=0;d<y.length;++d)l.push(y.charCodeAt(d)&255);return l}function g(y,l){let d,A,C;const K=[];for(let L=0;L<y.length&&!((l-=2)<0);++L)d=y.charCodeAt(L),A=d>>8,C=d%256,K.push(C),K.push(A);return K}function v(y){return t.toByteArray(p(y))}function R(y,l,d,A){let C;for(C=0;C<A&&!(C+d>=l.length||C>=y.length);++C)l[C+d]=y[C];return C}function H(y,l){return y instanceof l||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===l.name}function Y(y){return y!==y}const oe=function(){const y="0123456789abcdef",l=new Array(256);for(let d=0;d<16;++d){const A=d*16;for(let C=0;C<16;++C)l[A+C]=y[d]+y[C]}return l}();function ye(y){return typeof BigInt>"u"?me:y}function me(){throw new Error("BigInt not supported")}})(ro);function sa(e){const t=Gu(e),r=new ArrayBuffer(t.length),n=new DataView(r);for(let i=0;i<r.byteLength;i++)n.setUint8(i,t.charCodeAt(i));return r}const qu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Gu(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,n=0;for(let i=0;i<e.length;i++)r<<=6,r|=qu.indexOf(e[i]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}const ju=-1,Hu=-2,Lu=-3,Ku=-4,zu=-5,Du=-6;function $h(e,t){if(typeof e=="number")return i(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,n=Array(r.length);function i(c,f=!1){if(c===ju)return;if(c===Lu)return NaN;if(c===Ku)return 1/0;if(c===zu)return-1/0;if(c===Du)return-0;if(f)throw new Error("Invalid input");if(c in n)return n[c];const o=r[c];if(!o||typeof o!="object")n[c]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const w=o[0],_=t?.[w];if(_)return n[c]=_(i(o[1]));switch(w){case"Date":n[c]=new Date(o[1]);break;case"Set":const B=new Set;n[c]=B;for(let N=1;N<o.length;N+=1)B.add(i(o[N]));break;case"Map":const I=new Map;n[c]=I;for(let N=1;N<o.length;N+=2)I.set(i(o[N]),i(o[N+1]));break;case"RegExp":n[c]=new RegExp(o[1],o[2]);break;case"Object":n[c]=Object(o[1]);break;case"BigInt":n[c]=BigInt(o[1]);break;case"null":const S=Object.create(null);n[c]=S;for(let N=1;N<o.length;N+=2)S[o[N]]=i(o[N+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const N=globalThis[w],b=o[1],$=sa(b),M=new N($);n[c]=M;break}case"ArrayBuffer":{const N=o[1],b=sa(N);n[c]=b;break}default:throw new Error(`Unknown type ${w}`)}}else{const w=new Array(o.length);n[c]=w;for(let _=0;_<o.length;_+=1){const B=o[_];B!==Hu&&(w[_]=i(B))}}else{const w={};n[c]=w;for(const _ in o){const B=o[_];w[_]=i(B)}}return n[c]}return i(0)}var ys;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(ys||(ys={}));const fi="abcdefghijklmnopqrstuvwxyz234567",Hr=Object.create(null);for(let e=0;e<fi.length;e++)Hr[fi[e]]=e;Hr[0]=Hr.o;Hr[1]=Hr.i;function Wu(e){let t=0,r=0,n="";function i(c){return t<0?r|=c>>-t:r=c<<t&248,t>3?(t-=8,1):(t<4&&(n+=fi[r>>3],t+=5),0)}for(let c=0;c<e.length;)c+=i(e[c]);return n+(t<0?fi[r>>3]:"")}function Yu(e){let t=0,r=0;const n=new Uint8Array(e.length*4/3|0);let i=0;function c(f){let o=Hr[f.toLowerCase()];if(o===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);o<<=3,r|=o>>>t,t+=5,t>=8&&(n[i++]=r,t-=8,t>0?r=o<<5-t&255:r=0)}for(const f of e)c(f);return n.slice(0,i)}const Zu=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Xu(e){const t=new Uint8Array(e);let r=-1;for(let n=0;n<t.length;n++){const c=(t[n]^r)&255;r=Zu[c]^r>>>8}return(r^-1)>>>0}function Ju(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function io(e,...t){if(!Ju(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function aa(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qu(e,t){io(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Nr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ki(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function St(e,t){return e<<32-t|e>>>t}function el(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function so(e){return typeof e=="string"&&(e=el(e)),io(e),e}class tl{clone(){return this._cloneInto()}}function Ms(e){const t=n=>e().update(so(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ao(e=32){if(Nr&&typeof Nr.getRandomValues=="function")return Nr.getRandomValues(new Uint8Array(e));if(Nr&&typeof Nr.randomBytes=="function")return Nr.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function rl(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),c=BigInt(4294967295),f=Number(r>>i&c),o=Number(r&c),w=n?4:0,_=n?0:4;e.setUint32(t+w,f,n),e.setUint32(t+_,o,n)}function nl(e,t,r){return e&t^~e&r}function il(e,t,r){return e&t^e&r^t&r}class oo extends tl{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ki(this.buffer)}update(t){aa(this);const{view:r,buffer:n,blockLen:i}=this;t=so(t);const c=t.length;for(let f=0;f<c;){const o=Math.min(i-this.pos,c-f);if(o===i){const w=Ki(t);for(;i<=c-f;f+=i)this.process(w,f);continue}n.set(t.subarray(f,f+o),this.pos),this.pos+=o,f+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){aa(this),Qu(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:c}=this;let{pos:f}=this;r[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>i-f&&(this.process(n,0),f=0);for(let I=f;I<i;I++)r[I]=0;rl(n,i-8,BigInt(this.length*8),c),this.process(n,0);const o=Ki(t),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=w/4,B=this.get();if(_>B.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<_;I++)o.setUint32(4*I,B[I],c)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:c,destroyed:f,pos:o}=this;return t.length=i,t.pos=o,t.finished=c,t.destroyed=f,i%r&&t.buffer.set(n),t}}const sl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wt=new Uint32Array(64);class co extends oo{constructor(){super(64,32,8,!1),this.A=Dt[0]|0,this.B=Dt[1]|0,this.C=Dt[2]|0,this.D=Dt[3]|0,this.E=Dt[4]|0,this.F=Dt[5]|0,this.G=Dt[6]|0,this.H=Dt[7]|0}get(){const{A:t,B:r,C:n,D:i,E:c,F:f,G:o,H:w}=this;return[t,r,n,i,c,f,o,w]}set(t,r,n,i,c,f,o,w){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=f|0,this.G=o|0,this.H=w|0}process(t,r){for(let I=0;I<16;I++,r+=4)Wt[I]=t.getUint32(r,!1);for(let I=16;I<64;I++){const S=Wt[I-15],N=Wt[I-2],b=St(S,7)^St(S,18)^S>>>3,$=St(N,17)^St(N,19)^N>>>10;Wt[I]=$+Wt[I-7]+b+Wt[I-16]|0}let{A:n,B:i,C:c,D:f,E:o,F:w,G:_,H:B}=this;for(let I=0;I<64;I++){const S=St(o,6)^St(o,11)^St(o,25),N=B+S+nl(o,w,_)+sl[I]+Wt[I]|0,$=(St(n,2)^St(n,13)^St(n,22))+il(n,i,c)|0;B=_,_=w,w=o,o=f+N|0,f=c,c=i,i=n,n=N+$|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,f=f+this.D|0,o=o+this.E|0,w=w+this.F|0,_=_+this.G|0,B=B+this.H|0,this.set(n,i,c,f,o,w,_,B)}roundClean(){Wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class al extends co{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Vs=Ms(()=>new co),ol=Ms(()=>new al);function cl(e){return ol.create().update(new Uint8Array(e)).digest()}const Jr="__principal__",ul=2,oa=4,ll="aaaaa-aa",fl=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},dl=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");let Te=class qn{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([oa]))}static managementCanister(){return this.fromHex(ll)}static selfAuthenticating(t){const r=cl(t);return new this(new Uint8Array([...r,ul]))}static from(t){if(typeof t=="string")return qn.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new qn(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new qn(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(fl(t))}static fromText(t){let r=t;if(t.includes(Jr)){const f=JSON.parse(t);Jr in f&&(r=f[Jr])}const n=r.toLowerCase().replace(/-/g,"");let i=Yu(n);i=i.slice(4,i.length);const c=new this(i);if(c.toText()!==r)throw new Error(`Principal "${c.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return c}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===oa}toUint8Array(){return this._arr}toHex(){return dl(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,Xu(this._arr));const n=new Uint8Array(t),i=Uint8Array.from(this._arr),c=new Uint8Array([...n,...i]),o=Wu(c).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[Jr]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}};const hl=Object.freeze(Object.defineProperty({__proto__:null,JSON_KEY_PRINCIPAL:Jr,Principal:Te},Symbol.toStringTag,{value:"Module"}));function At(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function Ce(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const pl=new RegExp(/^[0-9a-fA-F]+$/);function Lt(e){if(!pl.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function uo(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function En(e,t){return uo(e,t)===0}function an(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function $s(e){return e instanceof Uint8Array?an(e):e instanceof ArrayBuffer?e:Array.isArray(e)?an(new Uint8Array(e)):"buffer"in e?$s(e.buffer):an(new Uint8Array(e))}class qe extends Error{constructor(t){super(t),this.message=t,this.name="AgentError",this.__proto__=qe.prototype,Object.setPrototypeOf(this,qe.prototype)}}function Oe(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}let Dr=class{constructor(t,r=t?.byteLength||0){this._buffer=di(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return di(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}};function zi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function di(e){return e instanceof Uint8Array?zi(e):e instanceof ArrayBuffer?e:Array.isArray(e)?zi(new Uint8Array(e)):"buffer"in e?di(e.buffer):zi(new Uint8Array(e))}function yl(e){const r=new TextEncoder().encode(e);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Ct(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return yl(e)}function lo(){throw new Error("unexpected end of buffer")}function xr(e,t){return e.byteLength<t&&lo(),e.read(t)}function vr(e){const t=e.readUint8();return t===void 0&&lo(),t}function Ge(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new Dr(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ze(e){let t=BigInt(1),r=BigInt(0),n;do n=vr(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}function De(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new Dr(new ArrayBuffer(r),0);for(;;){const c=i(e);if(e/=BigInt(128),t&&e===BigInt(0)&&c&64||!t&&e===BigInt(0)&&!(c&64)){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const f=c%BigInt(128);return Number(t?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Jt(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if(!(t[r]&64))return Ze(e);break}const n=new Uint8Array(xr(e,r+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}function gl(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return fo(e,t)}function fo(e,t){e=BigInt(e);const r=new Dr(new ArrayBuffer(Math.min(1,t)),0);let n=0,i=BigInt(256),c=BigInt(0),f=Number(e%i);for(r.write(new Uint8Array([f]));++n<t;)e<0&&c===BigInt(0)&&f!==0&&(c=BigInt(1)),f=Number((e/i-c)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function ho(e,t){let r=BigInt(vr(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);const c=BigInt(vr(e));r=r+n*c}return r}function wl(e,t){let r=ho(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function gs(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const Gn="DIDL",ca=400;function fn(e,t,r){return e.map((n,i)=>r(n,t[i]))}class ml{constructor(){this._typs=[],this._idx=new Map}has(t){return this._idx.has(t.name)}add(t,r){const n=this._typs.length;this._idx.set(t.name,n),this._typs.push(r)}merge(t,r){const n=this._idx.get(t.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+t);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const t=Ge(this._typs.length),r=Oe(...this._typs);return Oe(t,r)}indexOf(t){if(!this._idx.has(t))throw new Error("Missing type index for "+t);return De(this._idx.get(t)||0)}}class bl{visitType(t,r){throw new Error("Not implemented")}visitPrimitive(t,r){return this.visitType(t,r)}visitEmpty(t,r){return this.visitPrimitive(t,r)}visitBool(t,r){return this.visitPrimitive(t,r)}visitNull(t,r){return this.visitPrimitive(t,r)}visitReserved(t,r){return this.visitPrimitive(t,r)}visitText(t,r){return this.visitPrimitive(t,r)}visitNumber(t,r){return this.visitPrimitive(t,r)}visitInt(t,r){return this.visitNumber(t,r)}visitNat(t,r){return this.visitNumber(t,r)}visitFloat(t,r){return this.visitPrimitive(t,r)}visitFixedInt(t,r){return this.visitNumber(t,r)}visitFixedNat(t,r){return this.visitNumber(t,r)}visitPrincipal(t,r){return this.visitPrimitive(t,r)}visitConstruct(t,r){return this.visitType(t,r)}visitVec(t,r,n){return this.visitConstruct(t,n)}visitOpt(t,r,n){return this.visitConstruct(t,n)}visitRecord(t,r,n){return this.visitConstruct(t,n)}visitTuple(t,r,n){const i=r.map((c,f)=>[`_${f}_`,c]);return this.visitRecord(t,i,n)}visitVariant(t,r,n){return this.visitConstruct(t,n)}visitRec(t,r,n){return this.visitConstruct(r,n)}visitFunc(t,r){return this.visitConstruct(t,r)}visitService(t,r){return this.visitConstruct(t,r)}}class Ni{display(){return this.name}valueToString(t){return He(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class mt extends Ni{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class fr extends Ni{checkType(t){if(t instanceof dr){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class po extends mt{accept(t,r){return t.visitEmpty(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return De(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class yo extends Ni{checkType(t){throw new Error("Method not implemented for unknown.")}accept(t,r){throw t.visitType(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(t,r){let n=r.decodeValue(t,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof dr?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class go extends mt{accept(t,r){return t.visitBool(this,r)}covariant(t){if(typeof t=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return new Uint8Array([t?1:0])}encodeType(){return De(-2)}decodeValue(t,r){switch(this.checkType(r),vr(t)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class wo extends mt{accept(t,r){return t.visitNull(this,r)}covariant(t){if(t===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return De(-1)}decodeValue(t,r){return this.checkType(r),null}get name(){return"null"}}class hi extends mt{accept(t,r){return t.visitReserved(this,r)}covariant(t){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return De(-16)}decodeValue(t,r){return r.name!==this.name&&r.decodeValue(t,r),null}get name(){return"reserved"}}class mo extends mt{accept(t,r){return t.visitText(this,r)}covariant(t){if(typeof t=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=new TextEncoder().encode(t),n=Ge(r.byteLength);return Oe(n,r)}encodeType(){return De(-15)}decodeValue(t,r){this.checkType(r);const n=Ze(t),i=xr(t,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(t){return'"'+t+'"'}}class bo extends mt{accept(t,r){return t.visitInt(this,r)}covariant(t){if(typeof t=="bigint"||Number.isInteger(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return De(t)}encodeType(){return De(-4)}decodeValue(t,r){return this.checkType(r),Jt(t)}get name(){return"int"}valueToString(t){return t.toString()}}class _o extends mt{accept(t,r){return t.visitNat(this,r)}covariant(t){if(typeof t=="bigint"&&t>=BigInt(0)||Number.isInteger(t)&&t>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return Ge(t)}encodeType(){return De(-3)}decodeValue(t,r){return this.checkType(r),Ze(t)}get name(){return"nat"}valueToString(t){return t.toString()}}class qs extends mt{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,t,!0):n.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return De(t)}decodeValue(t,r){this.checkType(r);const n=xr(t,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class Tr extends mt{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=gs(this._bits-1)*BigInt(-1),n=gs(this._bits-1)-BigInt(1);let i=!1;if(typeof t=="bigint")i=t>=r&&t<=n;else if(Number.isInteger(t)){const c=BigInt(t);i=c>=r&&c<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return fo(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return De(-9-t)}decodeValue(t,r){this.checkType(r);const n=wl(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class cr extends mt{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=gs(this._bits);let n=!1;if(typeof t=="bigint"&&t>=BigInt(0)?n=t<r:Number.isInteger(t)&&t>=0?n=BigInt(t)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return gl(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return De(-5-t)}decodeValue(t,r){this.checkType(r);const n=ho(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class Si extends fr{constructor(t){super(),this._type=t,this._blobOptimization=!1,t instanceof cr&&t._bits===8&&(this._blobOptimization=!0)}accept(t,r){return t.visitVec(this,this._type,r)}covariant(t){const r=this._type instanceof cr?this._type._bits:this._type instanceof Tr?this._type._bits:0;if(ArrayBuffer.isView(t)&&r==t.BYTES_PER_ELEMENT*8||Array.isArray(t)&&t.every((n,i)=>{try{return this._type.covariant(n)}catch(c){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${c.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=Ge(t.length);if(this._blobOptimization)return Oe(r,new Uint8Array(t));if(ArrayBuffer.isView(t))return Oe(r,new Uint8Array(t.buffer));const n=new Dr(new ArrayBuffer(r.byteLength+t.length),0);n.write(r);for(const i of t){const c=this._type.encodeValue(i);n.write(new Uint8Array(c))}return n.buffer}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=De(-19),n=this._type.encodeType(t);t.add(this,Oe(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Si))throw new Error("Not a vector type");const i=Number(Ze(t));if(this._type instanceof cr){if(this._type._bits==8)return new Uint8Array(t.read(i));if(this._type._bits==16)return new Uint16Array(t.read(i*2));if(this._type._bits==32)return new Uint32Array(t.read(i*4));if(this._type._bits==64)return new BigUint64Array(t.read(i*8))}if(this._type instanceof Tr){if(this._type._bits==8)return new Int8Array(t.read(i));if(this._type._bits==16)return new Int16Array(t.read(i*2));if(this._type._bits==32)return new Int32Array(t.read(i*4));if(this._type._bits==64)return new BigInt64Array(t.read(i*8))}const c=[];for(let f=0;f<i;f++)c.push(this._type.decodeValue(t,n._type));return c}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(t){return"vec {"+t.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Lr extends fr{constructor(t){super(),this._type=t}accept(t,r){return t.visitOpt(this,this._type,r)}covariant(t){try{if(Array.isArray(t)&&(t.length===0||t.length===1&&this._type.covariant(t[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${He(t)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){return t.length===0?new Uint8Array([0]):Oe(new Uint8Array([1]),this._type.encodeValue(t[0]))}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=De(-18),n=this._type.encodeType(t);t.add(this,Oe(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Lr))throw new Error("Not an option type");switch(vr(t)){case 0:return[];case 1:return[this._type.decodeValue(t,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(t){return t.length===0?"null":`opt ${this._type.valueToString(t[0])}`}}class xn extends fr{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Ct(r[0])-Ct(n[0]))}accept(t,r){return t.visitRecord(this,this._fields,r)}tryAsTuple(){const t=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;t.push(i)}return t}covariant(t){if(typeof t=="object"&&this._fields.every(([r,n])=>{if(!t.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=this._fields.map(([i])=>t[i]),n=fn(this._fields,r,([,i],c)=>i.encodeValue(c));return Oe(...n)}_buildTypeTableImpl(t){this._fields.forEach(([c,f])=>f.buildTypeTable(t));const r=De(-20),n=Ge(this._fields.length),i=this._fields.map(([c,f])=>Oe(Ge(Ct(c)),f.encodeType(t)));t.add(this,Oe(r,n,Oe(...i)))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof xn))throw new Error("Not a record type");const i={};let c=0,f=0;for(;f<n._fields.length;){const[o,w]=n._fields[f];if(c>=this._fields.length){w.decodeValue(t,w),f++;continue}const[_,B]=this._fields[c],I=Ct(this._fields[c][0]),S=Ct(o);if(I===S)i[_]=B.decodeValue(t,w),c++,f++;else if(S>I)if(B instanceof Lr||B instanceof hi)i[_]=[],c++;else throw new Error("Cannot find required field "+_);else w.decodeValue(t,w),f++}for(const[o,w]of this._fields.slice(c))if(w instanceof Lr||w instanceof hi)i[o]=[];else throw new Error("Cannot find required field "+o);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(t){const r=this._fields.map(([i])=>t[i]);return`record {${fn(this._fields,r,([i,c],f)=>i+"="+c.valueToString(f)).join("; ")}}`}}class Ii extends xn{constructor(t){const r={};t.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=t}accept(t,r){return t.visitTuple(this,this._components,r)}covariant(t){if(Array.isArray(t)&&t.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(t[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=fn(this._components,t,(n,i)=>n.encodeValue(i));return Oe(...r)}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Ii))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[c,f]of n._components.entries())c>=this._components.length?f.decodeValue(t,f):i.push(this._components[c].decodeValue(t,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(t){return`record {${fn(this._components,t,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Ri extends fr{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Ct(r[0])-Ct(n[0]))}accept(t,r){return t.visitVariant(this,this._fields,r)}covariant(t){if(typeof t=="object"&&Object.entries(t).length===1&&this._fields.every(([r,n])=>{try{return!t.hasOwnProperty(r)||n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(t.hasOwnProperty(n)){const c=Ge(r),f=i.encodeValue(t[n]);return Oe(c,f)}}throw Error("Variant has no data: "+t)}_buildTypeTableImpl(t){this._fields.forEach(([,c])=>{c.buildTypeTable(t)});const r=De(-21),n=Ge(this._fields.length),i=this._fields.map(([c,f])=>Oe(Ge(Ct(c)),f.encodeType(t)));t.add(this,Oe(r,n,...i))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Ri))throw new Error("Not a variant type");const i=Number(Ze(t));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[c,f]=n._fields[i];for(const[o,w]of this._fields)if(Ct(c)===Ct(o)){const _=w.decodeValue(t,f);return{[o]:_}}throw new Error("Cannot find field hash "+c)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(t){for(const[r,n]of this._fields)if(t.hasOwnProperty(r)){const i=n.valueToString(t[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+t)}}class dr extends fr{constructor(){super(...arguments),this._id=dr._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}dr._counter=0;function Gs(e){if(vr(e)!==1)throw new Error("Cannot decode principal");const r=Number(Ze(e));return Te.fromUint8Array(new Uint8Array(xr(e,r)))}class Eo extends mt{accept(t,r){return t.visitPrincipal(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ge(r.byteLength);return Oe(new Uint8Array([1]),n,r)}encodeType(){return De(-24)}decodeValue(t,r){return this.checkType(r),Gs(t)}get name(){return"principal"}valueToString(t){return`${this.name} "${t.toText()}"`}}class js extends fr{constructor(t,r,n=[]){super(),this.argTypes=t,this.retTypes=r,this.annotations=n}static argsToString(t,r){if(t.length!==r.length)throw new Error("arity mismatch");return"("+t.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(t,r){return t.visitFunc(this,r)}covariant(t){if(Array.isArray(t)&&t.length===2&&t[0]&&t[0]._isPrincipal&&typeof t[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue([t,r]){const n=t.toUint8Array(),i=Ge(n.byteLength),c=Oe(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),o=Ge(f.byteLength);return Oe(new Uint8Array([1]),c,o,f)}_buildTypeTableImpl(t){this.argTypes.forEach(_=>_.buildTypeTable(t)),this.retTypes.forEach(_=>_.buildTypeTable(t));const r=De(-22),n=Ge(this.argTypes.length),i=Oe(...this.argTypes.map(_=>_.encodeType(t))),c=Ge(this.retTypes.length),f=Oe(...this.retTypes.map(_=>_.encodeType(t))),o=Ge(this.annotations.length),w=Oe(...this.annotations.map(_=>this.encodeAnnotation(_)));t.add(this,Oe(r,n,i,c,f,o,w))}decodeValue(t){if(vr(t)!==1)throw new Error("Cannot decode function reference");const n=Gs(t),i=Number(Ze(t)),c=xr(t,i),o=new TextDecoder("utf8",{fatal:!0}).decode(c);return[n,o]}get name(){const t=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${t}) -> (${r})${n}`}valueToString([t,r]){return`func "${t.toText()}".${r}`}display(){const t=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${t})  (${r})${n}`}encodeAnnotation(t){if(t==="query")return new Uint8Array([1]);if(t==="oneway")return new Uint8Array([2]);if(t==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class xo extends fr{constructor(t){super(),this._fields=Object.entries(t).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(t,r){return t.visitService(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ge(r.length);return Oe(new Uint8Array([1]),n,r)}_buildTypeTableImpl(t){this._fields.forEach(([c,f])=>f.buildTypeTable(t));const r=De(-23),n=Ge(this._fields.length),i=this._fields.map(([c,f])=>{const o=new TextEncoder().encode(c),w=Ge(o.length);return Oe(w,o,f.encodeType(t))});t.add(this,Oe(r,n,...i))}decodeValue(t){return Gs(t)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(t){return`service "${t.toText()}"`}}function He(e){const t=JSON.stringify(e,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return t&&t.length>ca?t.substring(0,ca-3)+"...":t}function ws(e,t){if(t.length<e.length)throw Error("Wrong number of message arguments");const r=new ml;e.forEach(w=>w.buildTypeTable(r));const n=new TextEncoder().encode(Gn),i=r.encode(),c=Ge(t.length),f=Oe(...e.map(w=>w.encodeType(r))),o=Oe(...fn(e,t,(w,_)=>{try{w.covariant(_)}catch(B){throw new Error(B.message+`

`)}return w.encodeValue(_)}));return Oe(n,i,c,f,o)}function vo(e,t){const r=new Dr(t);if(t.byteLength<Gn.length)throw new Error("Message length smaller than magic number");const n=xr(r,Gn.length),i=new TextDecoder().decode(n);if(i!==Gn)throw new Error("Wrong magic number: "+JSON.stringify(i));function c(N){const b=[],$=Number(Ze(N));for(let z=0;z<$;z++){const q=Number(Jt(N));switch(q){case-18:case-19:{const ie=Number(Jt(N));b.push([q,ie]);break}case-20:case-21:{const ie=[];let k=Number(Ze(N)),Z;for(;k--;){const G=Number(Ze(N));if(G>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof Z=="number"&&Z>=G)throw new Error("field id collision or not sorted");Z=G;const Q=Number(Jt(N));ie.push([G,Q])}b.push([q,ie]);break}case-22:{const ie=[];let k=Number(Ze(N));for(;k--;)ie.push(Number(Jt(N)));const Z=[];let G=Number(Ze(N));for(;G--;)Z.push(Number(Jt(N)));const Q=[];let te=Number(Ze(N));for(;te--;)switch(Number(Ze(N))){case 1:{Q.push("query");break}case 2:{Q.push("oneway");break}case 3:{Q.push("composite_query");break}default:throw new Error("unknown annotation")}b.push([q,[ie,Z,Q]]);break}case-23:{let ie=Number(Ze(N));const k=[];for(;ie--;){const Z=Number(Ze(N)),G=new TextDecoder().decode(xr(N,Z)),Q=Jt(N);k.push([G,Q])}b.push([q,k]);break}default:throw new Error("Illegal op_code: "+q)}}const M=[],W=Number(Ze(N));for(let z=0;z<W;z++)M.push(Number(Jt(N)));return[b,M]}const[f,o]=c(r);if(o.length<e.length)throw new Error("Wrong number of return values");const w=f.map(N=>Do());function _(N){if(N<-24)throw new Error("future value not supported");if(N<0)switch(N){case-1:return No;case-2:return Ao;case-3:return Ro;case-4:return Io;case-5:return Mo;case-6:return Vo;case-7:return $o;case-8:return qo;case-9:return Fo;case-10:return Po;case-11:return ko;case-12:return Co;case-13:return Oo;case-14:return Uo;case-15:return So;case-16:return Bo;case-17:return To;case-24:return Go;default:throw new Error("Illegal op_code: "+N)}if(N>=f.length)throw new Error("type index out of range");return w[N]}function B(N){switch(N[0]){case-19:{const b=_(N[1]);return Ho(b)}case-18:{const b=_(N[1]);return Lo(b)}case-20:{const b={};for(const[W,z]of N[1]){const q=`_${W}_`;b[q]=_(z)}const $=Ko(b),M=$.tryAsTuple();return Array.isArray(M)?jo(...M):$}case-21:{const b={};for(const[$,M]of N[1]){const W=`_${$}_`;b[W]=_(M)}return zo(b)}case-22:{const[b,$,M]=N[1];return Wo(b.map(W=>_(W)),$.map(W=>_(W)),M)}case-23:{const b={},$=N[1];for(const[M,W]of $){let z=_(W);if(z instanceof dr&&(z=z.getType()),!(z instanceof js))throw new Error("Illegal service definition: services can only contain functions");b[M]=z}return Yo(b)}default:throw new Error("Illegal op_code: "+N[0])}}f.forEach((N,b)=>{if(N[0]===-22){const $=B(N);w[b].fill($)}}),f.forEach((N,b)=>{if(N[0]!==-22){const $=B(N);w[b].fill($)}});const I=o.map(N=>_(N)),S=e.map((N,b)=>N.decodeValue(r,I[b]));for(let N=e.length;N<I.length;N++)I[N].decodeValue(r,I[N]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return S}const To=new po,Bo=new hi,_l=new yo,Ao=new go,No=new wo,So=new mo,Io=new bo,Ro=new _o,Oo=new qs(32),Uo=new qs(64),Fo=new Tr(8),Po=new Tr(16),ko=new Tr(32),Co=new Tr(64),Mo=new cr(8),Vo=new cr(16),$o=new cr(32),qo=new cr(64),Go=new Eo;function jo(...e){return new Ii(e)}function Ho(e){return new Si(e)}function Lo(e){return new Lr(e)}function Ko(e){return new xn(e)}function zo(e){return new Ri(e)}function Do(){return new dr}function Wo(e,t,r=[]){return new js(e,t,r)}function Yo(e){return new xo(e)}const El=Object.freeze(Object.defineProperty({__proto__:null,Bool:Ao,BoolClass:go,ConstructType:fr,Empty:To,EmptyClass:po,FixedIntClass:Tr,FixedNatClass:cr,Float32:Oo,Float64:Uo,FloatClass:qs,Func:Wo,FuncClass:js,Int:Io,Int16:Po,Int32:ko,Int64:Co,Int8:Fo,IntClass:bo,Nat:Ro,Nat16:Vo,Nat32:$o,Nat64:qo,Nat8:Mo,NatClass:_o,Null:No,NullClass:wo,Opt:Lo,OptClass:Lr,PrimitiveType:mt,Principal:Go,PrincipalClass:Eo,Rec:Do,RecClass:dr,Record:Ko,RecordClass:xn,Reserved:Bo,ReservedClass:hi,Service:Yo,ServiceClass:xo,Text:So,TextClass:mo,Tuple:jo,TupleClass:Ii,Type:Ni,Unknown:_l,UnknownClass:yo,Variant:zo,VariantClass:Ri,Vec:Ho,VecClass:Si,Visitor:bl,decode:vo,encode:ws},Symbol.toStringTag,{value:"Module"}));var Zo={},vn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=bn,r=_n,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=z,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var p=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(p,a),p.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');var a=new Uint8Array(p);return Object.setPrototypeOf(a,o.prototype),a}function o(p,a,u){if(typeof p=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(p)}return w(p,a,u)}o.poolSize=8192;function w(p,a,u){if(typeof p=="string")return S(p,a);if(ArrayBuffer.isView(p))return b(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(x(p,ArrayBuffer)||p&&x(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(x(p,SharedArrayBuffer)||p&&x(p.buffer,SharedArrayBuffer)))return $(p,a,u);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var g=p.valueOf&&p.valueOf();if(g!=null&&g!==p)return o.from(g,a,u);var v=M(p);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return o.from(p[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}o.from=function(p,a,u){return w(p,a,u)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function _(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function B(p,a,u){return _(p),p<=0?f(p):a!==void 0?typeof u=="string"?f(p).fill(a,u):f(p).fill(a):f(p)}o.alloc=function(p,a,u){return B(p,a,u)};function I(p){return _(p),f(p<0?0:W(p)|0)}o.allocUnsafe=function(p){return I(p)},o.allocUnsafeSlow=function(p){return I(p)};function S(p,a){if((typeof a!="string"||a==="")&&(a="utf8"),!o.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var u=q(p,a)|0,g=f(u),v=g.write(p,a);return v!==u&&(g=g.slice(0,v)),g}function N(p){for(var a=p.length<0?0:W(p.length)|0,u=f(a),g=0;g<a;g+=1)u[g]=p[g]&255;return u}function b(p){if(x(p,Uint8Array)){var a=new Uint8Array(p);return $(a.buffer,a.byteOffset,a.byteLength)}return N(p)}function $(p,a,u){if(a<0||p.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');var g;return a===void 0&&u===void 0?g=new Uint8Array(p):u===void 0?g=new Uint8Array(p,a):g=new Uint8Array(p,a,u),Object.setPrototypeOf(g,o.prototype),g}function M(p){if(o.isBuffer(p)){var a=W(p.length)|0,u=f(a);return u.length===0||p.copy(u,0,0,a),u}if(p.length!==void 0)return typeof p.length!="number"||T(p.length)?f(0):N(p);if(p.type==="Buffer"&&Array.isArray(p.data))return N(p.data)}function W(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function z(p){return+p!=p&&(p=0),o.alloc(+p)}o.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==o.prototype},o.compare=function(a,u){if(x(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),x(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(a)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;for(var g=a.length,v=u.length,R=0,H=Math.min(g,v);R<H;++R)if(a[R]!==u[R]){g=a[R],v=u[R];break}return g<v?-1:v<g?1:0},o.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return o.alloc(0);var g;if(u===void 0)for(u=0,g=0;g<a.length;++g)u+=a[g].length;var v=o.allocUnsafe(u),R=0;for(g=0;g<a.length;++g){var H=a[g];if(x(H,Uint8Array))R+H.length>v.length?o.from(H).copy(v,R):Uint8Array.prototype.set.call(v,H,R);else if(o.isBuffer(H))H.copy(v,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=H.length}return v};function q(p,a){if(o.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||x(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);var u=p.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;for(var v=!1;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return ne(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return s(p).length;default:if(v)return g?-1:ne(p).length;a=(""+a).toLowerCase(),v=!0}}o.byteLength=q;function ie(p,a,u){var g=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(p||(p="utf8");;)switch(p){case"hex":return ee(this,a,u);case"utf8":case"utf-8":return P(this,a,u);case"ascii":return j(this,a,u);case"latin1":case"binary":return J(this,a,u);case"base64":return O(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,a,u);default:if(g)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),g=!0}}o.prototype._isBuffer=!0;function k(p,a,u){var g=p[a];p[a]=p[u],p[u]=g}o.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<a;u+=2)k(this,u,u+1);return this},o.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<a;u+=4)k(this,u,u+3),k(this,u+1,u+2);return this},o.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<a;u+=8)k(this,u,u+7),k(this,u+1,u+6),k(this,u+2,u+5),k(this,u+3,u+4);return this},o.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?P(this,0,a):ie.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(a){if(!o.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:o.compare(this,a)===0},o.prototype.inspect=function(){var a="",u=e.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(a,u,g,v,R){if(x(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),g===void 0&&(g=a?a.length:0),v===void 0&&(v=0),R===void 0&&(R=this.length),u<0||g>a.length||v<0||R>this.length)throw new RangeError("out of range index");if(v>=R&&u>=g)return 0;if(v>=R)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,v>>>=0,R>>>=0,this===a)return 0;for(var H=R-v,Y=g-u,oe=Math.min(H,Y),ye=this.slice(v,R),me=a.slice(u,g),y=0;y<oe;++y)if(ye[y]!==me[y]){H=ye[y],Y=me[y];break}return H<Y?-1:Y<H?1:0};function Z(p,a,u,g,v){if(p.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,T(u)&&(u=v?0:p.length-1),u<0&&(u=p.length+u),u>=p.length){if(v)return-1;u=p.length-1}else if(u<0)if(v)u=0;else return-1;if(typeof a=="string"&&(a=o.from(a,g)),o.isBuffer(a))return a.length===0?-1:G(p,a,u,g,v);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(p,a,u):Uint8Array.prototype.lastIndexOf.call(p,a,u):G(p,[a],u,g,v);throw new TypeError("val must be string, number or Buffer")}function G(p,a,u,g,v){var R=1,H=p.length,Y=a.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(p.length<2||a.length<2)return-1;R=2,H/=2,Y/=2,u/=2}function oe(d,A){return R===1?d[A]:d.readUInt16BE(A*R)}var ye;if(v){var me=-1;for(ye=u;ye<H;ye++)if(oe(p,ye)===oe(a,me===-1?0:ye-me)){if(me===-1&&(me=ye),ye-me+1===Y)return me*R}else me!==-1&&(ye-=ye-me),me=-1}else for(u+Y>H&&(u=H-Y),ye=u;ye>=0;ye--){for(var y=!0,l=0;l<Y;l++)if(oe(p,ye+l)!==oe(a,l)){y=!1;break}if(y)return ye}return-1}o.prototype.includes=function(a,u,g){return this.indexOf(a,u,g)!==-1},o.prototype.indexOf=function(a,u,g){return Z(this,a,u,g,!0)},o.prototype.lastIndexOf=function(a,u,g){return Z(this,a,u,g,!1)};function Q(p,a,u,g){u=Number(u)||0;var v=p.length-u;g?(g=Number(g),g>v&&(g=v)):g=v;var R=a.length;g>R/2&&(g=R/2);for(var H=0;H<g;++H){var Y=parseInt(a.substr(H*2,2),16);if(T(Y))return H;p[u+H]=Y}return H}function te(p,a,u,g){return h(ne(a,p.length-u),p,u,g)}function X(p,a,u,g){return h(ce(a),p,u,g)}function he(p,a,u,g){return h(s(a),p,u,g)}function le(p,a,u,g){return h(m(a,p.length-u),p,u,g)}o.prototype.write=function(a,u,g,v){if(u===void 0)v="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")v=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,v===void 0&&(v="utf8")):(v=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var R=this.length-u;if((g===void 0||g>R)&&(g=R),a.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");for(var H=!1;;)switch(v){case"hex":return Q(this,a,u,g);case"utf8":case"utf-8":return te(this,a,u,g);case"ascii":case"latin1":case"binary":return X(this,a,u,g);case"base64":return he(this,a,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,a,u,g);default:if(H)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),H=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(p,a,u){return a===0&&u===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(a,u))}function P(p,a,u){u=Math.min(p.length,u);for(var g=[],v=a;v<u;){var R=p[v],H=null,Y=R>239?4:R>223?3:R>191?2:1;if(v+Y<=u){var oe,ye,me,y;switch(Y){case 1:R<128&&(H=R);break;case 2:oe=p[v+1],(oe&192)===128&&(y=(R&31)<<6|oe&63,y>127&&(H=y));break;case 3:oe=p[v+1],ye=p[v+2],(oe&192)===128&&(ye&192)===128&&(y=(R&15)<<12|(oe&63)<<6|ye&63,y>2047&&(y<55296||y>57343)&&(H=y));break;case 4:oe=p[v+1],ye=p[v+2],me=p[v+3],(oe&192)===128&&(ye&192)===128&&(me&192)===128&&(y=(R&15)<<18|(oe&63)<<12|(ye&63)<<6|me&63,y>65535&&y<1114112&&(H=y))}}H===null?(H=65533,Y=1):H>65535&&(H-=65536,g.push(H>>>10&1023|55296),H=56320|H&1023),g.push(H),v+=Y}return V(g)}var D=4096;function V(p){var a=p.length;if(a<=D)return String.fromCharCode.apply(String,p);for(var u="",g=0;g<a;)u+=String.fromCharCode.apply(String,p.slice(g,g+=D));return u}function j(p,a,u){var g="";u=Math.min(p.length,u);for(var v=a;v<u;++v)g+=String.fromCharCode(p[v]&127);return g}function J(p,a,u){var g="";u=Math.min(p.length,u);for(var v=a;v<u;++v)g+=String.fromCharCode(p[v]);return g}function ee(p,a,u){var g=p.length;(!a||a<0)&&(a=0),(!u||u<0||u>g)&&(u=g);for(var v="",R=a;R<u;++R)v+=U[p[R]];return v}function ge(p,a,u){for(var g=p.slice(a,u),v="",R=0;R<g.length-1;R+=2)v+=String.fromCharCode(g[R]+g[R+1]*256);return v}o.prototype.slice=function(a,u){var g=this.length;a=~~a,u=u===void 0?g:~~u,a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<a&&(u=a);var v=this.subarray(a,u);return Object.setPrototypeOf(v,o.prototype),v};function ae(p,a,u){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+a>u)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||ae(a,u,this.length);for(var v=this[a],R=1,H=0;++H<u&&(R*=256);)v+=this[a+H]*R;return v},o.prototype.readUintBE=o.prototype.readUIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||ae(a,u,this.length);for(var v=this[a+--u],R=1;u>0&&(R*=256);)v+=this[a+--u]*R;return v},o.prototype.readUint8=o.prototype.readUInt8=function(a,u){return a=a>>>0,u||ae(a,1,this.length),this[a]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||ae(a,2,this.length),this[a]|this[a+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||ae(a,2,this.length),this[a]<<8|this[a+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},o.prototype.readIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||ae(a,u,this.length);for(var v=this[a],R=1,H=0;++H<u&&(R*=256);)v+=this[a+H]*R;return R*=128,v>=R&&(v-=Math.pow(2,8*u)),v},o.prototype.readIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||ae(a,u,this.length);for(var v=u,R=1,H=this[a+--v];v>0&&(R*=256);)H+=this[a+--v]*R;return R*=128,H>=R&&(H-=Math.pow(2,8*u)),H},o.prototype.readInt8=function(a,u){return a=a>>>0,u||ae(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},o.prototype.readInt16LE=function(a,u){a=a>>>0,u||ae(a,2,this.length);var g=this[a]|this[a+1]<<8;return g&32768?g|4294901760:g},o.prototype.readInt16BE=function(a,u){a=a>>>0,u||ae(a,2,this.length);var g=this[a+1]|this[a]<<8;return g&32768?g|4294901760:g},o.prototype.readInt32LE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},o.prototype.readInt32BE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},o.prototype.readFloatLE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),r.read(this,a,!0,23,4)},o.prototype.readFloatBE=function(a,u){return a=a>>>0,u||ae(a,4,this.length),r.read(this,a,!1,23,4)},o.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||ae(a,8,this.length),r.read(this,a,!0,52,8)},o.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||ae(a,8,this.length),r.read(this,a,!1,52,8)};function fe(p,a,u,g,v,R){if(!o.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>v||a<R)throw new RangeError('"value" argument is out of bounds');if(u+g>p.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(a,u,g,v){if(a=+a,u=u>>>0,g=g>>>0,!v){var R=Math.pow(2,8*g)-1;fe(this,a,u,g,R,0)}var H=1,Y=0;for(this[u]=a&255;++Y<g&&(H*=256);)this[u+Y]=a/H&255;return u+g},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(a,u,g,v){if(a=+a,u=u>>>0,g=g>>>0,!v){var R=Math.pow(2,8*g)-1;fe(this,a,u,g,R,0)}var H=g-1,Y=1;for(this[u+H]=a&255;--H>=0&&(Y*=256);)this[u+H]=a/Y&255;return u+g},o.prototype.writeUint8=o.prototype.writeUInt8=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,1,255,0),this[u]=a&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},o.prototype.writeIntLE=function(a,u,g,v){if(a=+a,u=u>>>0,!v){var R=Math.pow(2,8*g-1);fe(this,a,u,g,R-1,-R)}var H=0,Y=1,oe=0;for(this[u]=a&255;++H<g&&(Y*=256);)a<0&&oe===0&&this[u+H-1]!==0&&(oe=1),this[u+H]=(a/Y>>0)-oe&255;return u+g},o.prototype.writeIntBE=function(a,u,g,v){if(a=+a,u=u>>>0,!v){var R=Math.pow(2,8*g-1);fe(this,a,u,g,R-1,-R)}var H=g-1,Y=1,oe=0;for(this[u+H]=a&255;--H>=0&&(Y*=256);)a<0&&oe===0&&this[u+H+1]!==0&&(oe=1),this[u+H]=(a/Y>>0)-oe&255;return u+g},o.prototype.writeInt8=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},o.prototype.writeInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},o.prototype.writeInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},o.prototype.writeInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},o.prototype.writeInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||fe(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function re(p,a,u,g,v,R){if(u+g>p.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function E(p,a,u,g,v){return a=+a,u=u>>>0,v||re(p,a,u,4),r.write(p,a,u,g,23,4),u+4}o.prototype.writeFloatLE=function(a,u,g){return E(this,a,u,!0,g)},o.prototype.writeFloatBE=function(a,u,g){return E(this,a,u,!1,g)};function se(p,a,u,g,v){return a=+a,u=u>>>0,v||re(p,a,u,8),r.write(p,a,u,g,52,8),u+8}o.prototype.writeDoubleLE=function(a,u,g){return se(this,a,u,!0,g)},o.prototype.writeDoubleBE=function(a,u,g){return se(this,a,u,!1,g)},o.prototype.copy=function(a,u,g,v){if(!o.isBuffer(a))throw new TypeError("argument should be a Buffer");if(g||(g=0),!v&&v!==0&&(v=this.length),u>=a.length&&(u=a.length),u||(u=0),v>0&&v<g&&(v=g),v===g||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),a.length-u<v-g&&(v=a.length-u+g);var R=v-g;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,v):Uint8Array.prototype.set.call(a,this.subarray(g,v),u),R},o.prototype.fill=function(a,u,g,v){if(typeof a=="string"){if(typeof u=="string"?(v=u,u=0,g=this.length):typeof g=="string"&&(v=g,g=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!o.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(a.length===1){var R=a.charCodeAt(0);(v==="utf8"&&R<128||v==="latin1")&&(a=R)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,a||(a=0);var H;if(typeof a=="number")for(H=u;H<g;++H)this[H]=a;else{var Y=o.isBuffer(a)?a:o.from(a,v),oe=Y.length;if(oe===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(H=0;H<g-u;++H)this[H+u]=Y[H%oe]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function pe(p){if(p=p.split("=")[0],p=p.trim().replace(ue,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function ne(p,a){a=a||1/0;for(var u,g=p.length,v=null,R=[],H=0;H<g;++H){if(u=p.charCodeAt(H),u>55295&&u<57344){if(!v){if(u>56319){(a-=3)>-1&&R.push(239,191,189);continue}else if(H+1===g){(a-=3)>-1&&R.push(239,191,189);continue}v=u;continue}if(u<56320){(a-=3)>-1&&R.push(239,191,189),v=u;continue}u=(v-55296<<10|u-56320)+65536}else v&&(a-=3)>-1&&R.push(239,191,189);if(v=null,u<128){if((a-=1)<0)break;R.push(u)}else if(u<2048){if((a-=2)<0)break;R.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;R.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;R.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return R}function ce(p){for(var a=[],u=0;u<p.length;++u)a.push(p.charCodeAt(u)&255);return a}function m(p,a){for(var u,g,v,R=[],H=0;H<p.length&&!((a-=2)<0);++H)u=p.charCodeAt(H),g=u>>8,v=u%256,R.push(v),R.push(g);return R}function s(p){return t.toByteArray(pe(p))}function h(p,a,u,g){for(var v=0;v<g&&!(v+u>=a.length||v>=p.length);++v)a[v+u]=p[v];return v}function x(p,a){return p instanceof a||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===a.name}function T(p){return p!==p}var U=function(){for(var p="0123456789abcdef",a=new Array(256),u=0;u<16;++u)for(var g=u*16,v=0;v<16;++v)a[g+v]=p[u]+p[v];return a}()})(vn);var Xo={exports:{}};(function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,c=Math.floor,f="[BigNumber Error] ",o=f+"Number primitive has more than 15 significant digits: ",w=1e14,_=14,B=9007199254740991,I=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],S=1e7,N=1e9;function b(Z){var G,Q,te,X=E.prototype={constructor:E,toString:null,valueOf:null},he=new E(1),le=20,O=4,P=-7,D=21,V=-1e7,j=1e7,J=!1,ee=1,ge=0,ae={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",re=!0;function E(m,s){var h,x,T,U,p,a,u,g,v=this;if(!(v instanceof E))return new E(m,s);if(s==null){if(m&&m._isBigNumber===!0){v.s=m.s,!m.c||m.e>j?v.c=v.e=null:m.e<V?v.c=[v.e=0]:(v.e=m.e,v.c=m.c.slice());return}if((a=typeof m=="number")&&m*0==0){if(v.s=1/m<0?(m=-m,-1):1,m===~~m){for(U=0,p=m;p>=10;p/=10,U++);U>j?v.c=v.e=null:(v.e=U,v.c=[m]);return}g=String(m)}else{if(!n.test(g=String(m)))return te(v,g,a);v.s=g.charCodeAt(0)==45?(g=g.slice(1),-1):1}(U=g.indexOf("."))>-1&&(g=g.replace(".","")),(p=g.search(/e/i))>0?(U<0&&(U=p),U+=+g.slice(p+1),g=g.substring(0,p)):U<0&&(U=g.length)}else{if(z(s,2,fe.length,"Base"),s==10&&re)return v=new E(m),ne(v,le+v.e+1,O);if(g=String(m),a=typeof m=="number"){if(m*0!=0)return te(v,g,a,s);if(v.s=1/m<0?(g=g.slice(1),-1):1,E.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(o+m)}else v.s=g.charCodeAt(0)===45?(g=g.slice(1),-1):1;for(h=fe.slice(0,s),U=p=0,u=g.length;p<u;p++)if(h.indexOf(x=g.charAt(p))<0){if(x=="."){if(p>U){U=u;continue}}else if(!T&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){T=!0,p=-1,U=0;continue}return te(v,String(m),a,s)}a=!1,g=Q(g,s,10,v.s),(U=g.indexOf("."))>-1?g=g.replace(".",""):U=g.length}for(p=0;g.charCodeAt(p)===48;p++);for(u=g.length;g.charCodeAt(--u)===48;);if(g=g.slice(p,++u)){if(u-=p,a&&E.DEBUG&&u>15&&(m>B||m!==c(m)))throw Error(o+v.s*m);if((U=U-p-1)>j)v.c=v.e=null;else if(U<V)v.c=[v.e=0];else{if(v.e=U,v.c=[],p=(U+1)%_,U<0&&(p+=_),p<u){for(p&&v.c.push(+g.slice(0,p)),u-=_;p<u;)v.c.push(+g.slice(p,p+=_));p=_-(g=g.slice(p)).length}else p-=u;for(;p--;g+="0");v.c.push(+g)}}else v.c=[v.e=0]}E.clone=b,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(m){var s,h;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(s="DECIMAL_PLACES")&&(h=m[s],z(h,0,N,s),le=h),m.hasOwnProperty(s="ROUNDING_MODE")&&(h=m[s],z(h,0,8,s),O=h),m.hasOwnProperty(s="EXPONENTIAL_AT")&&(h=m[s],h&&h.pop?(z(h[0],-1e9,0,s),z(h[1],0,N,s),P=h[0],D=h[1]):(z(h,-1e9,N,s),P=-(D=h<0?-h:h))),m.hasOwnProperty(s="RANGE"))if(h=m[s],h&&h.pop)z(h[0],-1e9,-1,s),z(h[1],1,N,s),V=h[0],j=h[1];else if(z(h,-1e9,N,s),h)V=-(j=h<0?-h:h);else throw Error(f+s+" cannot be zero: "+h);if(m.hasOwnProperty(s="CRYPTO"))if(h=m[s],h===!!h)if(h)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))J=h;else throw J=!h,Error(f+"crypto unavailable");else J=h;else throw Error(f+s+" not true or false: "+h);if(m.hasOwnProperty(s="MODULO_MODE")&&(h=m[s],z(h,0,9,s),ee=h),m.hasOwnProperty(s="POW_PRECISION")&&(h=m[s],z(h,0,N,s),ge=h),m.hasOwnProperty(s="FORMAT"))if(h=m[s],typeof h=="object")ae=h;else throw Error(f+s+" not an object: "+h);if(m.hasOwnProperty(s="ALPHABET"))if(h=m[s],typeof h=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(h))re=h.slice(0,10)=="0123456789",fe=h;else throw Error(f+s+" invalid: "+h)}else throw Error(f+"Object expected: "+m);return{DECIMAL_PLACES:le,ROUNDING_MODE:O,EXPONENTIAL_AT:[P,D],RANGE:[V,j],CRYPTO:J,MODULO_MODE:ee,POW_PRECISION:ge,FORMAT:ae,ALPHABET:fe}},E.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!E.DEBUG)return!0;var s,h,x=m.c,T=m.e,U=m.s;e:if({}.toString.call(x)=="[object Array]"){if((U===1||U===-1)&&T>=-1e9&&T<=N&&T===c(T)){if(x[0]===0){if(T===0&&x.length===1)return!0;break e}if(s=(T+1)%_,s<1&&(s+=_),String(x[0]).length==s){for(s=0;s<x.length;s++)if(h=x[s],h<0||h>=w||h!==c(h))break e;if(h!==0)return!0}}}else if(x===null&&T===null&&(U===null||U===1||U===-1))return!0;throw Error(f+"Invalid BigNumber: "+m)},E.maximum=E.max=function(){return ue(arguments,-1)},E.minimum=E.min=function(){return ue(arguments,1)},E.random=function(){var m=9007199254740992,s=Math.random()*m&2097151?function(){return c(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(h){var x,T,U,p,a,u=0,g=[],v=new E(he);if(h==null?h=le:z(h,0,N),p=i(h/_),J)if(crypto.getRandomValues){for(x=crypto.getRandomValues(new Uint32Array(p*=2));u<p;)a=x[u]*131072+(x[u+1]>>>11),a>=9e15?(T=crypto.getRandomValues(new Uint32Array(2)),x[u]=T[0],x[u+1]=T[1]):(g.push(a%1e14),u+=2);u=p/2}else if(crypto.randomBytes){for(x=crypto.randomBytes(p*=7);u<p;)a=(x[u]&31)*281474976710656+x[u+1]*1099511627776+x[u+2]*4294967296+x[u+3]*16777216+(x[u+4]<<16)+(x[u+5]<<8)+x[u+6],a>=9e15?crypto.randomBytes(7).copy(x,u):(g.push(a%1e14),u+=7);u=p/7}else throw J=!1,Error(f+"crypto unavailable");if(!J)for(;u<p;)a=s(),a<9e15&&(g[u++]=a%1e14);for(p=g[--u],h%=_,p&&h&&(a=I[_-h],g[u]=c(p/a)*a);g[u]===0;g.pop(),u--);if(u<0)g=[U=0];else{for(U=-1;g[0]===0;g.splice(0,1),U-=_);for(u=1,a=g[0];a>=10;a/=10,u++);u<_&&(U-=_-u)}return v.e=U,v.c=g,v}}(),E.sum=function(){for(var m=1,s=arguments,h=new E(s[0]);m<s.length;)h=h.plus(s[m++]);return h},Q=function(){var m="0123456789";function s(h,x,T,U){for(var p,a=[0],u,g=0,v=h.length;g<v;){for(u=a.length;u--;a[u]*=x);for(a[0]+=U.indexOf(h.charAt(g++)),p=0;p<a.length;p++)a[p]>T-1&&(a[p+1]==null&&(a[p+1]=0),a[p+1]+=a[p]/T|0,a[p]%=T)}return a.reverse()}return function(h,x,T,U,p){var a,u,g,v,R,H,Y,oe,ye=h.indexOf("."),me=le,y=O;for(ye>=0&&(v=ge,ge=0,h=h.replace(".",""),oe=new E(x),H=oe.pow(h.length-ye),ge=v,oe.c=s(k(M(H.c),H.e,"0"),10,T,m),oe.e=oe.c.length),Y=s(h,x,T,p?(a=fe,m):(a=m,fe)),g=v=Y.length;Y[--v]==0;Y.pop());if(!Y[0])return a.charAt(0);if(ye<0?--g:(H.c=Y,H.e=g,H.s=U,H=G(H,oe,me,y,T),Y=H.c,R=H.r,g=H.e),u=g+me+1,ye=Y[u],v=T/2,R=R||u<0||Y[u+1]!=null,R=y<4?(ye!=null||R)&&(y==0||y==(H.s<0?3:2)):ye>v||ye==v&&(y==4||R||y==6&&Y[u-1]&1||y==(H.s<0?8:7)),u<1||!Y[0])h=R?k(a.charAt(1),-me,a.charAt(0)):a.charAt(0);else{if(Y.length=u,R)for(--T;++Y[--u]>T;)Y[u]=0,u||(++g,Y=[1].concat(Y));for(v=Y.length;!Y[--v];);for(ye=0,h="";ye<=v;h+=a.charAt(Y[ye++]));h=k(h,g,a.charAt(0))}return h}}(),G=function(){function m(x,T,U){var p,a,u,g,v=0,R=x.length,H=T%S,Y=T/S|0;for(x=x.slice();R--;)u=x[R]%S,g=x[R]/S|0,p=Y*u+g*H,a=H*u+p%S*S+v,v=(a/U|0)+(p/S|0)+Y*g,x[R]=a%U;return v&&(x=[v].concat(x)),x}function s(x,T,U,p){var a,u;if(U!=p)u=U>p?1:-1;else for(a=u=0;a<U;a++)if(x[a]!=T[a]){u=x[a]>T[a]?1:-1;break}return u}function h(x,T,U,p){for(var a=0;U--;)x[U]-=a,a=x[U]<T[U]?1:0,x[U]=a*p+x[U]-T[U];for(;!x[0]&&x.length>1;x.splice(0,1));}return function(x,T,U,p,a){var u,g,v,R,H,Y,oe,ye,me,y,l,d,A,C,K,L,_e,ve=x.s==T.s?1:-1,xe=x.c,Ee=T.c;if(!xe||!xe[0]||!Ee||!Ee[0])return new E(!x.s||!T.s||(xe?Ee&&xe[0]==Ee[0]:!Ee)?NaN:xe&&xe[0]==0||!Ee?ve*0:ve/0);for(ye=new E(ve),me=ye.c=[],g=x.e-T.e,ve=U+g+1,a||(a=w,g=$(x.e/_)-$(T.e/_),ve=ve/_|0),v=0;Ee[v]==(xe[v]||0);v++);if(Ee[v]>(xe[v]||0)&&g--,ve<0)me.push(1),R=!0;else{for(C=xe.length,L=Ee.length,v=0,ve+=2,H=c(a/(Ee[0]+1)),H>1&&(Ee=m(Ee,H,a),xe=m(xe,H,a),L=Ee.length,C=xe.length),A=L,y=xe.slice(0,L),l=y.length;l<L;y[l++]=0);_e=Ee.slice(),_e=[0].concat(_e),K=Ee[0],Ee[1]>=a/2&&K++;do{if(H=0,u=s(Ee,y,L,l),u<0){if(d=y[0],L!=l&&(d=d*a+(y[1]||0)),H=c(d/K),H>1)for(H>=a&&(H=a-1),Y=m(Ee,H,a),oe=Y.length,l=y.length;s(Y,y,oe,l)==1;)H--,h(Y,L<oe?_e:Ee,oe,a),oe=Y.length,u=1;else H==0&&(u=H=1),Y=Ee.slice(),oe=Y.length;if(oe<l&&(Y=[0].concat(Y)),h(y,Y,l,a),l=y.length,u==-1)for(;s(Ee,y,L,l)<1;)H++,h(y,L<l?_e:Ee,l,a),l=y.length}else u===0&&(H++,y=[0]);me[v++]=H,y[0]?y[l++]=xe[A]||0:(y=[xe[A]],l=1)}while((A++<C||y[0]!=null)&&ve--);R=y[0]!=null,me[0]||me.splice(0,1)}if(a==w){for(v=1,ve=me[0];ve>=10;ve/=10,v++);ne(ye,U+(ye.e=v+g*_-1)+1,p,R)}else ye.e=g,ye.r=+R;return ye}}();function se(m,s,h,x){var T,U,p,a,u;if(h==null?h=O:z(h,0,8),!m.c)return m.toString();if(T=m.c[0],p=m.e,s==null)u=M(m.c),u=x==1||x==2&&(p<=P||p>=D)?ie(u,p):k(u,p,"0");else if(m=ne(new E(m),s,h),U=m.e,u=M(m.c),a=u.length,x==1||x==2&&(s<=U||U<=P)){for(;a<s;u+="0",a++);u=ie(u,U)}else if(s-=p,u=k(u,U,"0"),U+1>a){if(--s>0)for(u+=".";s--;u+="0");}else if(s+=U-a,s>0)for(U+1==a&&(u+=".");s--;u+="0");return m.s<0&&T?"-"+u:u}function ue(m,s){for(var h,x,T=1,U=new E(m[0]);T<m.length;T++)x=new E(m[T]),(!x.s||(h=W(U,x))===s||h===0&&U.s===s)&&(U=x);return U}function pe(m,s,h){for(var x=1,T=s.length;!s[--T];s.pop());for(T=s[0];T>=10;T/=10,x++);return(h=x+h*_-1)>j?m.c=m.e=null:h<V?m.c=[m.e=0]:(m.e=h,m.c=s),m}te=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,h=/^\.([^.]+)$/,x=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,p,a,u){var g,v=a?p:p.replace(T,"");if(x.test(v))U.s=isNaN(v)?null:v<0?-1:1;else{if(!a&&(v=v.replace(m,function(R,H,Y){return g=(Y=Y.toLowerCase())=="x"?16:Y=="b"?2:8,!u||u==g?H:R}),u&&(g=u,v=v.replace(s,"$1").replace(h,"0.$1")),p!=v))return new E(v,g);if(E.DEBUG)throw Error(f+"Not a"+(u?" base "+u:"")+" number: "+p);U.s=null}U.c=U.e=null}}();function ne(m,s,h,x){var T,U,p,a,u,g,v,R=m.c,H=I;if(R){e:{for(T=1,a=R[0];a>=10;a/=10,T++);if(U=s-T,U<0)U+=_,p=s,u=R[g=0],v=c(u/H[T-p-1]%10);else if(g=i((U+1)/_),g>=R.length)if(x){for(;R.length<=g;R.push(0));u=v=0,T=1,U%=_,p=U-_+1}else break e;else{for(u=a=R[g],T=1;a>=10;a/=10,T++);U%=_,p=U-_+T,v=p<0?0:c(u/H[T-p-1]%10)}if(x=x||s<0||R[g+1]!=null||(p<0?u:u%H[T-p-1]),x=h<4?(v||x)&&(h==0||h==(m.s<0?3:2)):v>5||v==5&&(h==4||x||h==6&&(U>0?p>0?u/H[T-p]:0:R[g-1])%10&1||h==(m.s<0?8:7)),s<1||!R[0])return R.length=0,x?(s-=m.e+1,R[0]=H[(_-s%_)%_],m.e=-s||0):R[0]=m.e=0,m;if(U==0?(R.length=g,a=1,g--):(R.length=g+1,a=H[_-U],R[g]=p>0?c(u/H[T-p]%H[p])*a:0),x)for(;;)if(g==0){for(U=1,p=R[0];p>=10;p/=10,U++);for(p=R[0]+=a,a=1;p>=10;p/=10,a++);U!=a&&(m.e++,R[0]==w&&(R[0]=1));break}else{if(R[g]+=a,R[g]!=w)break;R[g--]=0,a=1}for(U=R.length;R[--U]===0;R.pop());}m.e>j?m.c=m.e=null:m.e<V&&(m.c=[m.e=0])}return m}function ce(m){var s,h=m.e;return h===null?m.toString():(s=M(m.c),s=h<=P||h>=D?ie(s,h):k(s,h,"0"),m.s<0?"-"+s:s)}return X.absoluteValue=X.abs=function(){var m=new E(this);return m.s<0&&(m.s=1),m},X.comparedTo=function(m,s){return W(this,new E(m,s))},X.decimalPlaces=X.dp=function(m,s){var h,x,T,U=this;if(m!=null)return z(m,0,N),s==null?s=O:z(s,0,8),ne(new E(U),m+U.e+1,s);if(!(h=U.c))return null;if(x=((T=h.length-1)-$(this.e/_))*_,T=h[T])for(;T%10==0;T/=10,x--);return x<0&&(x=0),x},X.dividedBy=X.div=function(m,s){return G(this,new E(m,s),le,O)},X.dividedToIntegerBy=X.idiv=function(m,s){return G(this,new E(m,s),0,1)},X.exponentiatedBy=X.pow=function(m,s){var h,x,T,U,p,a,u,g,v,R=this;if(m=new E(m),m.c&&!m.isInteger())throw Error(f+"Exponent not an integer: "+ce(m));if(s!=null&&(s=new E(s)),a=m.e>14,!R.c||!R.c[0]||R.c[0]==1&&!R.e&&R.c.length==1||!m.c||!m.c[0])return v=new E(Math.pow(+ce(R),a?m.s*(2-q(m)):+ce(m))),s?v.mod(s):v;if(u=m.s<0,s){if(s.c?!s.c[0]:!s.s)return new E(NaN);x=!u&&R.isInteger()&&s.isInteger(),x&&(R=R.mod(s))}else{if(m.e>9&&(R.e>0||R.e<-1||(R.e==0?R.c[0]>1||a&&R.c[1]>=24e7:R.c[0]<8e13||a&&R.c[0]<=9999975e7)))return U=R.s<0&&q(m)?-0:0,R.e>-1&&(U=1/U),new E(u?1/U:U);ge&&(U=i(ge/_+2))}for(a?(h=new E(.5),u&&(m.s=1),g=q(m)):(T=Math.abs(+ce(m)),g=T%2),v=new E(he);;){if(g){if(v=v.times(R),!v.c)break;U?v.c.length>U&&(v.c.length=U):x&&(v=v.mod(s))}if(T){if(T=c(T/2),T===0)break;g=T%2}else if(m=m.times(h),ne(m,m.e+1,1),m.e>14)g=q(m);else{if(T=+ce(m),T===0)break;g=T%2}R=R.times(R),U?R.c&&R.c.length>U&&(R.c.length=U):x&&(R=R.mod(s))}return x?v:(u&&(v=he.div(v)),s?v.mod(s):U?ne(v,ge,O,p):v)},X.integerValue=function(m){var s=new E(this);return m==null?m=O:z(m,0,8),ne(s,s.e+1,m)},X.isEqualTo=X.eq=function(m,s){return W(this,new E(m,s))===0},X.isFinite=function(){return!!this.c},X.isGreaterThan=X.gt=function(m,s){return W(this,new E(m,s))>0},X.isGreaterThanOrEqualTo=X.gte=function(m,s){return(s=W(this,new E(m,s)))===1||s===0},X.isInteger=function(){return!!this.c&&$(this.e/_)>this.c.length-2},X.isLessThan=X.lt=function(m,s){return W(this,new E(m,s))<0},X.isLessThanOrEqualTo=X.lte=function(m,s){return(s=W(this,new E(m,s)))===-1||s===0},X.isNaN=function(){return!this.s},X.isNegative=function(){return this.s<0},X.isPositive=function(){return this.s>0},X.isZero=function(){return!!this.c&&this.c[0]==0},X.minus=function(m,s){var h,x,T,U,p=this,a=p.s;if(m=new E(m,s),s=m.s,!a||!s)return new E(NaN);if(a!=s)return m.s=-s,p.plus(m);var u=p.e/_,g=m.e/_,v=p.c,R=m.c;if(!u||!g){if(!v||!R)return v?(m.s=-s,m):new E(R?p:NaN);if(!v[0]||!R[0])return R[0]?(m.s=-s,m):new E(v[0]?p:O==3?-0:0)}if(u=$(u),g=$(g),v=v.slice(),a=u-g){for((U=a<0)?(a=-a,T=v):(g=u,T=R),T.reverse(),s=a;s--;T.push(0));T.reverse()}else for(x=(U=(a=v.length)<(s=R.length))?a:s,a=s=0;s<x;s++)if(v[s]!=R[s]){U=v[s]<R[s];break}if(U&&(T=v,v=R,R=T,m.s=-m.s),s=(x=R.length)-(h=v.length),s>0)for(;s--;v[h++]=0);for(s=w-1;x>a;){if(v[--x]<R[x]){for(h=x;h&&!v[--h];v[h]=s);--v[h],v[x]+=w}v[x]-=R[x]}for(;v[0]==0;v.splice(0,1),--g);return v[0]?pe(m,v,g):(m.s=O==3?-1:1,m.c=[m.e=0],m)},X.modulo=X.mod=function(m,s){var h,x,T=this;return m=new E(m,s),!T.c||!m.s||m.c&&!m.c[0]?new E(NaN):!m.c||T.c&&!T.c[0]?new E(T):(ee==9?(x=m.s,m.s=1,h=G(T,m,0,3),m.s=x,h.s*=x):h=G(T,m,0,ee),m=T.minus(h.times(m)),!m.c[0]&&ee==1&&(m.s=T.s),m)},X.multipliedBy=X.times=function(m,s){var h,x,T,U,p,a,u,g,v,R,H,Y,oe,ye,me,y=this,l=y.c,d=(m=new E(m,s)).c;if(!l||!d||!l[0]||!d[0])return!y.s||!m.s||l&&!l[0]&&!d||d&&!d[0]&&!l?m.c=m.e=m.s=null:(m.s*=y.s,!l||!d?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(x=$(y.e/_)+$(m.e/_),m.s*=y.s,u=l.length,R=d.length,u<R&&(oe=l,l=d,d=oe,T=u,u=R,R=T),T=u+R,oe=[];T--;oe.push(0));for(ye=w,me=S,T=R;--T>=0;){for(h=0,H=d[T]%me,Y=d[T]/me|0,p=u,U=T+p;U>T;)g=l[--p]%me,v=l[p]/me|0,a=Y*g+v*H,g=H*g+a%me*me+oe[U]+h,h=(g/ye|0)+(a/me|0)+Y*v,oe[U--]=g%ye;oe[U]=h}return h?++x:oe.splice(0,1),pe(m,oe,x)},X.negated=function(){var m=new E(this);return m.s=-m.s||null,m},X.plus=function(m,s){var h,x=this,T=x.s;if(m=new E(m,s),s=m.s,!T||!s)return new E(NaN);if(T!=s)return m.s=-s,x.minus(m);var U=x.e/_,p=m.e/_,a=x.c,u=m.c;if(!U||!p){if(!a||!u)return new E(T/0);if(!a[0]||!u[0])return u[0]?m:new E(a[0]?x:T*0)}if(U=$(U),p=$(p),a=a.slice(),T=U-p){for(T>0?(p=U,h=u):(T=-T,h=a),h.reverse();T--;h.push(0));h.reverse()}for(T=a.length,s=u.length,T-s<0&&(h=u,u=a,a=h,s=T),T=0;s;)T=(a[--s]=a[s]+u[s]+T)/w|0,a[s]=w===a[s]?0:a[s]%w;return T&&(a=[T].concat(a),++p),pe(m,a,p)},X.precision=X.sd=function(m,s){var h,x,T,U=this;if(m!=null&&m!==!!m)return z(m,1,N),s==null?s=O:z(s,0,8),ne(new E(U),m,s);if(!(h=U.c))return null;if(T=h.length-1,x=T*_+1,T=h[T]){for(;T%10==0;T/=10,x--);for(T=h[0];T>=10;T/=10,x++);}return m&&U.e+1>x&&(x=U.e+1),x},X.shiftedBy=function(m){return z(m,-9007199254740991,B),this.times("1e"+m)},X.squareRoot=X.sqrt=function(){var m,s,h,x,T,U=this,p=U.c,a=U.s,u=U.e,g=le+4,v=new E("0.5");if(a!==1||!p||!p[0])return new E(!a||a<0&&(!p||p[0])?NaN:p?U:1/0);if(a=Math.sqrt(+ce(U)),a==0||a==1/0?(s=M(p),(s.length+u)%2==0&&(s+="0"),a=Math.sqrt(+s),u=$((u+1)/2)-(u<0||u%2),a==1/0?s="5e"+u:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+u),h=new E(s)):h=new E(a+""),h.c[0]){for(u=h.e,a=u+g,a<3&&(a=0);;)if(T=h,h=v.times(T.plus(G(U,T,g,1))),M(T.c).slice(0,a)===(s=M(h.c)).slice(0,a))if(h.e<u&&--a,s=s.slice(a-3,a+1),s=="9999"||!x&&s=="4999"){if(!x&&(ne(T,T.e+le+2,0),T.times(T).eq(U))){h=T;break}g+=4,a+=4,x=1}else{(!+s||!+s.slice(1)&&s.charAt(0)=="5")&&(ne(h,h.e+le+2,1),m=!h.times(h).eq(U));break}}return ne(h,h.e+le+1,O,m)},X.toExponential=function(m,s){return m!=null&&(z(m,0,N),m++),se(this,m,s,1)},X.toFixed=function(m,s){return m!=null&&(z(m,0,N),m=m+this.e+1),se(this,m,s)},X.toFormat=function(m,s,h){var x,T=this;if(h==null)m!=null&&s&&typeof s=="object"?(h=s,s=null):m&&typeof m=="object"?(h=m,m=s=null):h=ae;else if(typeof h!="object")throw Error(f+"Argument not an object: "+h);if(x=T.toFixed(m,s),T.c){var U,p=x.split("."),a=+h.groupSize,u=+h.secondaryGroupSize,g=h.groupSeparator||"",v=p[0],R=p[1],H=T.s<0,Y=H?v.slice(1):v,oe=Y.length;if(u&&(U=a,a=u,u=U,oe-=U),a>0&&oe>0){for(U=oe%a||a,v=Y.substr(0,U);U<oe;U+=a)v+=g+Y.substr(U,a);u>0&&(v+=g+Y.slice(U)),H&&(v="-"+v)}x=R?v+(h.decimalSeparator||"")+((u=+h.fractionGroupSize)?R.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(h.fractionGroupSeparator||"")):R):v}return(h.prefix||"")+x+(h.suffix||"")},X.toFraction=function(m){var s,h,x,T,U,p,a,u,g,v,R,H,Y=this,oe=Y.c;if(m!=null&&(a=new E(m),!a.isInteger()&&(a.c||a.s!==1)||a.lt(he)))throw Error(f+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+ce(a));if(!oe)return new E(Y);for(s=new E(he),g=h=new E(he),x=u=new E(he),H=M(oe),U=s.e=H.length-Y.e-1,s.c[0]=I[(p=U%_)<0?_+p:p],m=!m||a.comparedTo(s)>0?U>0?s:g:a,p=j,j=1/0,a=new E(H),u.c[0]=0;v=G(a,s,0,1),T=h.plus(v.times(x)),T.comparedTo(m)!=1;)h=x,x=T,g=u.plus(v.times(T=g)),u=T,s=a.minus(v.times(T=s)),a=T;return T=G(m.minus(h),x,0,1),u=u.plus(T.times(g)),h=h.plus(T.times(x)),u.s=g.s=Y.s,U=U*2,R=G(g,x,U,O).minus(Y).abs().comparedTo(G(u,h,U,O).minus(Y).abs())<1?[g,x]:[u,h],j=p,R},X.toNumber=function(){return+ce(this)},X.toPrecision=function(m,s){return m!=null&&z(m,1,N),se(this,m,s,2)},X.toString=function(m){var s,h=this,x=h.s,T=h.e;return T===null?x?(s="Infinity",x<0&&(s="-"+s)):s="NaN":(m==null?s=T<=P||T>=D?ie(M(h.c),T):k(M(h.c),T,"0"):m===10&&re?(h=ne(new E(h),le+T+1,O),s=k(M(h.c),h.e,"0")):(z(m,2,fe.length,"Base"),s=Q(k(M(h.c),T,"0"),10,m,x,!0)),x<0&&h.c[0]&&(s="-"+s)),s},X.valueOf=X.toJSON=function(){return ce(this)},X._isBigNumber=!0,Z!=null&&E.set(Z),E}function $(Z){var G=Z|0;return Z>0||Z===G?G:G-1}function M(Z){for(var G,Q,te=1,X=Z.length,he=Z[0]+"";te<X;){for(G=Z[te++]+"",Q=_-G.length;Q--;G="0"+G);he+=G}for(X=he.length;he.charCodeAt(--X)===48;);return he.slice(0,X+1||1)}function W(Z,G){var Q,te,X=Z.c,he=G.c,le=Z.s,O=G.s,P=Z.e,D=G.e;if(!le||!O)return null;if(Q=X&&!X[0],te=he&&!he[0],Q||te)return Q?te?0:-O:le;if(le!=O)return le;if(Q=le<0,te=P==D,!X||!he)return te?0:!X^Q?1:-1;if(!te)return P>D^Q?1:-1;for(O=(P=X.length)<(D=he.length)?P:D,le=0;le<O;le++)if(X[le]!=he[le])return X[le]>he[le]^Q?1:-1;return P==D?0:P>D^Q?1:-1}function z(Z,G,Q,te){if(Z<G||Z>Q||Z!==c(Z))throw Error(f+(te||"Argument")+(typeof Z=="number"?Z<G||Z>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(Z))}function q(Z){var G=Z.c.length-1;return $(Z.e/_)==G&&Z.c[G]%2!=0}function ie(Z,G){return(Z.length>1?Z.charAt(0)+"."+Z.slice(1):Z)+(G<0?"e":"e+")+G}function k(Z,G,Q){var te,X;if(G<0){for(X=Q+".";++G;X+=Q);Z=X+Z}else if(te=Z.length,++G>te){for(X=Q,G-=te;--G;X+=Q);Z+=X}else G<te&&(Z=Z.slice(0,G)+"."+Z.slice(G));return Z}r=b(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(jr)})(Xo);var Oi=Xo.exports,xl=function(t,r,n){var i=new t.Uint8Array(n),c=r.pushInt,f=r.pushInt32,o=r.pushInt32Neg,w=r.pushInt64,_=r.pushInt64Neg,B=r.pushFloat,I=r.pushFloatSingle,S=r.pushFloatDouble,N=r.pushTrue,b=r.pushFalse,$=r.pushUndefined,M=r.pushNull,W=r.pushInfinity,z=r.pushInfinityNeg,q=r.pushNaN,ie=r.pushNaNNeg,k=r.pushArrayStart,Z=r.pushArrayStartFixed,G=r.pushArrayStartFixed32,Q=r.pushArrayStartFixed64,te=r.pushObjectStart,X=r.pushObjectStartFixed,he=r.pushObjectStartFixed32,le=r.pushObjectStartFixed64,O=r.pushByteString,P=r.pushByteStringStart,D=r.pushUtf8String,V=r.pushUtf8StringStart,j=r.pushSimpleUnassigned,J=r.pushTagStart,ee=r.pushTagStart4,ge=r.pushTagStart8,ae=r.pushTagUnassigned,fe=r.pushBreak,re=t.Math.pow,E=0,se=0,ue=0;function pe(F){for(F=F|0,E=0,se=F;(E|0)<(se|0)&&(ue=Su[i[E]&255](i[E]|0)|0,!((ue|0)>0)););return ue|0}function ne(F){return F=F|0,((E|0)+(F|0)|0)<(se|0)?0:1}function ce(F){return F=F|0,i[F|0]<<8|i[F+1|0]|0}function m(F){return F=F|0,i[F|0]<<24|i[F+1|0]<<16|i[F+2|0]<<8|i[F+3|0]|0}function s(F){return F=F|0,c(F|0),E=E+1|0,0}function h(F){return F=F|0,ne(1)|0?1:(c(i[E+1|0]|0),E=E+2|0,0)}function x(F){return F=F|0,ne(2)|0?1:(c(ce(E+1|0)|0),E=E+3|0,0)}function T(F){return F=F|0,ne(4)|0?1:(f(ce(E+1|0)|0,ce(E+3|0)|0),E=E+5|0,0)}function U(F){return F=F|0,ne(8)|0?1:(w(ce(E+1|0)|0,ce(E+3|0)|0,ce(E+5|0)|0,ce(E+7|0)|0),E=E+9|0,0)}function p(F){return F=F|0,c(-1-(F-32|0)|0),E=E+1|0,0}function a(F){return F=F|0,ne(1)|0?1:(c(-1-(i[E+1|0]|0)|0),E=E+2|0,0)}function u(F){F=F|0;var Se=0;return ne(2)|0?1:(Se=ce(E+1|0)|0,c(-1-(Se|0)|0),E=E+3|0,0)}function g(F){return F=F|0,ne(4)|0?1:(o(ce(E+1|0)|0,ce(E+3|0)|0),E=E+5|0,0)}function v(F){return F=F|0,ne(8)|0?1:(_(ce(E+1|0)|0,ce(E+3|0)|0,ce(E+5|0)|0,ce(E+7|0)|0),E=E+9|0,0)}function R(F){F=F|0;var Se=0,Ie=0,Ae=0;return Ae=F-64|0,ne(Ae|0)|0?1:(Se=E+1|0,Ie=(E+1|0)+(Ae|0)|0,O(Se|0,Ie|0),E=Ie|0,0)}function H(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(1)|0||(Ae=i[E+1|0]|0,Se=E+2|0,Ie=(E+2|0)+(Ae|0)|0,ne(Ae+1|0)|0)?1:(O(Se|0,Ie|0),E=Ie|0,0)}function Y(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(2)|0||(Ae=ce(E+1|0)|0,Se=E+3|0,Ie=(E+3|0)+(Ae|0)|0,ne(Ae+2|0)|0)?1:(O(Se|0,Ie|0),E=Ie|0,0)}function oe(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(4)|0||(Ae=m(E+1|0)|0,Se=E+5|0,Ie=(E+5|0)+(Ae|0)|0,ne(Ae+4|0)|0)?1:(O(Se|0,Ie|0),E=Ie|0,0)}function ye(F){return F=F|0,1}function me(F){return F=F|0,P(),E=E+1|0,0}function y(F){F=F|0;var Se=0,Ie=0,Ae=0;return Ae=F-96|0,ne(Ae|0)|0?1:(Se=E+1|0,Ie=(E+1|0)+(Ae|0)|0,D(Se|0,Ie|0),E=Ie|0,0)}function l(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(1)|0||(Ae=i[E+1|0]|0,Se=E+2|0,Ie=(E+2|0)+(Ae|0)|0,ne(Ae+1|0)|0)?1:(D(Se|0,Ie|0),E=Ie|0,0)}function d(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(2)|0||(Ae=ce(E+1|0)|0,Se=E+3|0,Ie=(E+3|0)+(Ae|0)|0,ne(Ae+2|0)|0)?1:(D(Se|0,Ie|0),E=Ie|0,0)}function A(F){F=F|0;var Se=0,Ie=0,Ae=0;return ne(4)|0||(Ae=m(E+1|0)|0,Se=E+5|0,Ie=(E+5|0)+(Ae|0)|0,ne(Ae+4|0)|0)?1:(D(Se|0,Ie|0),E=Ie|0,0)}function C(F){return F=F|0,1}function K(F){return F=F|0,V(),E=E+1|0,0}function L(F){return F=F|0,Z(F-128|0),E=E+1|0,0}function _e(F){return F=F|0,ne(1)|0?1:(Z(i[E+1|0]|0),E=E+2|0,0)}function ve(F){return F=F|0,ne(2)|0?1:(Z(ce(E+1|0)|0),E=E+3|0,0)}function xe(F){return F=F|0,ne(4)|0?1:(G(ce(E+1|0)|0,ce(E+3|0)|0),E=E+5|0,0)}function Ee(F){return F=F|0,ne(8)|0?1:(Q(ce(E+1|0)|0,ce(E+3|0)|0,ce(E+5|0)|0,ce(E+7|0)|0),E=E+9|0,0)}function Re(F){return F=F|0,k(),E=E+1|0,0}function ke(F){F=F|0;var Se=0;return Se=F-160|0,ne(Se|0)|0?1:(X(Se|0),E=E+1|0,0)}function $i(F){return F=F|0,ne(1)|0?1:(X(i[E+1|0]|0),E=E+2|0,0)}function qi(F){return F=F|0,ne(2)|0?1:(X(ce(E+1|0)|0),E=E+3|0,0)}function Gi(F){return F=F|0,ne(4)|0?1:(he(ce(E+1|0)|0,ce(E+3|0)|0),E=E+5|0,0)}function ji(F){return F=F|0,ne(8)|0?1:(le(ce(E+1|0)|0,ce(E+3|0)|0,ce(E+5|0)|0,ce(E+7|0)|0),E=E+9|0,0)}function Hi(F){return F=F|0,te(),E=E+1|0,0}function zt(F){return F=F|0,J(F-192|0|0),E=E+1|0,0}function Nh(F){return F=F|0,J(F|0),E=E+1|0,0}function Sh(F){return F=F|0,J(F|0),E=E+1|0,0}function Ih(F){return F=F|0,J(F|0),E=E+1|0,0}function Rh(F){return F=F|0,J(F|0),E=E+1|0,0}function Ye(F){return F=F|0,J(F-192|0|0),E=E+1|0,0}function Oh(F){return F=F|0,J(F|0),E=E+1|0,0}function Uh(F){return F=F|0,J(F|0),E=E+1|0,0}function Fh(F){return F=F|0,J(F|0),E=E+1|0,0}function yu(F){return F=F|0,ne(1)|0?1:(J(i[E+1|0]|0),E=E+2|0,0)}function gu(F){return F=F|0,ne(2)|0?1:(J(ce(E+1|0)|0),E=E+3|0,0)}function wu(F){return F=F|0,ne(4)|0?1:(ee(ce(E+1|0)|0,ce(E+3|0)|0),E=E+5|0,0)}function mu(F){return F=F|0,ne(8)|0?1:(ge(ce(E+1|0)|0,ce(E+3|0)|0,ce(E+5|0)|0,ce(E+7|0)|0),E=E+9|0,0)}function Le(F){return F=F|0,j((F|0)-224|0),E=E+1|0,0}function bu(F){return F=F|0,b(),E=E+1|0,0}function _u(F){return F=F|0,N(),E=E+1|0,0}function Eu(F){return F=F|0,M(),E=E+1|0,0}function xu(F){return F=F|0,$(),E=E+1|0,0}function vu(F){return F=F|0,ne(1)|0?1:(j(i[E+1|0]|0),E=E+2|0,0)}function Tu(F){F=F|0;var Se=0,Ie=0,Ae=1,Nn=0,Yr=0,Ph=0;return ne(2)|0?1:(Se=i[E+1|0]|0,Ie=i[E+2|0]|0,(Se|0)&128&&(Ae=-1),Nn=+(((Se|0)&124)>>2),Yr=+(((Se|0)&3)<<8|Ie),+Nn==0?B(+(+Ae*5960464477539063e-23*+Yr)):+Nn==31?+Ae==1?+Yr>0?q():W():+Yr>0?ie():z():B(+(+Ae*re(2,+(+Nn-25))*+(1024+Yr))),E=E+3|0,0)}function Bu(F){return F=F|0,ne(4)|0?1:(I(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0),E=E+5|0,0)}function Au(F){return F=F|0,ne(8)|0?1:(S(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0,i[E+5|0]|0,i[E+6|0]|0,i[E+7|0]|0,i[E+8|0]|0),E=E+9|0,0)}function Fe(F){return F=F|0,1}function Nu(F){return F=F|0,fe(),E=E+1|0,0}var Su=[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,h,x,T,U,Fe,Fe,Fe,Fe,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,a,u,g,v,Fe,Fe,Fe,Fe,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,H,Y,oe,ye,Fe,Fe,Fe,me,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,l,d,A,C,Fe,Fe,Fe,K,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,_e,ve,xe,Ee,Fe,Fe,Fe,Re,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,$i,qi,Gi,ji,Fe,Fe,Fe,Hi,zt,zt,zt,zt,zt,zt,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,yu,gu,wu,mu,Fe,Fe,Fe,Fe,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,bu,_u,Eu,xu,vu,Tu,Bu,Au,Fe,Fe,Fe,Nu];return{parse:pe}},Ui={},st={};const Hs=Oi.BigNumber;st.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};st.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};st.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};st.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};st.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};st.SHIFT32=Math.pow(2,32);st.SHIFT16=Math.pow(2,16);st.MAX_SAFE_HIGH=2097151;st.NEG_ONE=new Hs(-1);st.TEN=new Hs(10);st.TWO=new Hs(2);st.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(e){const{Buffer:t}=vn,r=Oi.BigNumber,n=st,i=n.SHIFT32,c=n.SHIFT16,f=2097151;e.parseHalf=function(_){var B,I,S;return S=_[0]&128?-1:1,B=(_[0]&124)>>2,I=(_[0]&3)<<8|_[1],B?B===31?S*(I?NaN:1/0):S*Math.pow(2,B-25)*(1024+I):S*5960464477539063e-23*I};function o(w){return w<16?"0"+w.toString(16):w.toString(16)}e.arrayBufferToBignumber=function(w){const _=w.byteLength;let B="";for(let I=0;I<_;I++)B+=o(w[I]);return new r(B,16)},e.buildMap=w=>{const _=new Map,B=Object.keys(w),I=B.length;for(let S=0;S<I;S++)_.set(B[S],w[B[S]]);return _},e.buildInt32=(w,_)=>w*c+_,e.buildInt64=(w,_,B,I)=>{const S=e.buildInt32(w,_),N=e.buildInt32(B,I);return S>f?new r(S).times(i).plus(N):S*i+N},e.writeHalf=function(_,B){const I=t.allocUnsafe(4);I.writeFloatBE(B,0);const S=I.readUInt32BE(0);if(S&8191)return!1;var N=S>>16&32768;const b=S>>23&255,$=S&8388607;if(b>=113&&b<=142)N+=(b-112<<10)+($>>13);else if(b>=103&&b<113){if($&(1<<126-b)-1)return!1;N+=$+8388608>>126-b}else return!1;return _.writeUInt16BE(N,0),!0},e.keySorter=function(w,_){var B=w[0].byteLength,I=_[0].byteLength;return B>I?1:I>B?-1:w[0].compare(_[0])},e.isNegativeZero=w=>w===0&&1/w<0,e.nextPowerOf2=w=>{let _=0;if(w&&!(w&w-1))return w;for(;w!==0;)w>>=1,_+=1;return 1<<_}})(Ui);const Ls=st,vl=Ls.MT,Sn=Ls.SIMPLE,Di=Ls.SYMS;let Tl=class ms{constructor(t){if(typeof t!="number")throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(t|0)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,vl.SIMPLE_FLOAT)}static isSimple(t){return t instanceof ms}static decode(t,r){switch(r==null&&(r=!0),t){case Sn.FALSE:return!1;case Sn.TRUE:return!0;case Sn.NULL:return r?null:Di.NULL;case Sn.UNDEFINED:return r?void 0:Di.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Di.BREAK;default:return new ms(t)}}};var Jo=Tl;let Bl=class bs{constructor(t,r,n){if(this.tag=t,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var r,n;if(n=t?.[this.tag],typeof n!="function"&&(n=bs["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(bs,this.value)}catch(i){return r=i,this.err=r,this}}};var Qo=Bl;const ec=self.location?self.location.protocol+"//"+self.location.host:"",_s=self.URL;let Al=class{constructor(t="",r=ec){this.super=new _s(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Nl(e){if(typeof e=="string")return new _s(e).toString();if(!(e instanceof _s)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",c=e.host||"",f=e.hostname||"",o=e.search||(e.query?"?"+e.query:""),w=e.hash||"",_=e.pathname||"",B=e.path||_+o;return`${i}${t||r}${c||f+n}${B}${w}`}}var tc={URLWithLegacySupport:Al,URLSearchParams:self.URLSearchParams,defaultBase:ec,format:Nl};const{URLWithLegacySupport:jh,format:Hh}=tc,{URLWithLegacySupport:Sl,format:Lh,URLSearchParams:Kh,defaultBase:zh}=tc;var rc={URL:Sl};const{Buffer:Sr}=vn,ua=_n,Il=Oi.BigNumber,Rl=xl,at=Ui,Ue=st,Ol=Jo,Ul=Qo,{URL:Fl}=rc;let Es=class xs{constructor(t){t=t||{},!t.size||t.size<65536?t.size=65536:t.size=at.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=Sr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>at.arrayBufferToBignumber(r),3:r=>Ue.NEG_ONE.minus(at.arrayBufferToBignumber(r)),4:r=>Ue.TEN.pow(r[0]).times(r[1]),5:r=>Ue.TWO.pow(r[0]).times(r[1]),32:r=>new Fl(r),35:r=>new RegExp(r)},t.tags),this.parser=Rl(jr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case Ue.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case Ue.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case Ue.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case Ue.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case Ue.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case Ue.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length));break}this._currentParent&&this._currentParent.type===Ue.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,t.length===0&&this._closeParent())}_push(t,r){const n=this._currentParent;switch(n.values++,n.type){case Ue.PARENT.ARRAY:case Ue.PARENT.BYTE_STRING:case Ue.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=t:this._ref.push(t),this._dec();break;case Ue.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=t,n.tmpKey=null,this._dec()):(n.tmpKey=t,typeof n.tmpKey!="string"&&(n.type=Ue.PARENT.MAP,n.ref=at.buildMap(n.ref)));break;case Ue.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,t),n.tmpKey=null,this._dec()):n.tmpKey=t;break;case Ue.PARENT.TAG:this._ref.push(t),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,r,n){this._parents[this._depth]={type:r,length:n,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ue.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,r){const n=this._knownTags[t];return n?n(r):new Ul(t,r)}createMap(t,r){return t}createObject(t,r){return t}createArray(t,r){return t}createByteString(t,r){return Sr.concat(t)}createByteStringFromHeap(t,r){return t===r?Sr.alloc(0):Sr.from(this._heap.slice(t,r))}createInt(t){return t}createInt32(t,r){return at.buildInt32(t,r)}createInt64(t,r,n,i){return at.buildInt64(t,r,n,i)}createFloat(t){return t}createFloatSingle(t,r,n,i){return ua.read([t,r,n,i],0,!1,23,4)}createFloatDouble(t,r,n,i,c,f,o,w){return ua.read([t,r,n,i,c,f,o,w],0,!1,52,8)}createInt32Neg(t,r){return-1-at.buildInt32(t,r)}createInt64Neg(t,r,n,i){const c=at.buildInt32(t,r),f=at.buildInt32(n,i);return c>Ue.MAX_SAFE_HIGH?Ue.NEG_ONE.minus(new Il(c).times(Ue.SHIFT32).plus(f)):-1-(c*Ue.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,r){return t.join("")}createUtf8StringFromHeap(t,r){return t===r?"":this._buffer.toString("utf8",t,r)}createSimpleUnassigned(t){return new Ol(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,r){this._push(this.createInt32(t,r))}pushInt64(t,r,n,i){this._push(this.createInt64(t,r,n,i))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,r,n,i){this._push(this.createFloatSingle(t,r,n,i))}pushFloatDouble(t,r,n,i,c,f,o,w){this._push(this.createFloatDouble(t,r,n,i,c,f,o,w))}pushInt32Neg(t,r){this._push(this.createInt32Neg(t,r))}pushInt64Neg(t,r,n,i){this._push(this.createInt64Neg(t,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ue.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,r){const n=at.buildInt32(t,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(t,r,n,i){const c=at.buildInt64(t,r,n,i);this._createArrayStartFixed(c)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,r){const n=at.buildInt32(t,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(t,r,n,i){const c=at.buildInt64(t,r,n,i);this._createObjectStartFixed(c)}pushByteStringStart(){this._parents[this._depth]={type:Ue.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,r){this._push(this.createByteStringFromHeap(t,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Ue.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,r){this._push(this.createUtf8StringFromHeap(t,r))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:Ue.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,r){this.pushTagStart(at.buildInt32(t,r))}pushTagStart8(t,r,n,i){this.pushTagStart(at.buildInt64(t,r,n,i))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){if(t===0){this._push(this.createObject({}));return}this._createParent({},Ue.PARENT.OBJECT,t)}_createArrayStartFixed(t){if(t===0){this._push(this.createArray([]));return}this._createParent(new Array(t),Ue.PARENT.ARRAY,t)}_decode(t){if(t.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(t);const r=this.parser.parse(t.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,r){return typeof t=="string"&&(t=Sr.from(t,r||"hex")),new xs({size:t.length}).decodeFirst(t)}static decodeAll(t,r){return typeof t=="string"&&(t=Sr.from(t,r||"hex")),new xs({size:t.length}).decodeAll(t)}};Es.decodeFirst=Es.decode;var nc=Es;const{Buffer:Wi}=vn,Pl=nc,kl=Ui;class Ks extends Pl{createTag(t,r){return`${t}(${r})`}createInt(t){return super.createInt(t).toString()}createInt32(t,r){return super.createInt32(t,r).toString()}createInt64(t,r,n,i){return super.createInt64(t,r,n,i).toString()}createInt32Neg(t,r){return super.createInt32Neg(t,r).toString()}createInt64Neg(t,r,n,i){return super.createInt64Neg(t,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const r=super.createFloat(t);return kl.isNegativeZero(t)?"-0_1":`${r}_1`}createFloatSingle(t,r,n,i){return`${super.createFloatSingle(t,r,n,i)}_2`}createFloatDouble(t,r,n,i,c,f,o,w){return`${super.createFloatDouble(t,r,n,i,c,f,o,w)}_3`}createByteString(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(t,r){return`h'${Wi.from(super.createByteStringFromHeap(t,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,r){const n=super.createArray(t,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(t,r){const n=super.createMap(t),i=Array.from(n.keys()).reduce(la(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(t,r){const n=super.createObject(t),i=Object.keys(n).reduce(la(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(t,r){return`"${Wi.from(super.createUtf8StringFromHeap(t,r)).toString("utf8")}"`}static diagnose(t,r){return typeof t=="string"&&(t=Wi.from(t,r||"hex")),new Ks().decodeFirst(t)}}var Cl=Ks;function la(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:Ft}=vn,{URL:Ml}=rc,vs=Oi.BigNumber,Yi=Ui,We=st,bt=We.MT,In=We.NUMBYTES,fa=We.SHIFT32,da=We.SYMS,Ir=We.TAG,Vl=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.TWO,$l=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.FOUR,ql=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.EIGHT,Gl=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.TRUE,jl=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.FALSE,Hl=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.UNDEFINED,ha=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.NULL,Ll=new vs("0x20000000000000"),Kl=Ft.from("f97e00","hex"),zl=Ft.from("f9fc00","hex"),Dl=Ft.from("f97c00","hex");function Wl(e){return{}.toString.call(e).slice(8,-1)}class pi{constructor(t){t=t||{},this.streaming=typeof t.stream=="function",this.onData=t.stream,this.semanticTypes=[[Ml,this._pushUrl],[vs,this._pushBigNumber]];const r=t.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(t,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===t){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([t,r]),null}push(t){return t&&(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(t,r,n){return this.result[this.offset]=t,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(Kl)}_pushInfinity(t){const r=t<0?zl:Dl;return this.push(r)}_pushFloat(t){const r=Ft.allocUnsafe(2);if(Yi.writeHalf(r,t)&&Yi.parseHalf(r)===t)return this._pushUInt8(Vl)&&this.push(r);const n=Ft.allocUnsafe(4);return n.writeFloatBE(t,0),n.readFloatBE(0)===t?this._pushUInt8($l)&&this.push(n):this._pushUInt8(ql)&&this._pushDoubleBE(t)}_pushInt(t,r,n){const i=r<<5;return t<24?this._pushUInt8(i|t):t<=255?this._pushUInt8(i|In.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(i|In.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(i|In.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|In.EIGHT)&&this._pushUInt32BE(Math.floor(t/fa))&&this._pushUInt32BE(t%fa):r===bt.NEG_INT?this._pushFloat(n):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,bt.NEG_INT,t):this._pushInt(t,bt.POS_INT)}_pushNumber(t){switch(!1){case t===t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!==0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const r=Ft.byteLength(t,"utf8");return this._pushInt(r,bt.UTF8_STRING)&&this.pushWrite(t,5,r)}_pushBoolean(t){return this._pushUInt8(t?Gl:jl)}_pushUndefined(t){return this._pushUInt8(Hl)}_pushArray(t,r){const n=r.length;if(!t._pushInt(n,bt.ARRAY))return!1;for(let i=0;i<n;i++)if(!t.pushAny(r[i]))return!1;return!0}_pushTag(t){return this._pushInt(t,bt.TAG)}_pushDate(t,r){return t._pushTag(Ir.DATE_EPOCH)&&t.pushAny(Math.round(r/1e3))}_pushBuffer(t,r){return t._pushInt(r.length,bt.BYTE_STRING)&&t.push(r)}_pushNoFilter(t,r){return t._pushBuffer(t,r.slice())}_pushRegexp(t,r){return t._pushTag(Ir.REGEXP)&&t.pushAny(r.source)}_pushSet(t,r){if(!t._pushInt(r.size,bt.ARRAY))return!1;for(const n of r)if(!t.pushAny(n))return!1;return!0}_pushUrl(t,r){return t._pushTag(Ir.URI)&&t.pushAny(r.format())}_pushBigint(t){let r=Ir.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),r=Ir.NEG_BIGINT);let n=t.toString(16);n.length%2&&(n="0"+n);const i=Ft.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(t,r){if(r.isNaN())return t._pushNaN();if(!r.isFinite())return t._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return t._pushBigint(r);if(!(t._pushTag(Ir.DECIMAL_FRAC)&&t._pushInt(2,bt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new vs(10).pow(n));return t._pushIntNum(-n)?i.abs().isLessThan(Ll)?t._pushIntNum(i.toNumber()):t._pushBigint(i):!1}_pushMap(t,r){return t._pushInt(r.size,bt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(t){if(!t)return this._pushUInt8(ha);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(t instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(t,this,t);var i=t.encodeCBOR;if(typeof i=="function")return i.call(t,this);var c=Object.keys(t),f=c.length;return this._pushInt(f,bt.MAP)?this._pushRawMap(f,c.map(o=>[o,t[o]])):!1}_pushRawMap(t,r){r=r.map(function(i){return i[0]=pi.encode(i[0]),i}).sort(Yi.keySorter);for(var n=0;n<t;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(t){return this.pushAny(t)}pushAny(t){var r=Wl(t);switch(r){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,Ft.isBuffer(t)?t:Ft.from(t));case"Null":return this._pushUInt8(ha);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case da.NULL:return this._pushObject(null);case da.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(this.offset===0)return null;for(var t=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,c=0,f=0;f<i;f++)c+=r[f];var o=Ft.allocUnsafe(c),w=0,_=0;for(f=0;f<i;f++){switch(_=r[f],n[f]){case 0:t[f].copy(o,w);break;case 1:o.writeUInt8(t[f],w,!0);break;case 2:o.writeUInt16BE(t[f],w,!0);break;case 3:o.writeUInt32BE(t[f],w,!0);break;case 4:o.writeDoubleBE(t[f],w,!0);break;case 5:o.write(t[f],w,_,"utf8");break;default:throw new Error("unkown method")}w+=_}var B=o;return this._reset(),B}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const r=new pi;if(!r.pushAny(t))throw new Error("Failed to encode input");return r.finalize()}}var Yl=pi;(function(e){e.Diagnose=Cl,e.Decoder=nc,e.Encoder=Yl,e.Simple=Jo,e.Tagged=Qo,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}})(Zo);const ic=Iu(Zo);function Bt(e){return an(Vs.create().update(new Uint8Array(e)).digest())}function jn(e){if(e instanceof ic.Tagged)return jn(e.value);if(typeof e=="string")return sc(e);if(typeof e=="number")return Bt(Ge(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return Bt(e);if(Array.isArray(e)){const t=e.map(jn);return Bt(At(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return Bt(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return jn(e.toHash());if(typeof e=="object")return yi(e);if(typeof e=="bigint")return Bt(Ge(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const sc=e=>{const t=new TextEncoder().encode(e);return Bt(t)};function dn(e){return yi(e)}function yi(e){const n=Object.entries(e).filter(([,f])=>f!==void 0).map(([f,o])=>{const w=sc(f),_=jn(o);return[w,_]}).sort(([f],[o])=>uo(f,o)),i=At(...n.map(f=>At(...f)));return Bt(i)}var Zl=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Xl=new TextEncoder().encode(`
ic-request`);class zs{getPrincipal(){return this._principal||(this._principal=Te.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,n=Zl(t,["body"]),i=dn(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(At(Xl,i))}})}}class hn{getPrincipal(){return Te.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var dt={},Wr={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});const Jl=9007199254740992;function Kt(e,...t){const r=new Uint8Array(e.byteLength+t.reduce((i,c)=>i+c.byteLength,0));r.set(new Uint8Array(e),0);let n=e.byteLength;for(const i of t)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function Nt(e,t,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(t-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(e<<5)+t].concat(r.match(/../g).map(c=>parseInt(c,16)));return new Uint8Array(i).buffer}function Fi(e,t){if(t<24)return new Uint8Array([(e<<5)+t]).buffer;{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27;return Nt(e,r,t.toString(16))}}function ac(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|n&63):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|e.charCodeAt(r)&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Kt(new Uint8Array(Fi(3,e.length)),new Uint8Array(t))}function Ql(e,t){if(e==14277111)return Kt(new Uint8Array([217,217,247]),t);if(e<24)return Kt(new Uint8Array([192+e]),t);{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27,n=2**(r-24),i=e.toString(16).slice(-n*2).padStart(n*2,"0"),c=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(c).buffer}}Pe.tagged=Ql;function Tn(e){return new Uint8Array(e).buffer}Pe.raw=Tn;function Ds(e){if(isNaN(e))throw new RangeError("Invalid number.");e=Math.min(Math.max(0,e),23);const t=[0+e];return new Uint8Array(t).buffer}Pe.uSmall=Ds;function oc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),255),e=e.toString(16),Nt(0,24,e)}Pe.u8=oc;function cc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),65535),e=e.toString(16),Nt(0,25,e)}Pe.u16=cc;function uc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),4294967295),e=e.toString(16),Nt(0,26,e)}Pe.u32=uc;function Ws(e,t){if(typeof e=="string"&&t==16){if(e.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Nt(0,27,e)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),Jl),e=e.toString(16),Nt(0,27,e)}Pe.u64=Ws;function lc(e){if(isNaN(e))throw new RangeError("Invalid number.");if(e===0)return Ds(0);e=Math.min(Math.max(0,-e),24)-1;const t=[32+e];return new Uint8Array(t).buffer}Pe.iSmall=lc;function fc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),255),e=e.toString(16),Nt(1,24,e)}Pe.i8=fc;function dc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),65535),e=e.toString(16),Nt(1,25,e)}Pe.i16=dc;function hc(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),4294967295),e=e.toString(16),Nt(1,26,e)}Pe.i32=hc;function pc(e,t){if(typeof e=="string"&&t==16){if(e.startsWith("-")?e=e.slice(1):e="0",e.match(/[^0-9a-fA-F]/)||e.length>16)throw new RangeError("Invalid number.");let r=!1,n=e.split("").reduceRight((i,c)=>{if(r)return c+i;let f=parseInt(c,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?Nt(1,27,n):Ws(0)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),9007199254740992),e=e.toString(16),Nt(1,27,e)}Pe.i64=pc;function ef(e){return e>=0?e<24?Ds(e):e<=255?oc(e):e<=65535?cc(e):e<=4294967295?uc(e):Ws(e):e>=-24?lc(e):e>=-255?fc(e):e>=-65535?dc(e):e>=-4294967295?hc(e):pc(e)}Pe.number=ef;function tf(e){return Kt(Fi(2,e.byteLength),e)}Pe.bytes=tf;function rf(e){return ac(e)}Pe.string=rf;function nf(e){return Kt(Fi(4,e.length),...e)}Pe.array=nf;function sf(e,t=!1){e instanceof Map||(e=new Map(Object.entries(e)));let r=Array.from(e.entries());return t&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Kt(Fi(5,e.size),...r.map(([n,i])=>Kt(ac(n),i)))}Pe.map=sf;function af(e){const t=new Float32Array([e]);return Kt(new Uint8Array([250]),new Uint8Array(t.buffer))}Pe.singleFloat=af;function of(e){const t=new Float64Array([e]);return Kt(new Uint8Array([251]),new Uint8Array(t.buffer))}Pe.doubleFloat=of;function cf(e){return e?yc():gc()}Pe.bool=cf;function yc(){return Tn(new Uint8Array([245]))}Pe.true_=yc;function gc(){return Tn(new Uint8Array([244]))}Pe.false_=gc;function uf(){return Tn(new Uint8Array([246]))}Pe.null_=uf;function lf(){return Tn(new Uint8Array([247]))}Pe.undefined_=lf;var ff=jr&&jr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Wr,"__esModule",{value:!0});const Et=ff(Pe),df=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class wc{constructor(t,r=!1){this._serializer=t,this._stable=r,this.name="jsonDefault",this.priority=-100}match(t){return["undefined","boolean","number","string","object"].indexOf(typeof t)!=-1}encode(t){switch(typeof t){case"undefined":return Et.undefined_();case"boolean":return Et.bool(t);case"number":return Math.floor(t)===t?Et.number(t):Et.doubleFloat(t);case"string":return Et.string(t);case"object":if(t===null)return Et.null_();if(Array.isArray(t))return Et.array(t.map(r=>this._serializer.serializeValue(r)));if(df.find(r=>t instanceof r))return Et.bytes(t.buffer);if(Object.getOwnPropertyNames(t).indexOf("toJSON")!==-1)return this.encode(t.toJSON());if(t instanceof Map){const r=new Map;for(const[n,i]of t.entries())r.set(n,this._serializer.serializeValue(i));return Et.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(t))r.set(n,this._serializer.serializeValue(i));return Et.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Wr.JsonDefaultCborEncoder=wc;class mc{constructor(){this.name="cborEncoder",this.priority=-90}match(t){return typeof t=="object"&&typeof t.toCBOR=="function"}encode(t){return t.toCBOR()}}Wr.ToCborEncoder=mc;class bc{constructor(){this._encoders=new Set}static withDefaultEncoders(t=!1){const r=new this;return r.addEncoder(new wc(r,t)),r.addEncoder(new mc),r}removeEncoder(t){for(const r of this._encoders.values())r.name==t&&this._encoders.delete(r)}addEncoder(t){this._encoders.add(t)}getEncoderFor(t){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(t)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(t){return this.getEncoderFor(t).encode(t)}serialize(t){return this.serializeValue(t)}}Wr.CborSerializer=bc;class hf extends bc{serialize(t){return Et.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(t))]))}}Wr.SelfDescribeCborSerializer=hf;(function(e){function t(i){for(var c in i)e.hasOwnProperty(c)||(e[c]=i[c])}var r=jr&&jr.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(c[f]=i[f]);return c.default=i,c};Object.defineProperty(e,"__esModule",{value:!0}),t(Wr);const n=r(Pe);e.value=n})(dt);class pf{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return dt.value.bytes(t.toUint8Array())}}class yf{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return dt.value.bytes(new Uint8Array(t))}}class gf{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?dt.value.tagged(2,dt.value.bytes(Lt(t.toString(16)))):dt.value.tagged(3,dt.value.bytes(Lt((BigInt("-1")*t).toString(16))))}}const Pi=dt.SelfDescribeCborSerializer.withDefaultEncoders(!0);Pi.addEncoder(new pf);Pi.addEncoder(new yf);Pi.addEncoder(new gf);var Ts;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(Ts||(Ts={}));function Zi(e){return Pi.serialize(e)}function pa(e){const t=e.byteLength;let r=BigInt(0);for(let n=0;n<t;n++)r=r*BigInt(256)+BigInt(e[n]);return r}class wf extends ic.Decoder{createByteString(t){return At(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}function jt(e){const t=new Uint8Array(e),r=new wf({size:t.byteLength,tags:{2:n=>pa(n),3:n=>-pa(n),[Ts.Semantic]:n=>n}});try{return r.decodeFirst(t)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Ce(t)}`)}}const Rn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Bs;(function(e){e.Call="call"})(Bs||(Bs={}));function As(){const e=new ArrayBuffer(16),t=new DataView(e),r=Rn(),n=Rn(),i=Rn(),c=Rn();return t.setUint32(0,r),t.setUint32(4,n),t.setUint32(8,i),t.setUint32(12,c),e}const ya=BigInt(1e6),mf=60*1e3;class On{constructor(t){if(t<90*1e3){const o=BigInt(Date.now()+t)*ya/BigInt(1e9);this._value=o*BigInt(1e9);return}const c=BigInt(Math.floor(Date.now()+t-mf))*ya/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=c}toCBOR(){return dt.value.u64(this._value.toString(16),16)}toHash(){return Ge(this._value)}}function ga(e=As){return async t=>{const r=t.request.headers;t.request.headers=r,t.endpoint==="call"&&(t.body.nonce=e())}}function Qr(e){const t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}class Xi extends qe{constructor(t,r){super(t),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class bf extends qe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class _f extends qe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class Ef extends qe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ys=BigInt(0),Zs=BigInt(1),xf=BigInt(2);function ki(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function lr(e){if(!ki(e))throw new Error("Uint8Array expected")}function on(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const vf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Br(e){lr(e);let t="";for(let r=0;r<e.length;r++)t+=vf[e[r]];return t}function _c(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Ys:BigInt("0x"+e)}const Mt={_0:48,_9:57,A:65,F:70,a:97,f:102};function wa(e){if(e>=Mt._0&&e<=Mt._9)return e-Mt._0;if(e>=Mt.A&&e<=Mt.F)return e-(Mt.A-10);if(e>=Mt.a&&e<=Mt.f)return e-(Mt.a-10)}function Ec(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,c=0;i<r;i++,c+=2){const f=wa(e.charCodeAt(c)),o=wa(e.charCodeAt(c+1));if(f===void 0||o===void 0){const w=e[c]+e[c+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+c)}n[i]=f*16+o}return n}function Tt(e){return _c(Br(e))}function cn(e){return lr(e),_c(Br(Uint8Array.from(e).reverse()))}function tt(e,t){return Ec(e.toString(16).padStart(t*2,"0"))}function gi(e,t){return tt(e,t).reverse()}function ut(e,t,r){let n;if(typeof t=="string")try{n=Ec(t)}catch(c){throw new Error(e+" must be hex string or Uint8Array, cause: "+c)}else if(ki(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Ke(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];lr(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const c=e[n];r.set(c,i),i+=c.length}return r}function Xs(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Ji=e=>typeof e=="bigint"&&Ys<=e;function xc(e,t,r){return Ji(e)&&Ji(t)&&Ji(r)&&t<=e&&e<r}function ir(e,t,r,n){if(!xc(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function un(e){let t;for(t=0;e>Ys;e>>=Zs,t+=1);return t}function Tf(e,t){return e>>BigInt(t)&Zs}const Hn=e=>(xf<<BigInt(e-1))-Zs,Bf={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ki(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Bn(e,t,r={}){const n=(i,c,f)=>{const o=Bf[c];if(typeof o!="function")throw new Error("invalid validator function");const w=e[i];if(!(f&&w===void 0)&&!o(w,e))throw new Error("param "+String(i)+" is invalid. Expected "+c+", got "+w)};for(const[i,c]of Object.entries(t))n(i,c,!1);for(const[i,c]of Object.entries(r))n(i,c,!0);return e}const ma=()=>{throw new Error("not implemented")};function pn(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const c=e(r,...n);return t.set(r,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qe=BigInt(0),Me=BigInt(1),sr=BigInt(2),Af=BigInt(3),Ns=BigInt(4),ba=BigInt(5),_a=BigInt(8);function $e(e,t){const r=e%t;return r>=Qe?r:t+r}function Nf(e,t,r){if(t<Qe)throw new Error("invalid exponent, negatives unsupported");if(r<=Qe)throw new Error("invalid modulus");if(r===Me)return Qe;let n=Me;for(;t>Qe;)t&Me&&(n=n*e%r),e=e*e%r,t>>=Me;return n}function It(e,t,r){let n=e;for(;t-- >Qe;)n*=n,n%=r;return n}function Ea(e,t){if(e===Qe)throw new Error("invert: expected non-zero number");if(t<=Qe)throw new Error("invert: expected positive modulus, got "+t);let r=$e(e,t),n=t,i=Qe,c=Me;for(;r!==Qe;){const o=n/r,w=n%r,_=i-c*o;n=r,r=w,i=c,c=_}if(n!==Me)throw new Error("invert: does not exist");return $e(i,t)}function Sf(e){const t=(e-Me)/sr;let r,n,i;for(r=e-Me,n=0;r%sr===Qe;r/=sr,n++);for(i=sr;i<e&&Nf(i,t,e)!==e-Me;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const f=(e+Me)/Ns;return function(w,_){const B=w.pow(_,f);if(!w.eql(w.sqr(B),_))throw new Error("Cannot find square root");return B}}const c=(r+Me)/sr;return function(o,w){if(o.pow(w,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let _=n,B=o.pow(o.mul(o.ONE,i),r),I=o.pow(w,c),S=o.pow(w,r);for(;!o.eql(S,o.ONE);){if(o.eql(S,o.ZERO))return o.ZERO;let N=1;for(let $=o.sqr(S);N<_&&!o.eql($,o.ONE);N++)$=o.sqr($);const b=o.pow(B,Me<<BigInt(_-N-1));B=o.sqr(b),I=o.mul(I,b),S=o.mul(S,B),_=N}return I}}function If(e){if(e%Ns===Af){const t=(e+Me)/Ns;return function(n,i){const c=n.pow(i,t);if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}if(e%_a===ba){const t=(e-ba)/_a;return function(n,i){const c=n.mul(i,sr),f=n.pow(c,t),o=n.mul(i,f),w=n.mul(n.mul(o,sr),f),_=n.mul(o,n.sub(w,n.ONE));if(!n.eql(n.sqr(_),i))throw new Error("Cannot find square root");return _}}return Sf(e)}const Rf=(e,t)=>($e(e,t)&Me)===Me,Of=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vc(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Of.reduce((n,i)=>(n[i]="function",n),t);return Bn(e,r)}function Ln(e,t,r){if(r<Qe)throw new Error("invalid exponent, negatives unsupported");if(r===Qe)return e.ONE;if(r===Me)return t;let n=e.ONE,i=t;for(;r>Qe;)r&Me&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Me;return n}function Kn(e,t){const r=new Array(t.length),n=t.reduce((c,f,o)=>e.is0(f)?c:(r[o]=c,e.mul(c,f)),e.ONE),i=e.inv(n);return t.reduceRight((c,f,o)=>e.is0(f)?c:(r[o]=e.mul(c,r[o]),e.mul(c,f)),i),r}function Uf(e){const t=(e-Me)/sr;return(r,n)=>r.pow(n,t)}function Tc(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function An(e,t,r=!1,n={}){if(e<=Qe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:c}=Tc(e,t);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const o=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:c,MASK:Hn(i),ZERO:Qe,ONE:Me,create:w=>$e(w,e),isValid:w=>{if(typeof w!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof w);return Qe<=w&&w<e},is0:w=>w===Qe,isOdd:w=>(w&Me)===Me,neg:w=>$e(-w,e),eql:(w,_)=>w===_,sqr:w=>$e(w*w,e),add:(w,_)=>$e(w+_,e),sub:(w,_)=>$e(w-_,e),mul:(w,_)=>$e(w*_,e),pow:(w,_)=>Ln(o,w,_),div:(w,_)=>$e(w*Ea(_,e),e),sqrN:w=>w*w,addN:(w,_)=>w+_,subN:(w,_)=>w-_,mulN:(w,_)=>w*_,inv:w=>Ea(w,e),sqrt:n.sqrt||(w=>(f||(f=If(e)),f(o,w))),invertBatch:w=>Kn(o,w),cmov:(w,_,B)=>B?_:w,toBytes:w=>r?gi(w,c):tt(w,c),fromBytes:w=>{if(w.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+w.length);return r?cn(w):Tt(w)}});return Object.freeze(o)}function Bc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ac(e){const t=Bc(e);return t+Math.ceil(t/2)}function Ff(e,t,r=!1){const n=e.length,i=Bc(t),c=Ac(t);if(n<16||n<c||n>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+n);const f=r?cn(e):Tt(e),o=$e(f,t-Me)+Me;return r?gi(o,i):tt(o,i)}const Pf=Tt;function er(e,t){if(yn(e),yn(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function kf(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function yn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Cf(e,t,r,n){lr(e),lr(t),yn(r),t.length>255&&(t=n(Ke(Xs("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:c}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=Ke(t,er(t.length,1)),w=er(0,c),_=er(r,2),B=new Array(f),I=n(Ke(w,e,_,er(0,1),o));B[0]=n(Ke(I,er(1,1),o));for(let N=1;N<=f;N++){const b=[kf(I,B[N-1]),er(N+1,1),o];B[N]=n(Ke(...b))}return Ke(...B).slice(0,r)}function Mf(e,t,r,n,i){if(lr(e),lr(t),yn(r),t.length>255){const c=Math.ceil(2*n/8);t=i.create({dkLen:c}).update(Xs("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(er(r,2)).update(t).update(er(t.length,1)).digest()}function xa(e,t,r){Bn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:c,hash:f,expand:o,DST:w}=r;lr(e),yn(t);const _=typeof w=="string"?Xs(w):w,B=n.toString(2).length,I=Math.ceil((B+i)/8),S=t*c*I;let N;if(o==="xmd")N=Cf(e,_,S,f);else if(o==="xof")N=Mf(e,_,S,i,f);else if(o==="_internal_pass")N=e;else throw new Error('expand must be "xmd" or "xof"');const b=new Array(t);for(let $=0;$<t;$++){const M=new Array(c);for(let W=0;W<c;W++){const z=I*(W+$*c),q=N.subarray(z,z+I);M[W]=$e(Pf(q),n)}b[$]=M}return b}function Nc(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,i)=>{const[c,f,o,w]=r.map(_=>_.reduce((B,I)=>e.add(e.mul(B,n),I)));return n=e.div(c,f),i=e.mul(i,e.div(o,w)),{x:n,y:i}}}function va(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const c=xa(n,2,{...r,DST:r.DST,...i}),f=e.fromAffine(t(c[0])),o=e.fromAffine(t(c[1])),w=f.add(o).clearCofactor();return w.assertValidity(),w},encodeToCurve(n,i){const c=xa(n,1,{...r,DST:r.encodeDST,...i}),f=e.fromAffine(t(c[0])).clearCofactor();return f.assertValidity(),f},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const c of n)if(typeof c!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=e.fromAffine(t(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ta=BigInt(0),Un=BigInt(1);function Qi(e,t){const r=t.negate();return e?r:t}function Sc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function es(e,t){Sc(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function Vf(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function $f(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const ts=new WeakMap,Ic=new WeakMap;function rs(e){return Ic.get(e)||1}function Rc(e,t){return{constTimeNegate:Qi,hasPrecomputes(r){return rs(r)!==1},unsafeLadder(r,n,i=e.ZERO){let c=r;for(;n>Ta;)n&Un&&(i=i.add(c)),c=c.double(),n>>=Un;return i},precomputeWindow(r,n){const{windows:i,windowSize:c}=es(n,t),f=[];let o=r,w=o;for(let _=0;_<i;_++){w=o,f.push(w);for(let B=1;B<c;B++)w=w.add(o),f.push(w);o=w.double()}return f},wNAF(r,n,i){const{windows:c,windowSize:f}=es(r,t);let o=e.ZERO,w=e.BASE;const _=BigInt(2**r-1),B=2**r,I=BigInt(r);for(let S=0;S<c;S++){const N=S*f;let b=Number(i&_);i>>=I,b>f&&(b-=B,i+=Un);const $=N,M=N+Math.abs(b)-1,W=S%2!==0,z=b<0;b===0?w=w.add(Qi(W,n[$])):o=o.add(Qi(z,n[M]))}return{p:o,f:w}},wNAFUnsafe(r,n,i,c=e.ZERO){const{windows:f,windowSize:o}=es(r,t),w=BigInt(2**r-1),_=2**r,B=BigInt(r);for(let I=0;I<f;I++){const S=I*o;if(i===Ta)break;let N=Number(i&w);if(i>>=B,N>o&&(N-=_,i+=Un),N===0)continue;let b=n[S+Math.abs(N)-1];N<0&&(b=b.negate()),c=c.add(b)}return c},getPrecomputes(r,n,i){let c=ts.get(n);return c||(c=this.precomputeWindow(n,r),r!==1&&ts.set(n,i(c))),c},wNAFCached(r,n,i){const c=rs(r);return this.wNAF(c,this.getPrecomputes(c,r,i),n)},wNAFCachedUnsafe(r,n,i,c){const f=rs(r);return f===1?this.unsafeLadder(r,n,c):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,c)},setWindowSize(r,n){Sc(n,t),Ic.set(r,n),ts.delete(r)}}}function Oc(e,t,r,n){if(Vf(r,e),$f(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,c=un(BigInt(r.length)),f=c>12?c-3:c>4?c-2:c?2:1,o=(1<<f)-1,w=new Array(o+1).fill(i),_=Math.floor((t.BITS-1)/f)*f;let B=i;for(let I=_;I>=0;I-=f){w.fill(i);for(let N=0;N<n.length;N++){const b=n[N],$=Number(b>>BigInt(I)&BigInt(o));w[$]=w[$].add(r[N])}let S=i;for(let N=w.length-1,b=i;N>0;N--)b=b.add(w[N]),S=S.add(b);if(B=B.add(S),I!==0)for(let N=0;N<f;N++)B=B.double()}return B}function Uc(e){return vc(e.Fp),Bn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qf(e){const t=Uc(e);Bn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const mr=BigInt(0),je=BigInt(1),Yt=BigInt(2),wi=BigInt(3),Ba=BigInt(4);function Aa(e){const t=qf(e),{Fp:r}=t,n=An(t.n,t.nBitLength),i=t.toBytes||(($,M,W)=>{const z=M.toAffine();return Ke(Uint8Array.from([4]),r.toBytes(z.x),r.toBytes(z.y))}),c=t.fromBytes||($=>{const M=$.subarray(1),W=r.fromBytes(M.subarray(0,r.BYTES)),z=r.fromBytes(M.subarray(r.BYTES,2*r.BYTES));return{x:W,y:z}});function f($){const{a:M,b:W}=t,z=r.sqr($),q=r.mul(z,$);return r.add(r.add(q,r.mul($,M)),W)}if(!r.eql(r.sqr(t.Gy),f(t.Gx)))throw new Error("bad generator point: equation left != right");function o($){return xc($,je,t.n)}function w($){const{allowedPrivateKeyLengths:M,nByteLength:W,wrapPrivateKey:z,n:q}=t;if(M&&typeof $!="bigint"){if(ki($)&&($=Br($)),typeof $!="string"||!M.includes($.length))throw new Error("invalid private key");$=$.padStart(W*2,"0")}let ie;try{ie=typeof $=="bigint"?$:Tt(ut("private key",$,W))}catch{throw new Error("invalid private key, expected hex or "+W+" bytes, got "+typeof $)}return z&&(ie=$e(ie,q)),ir("private key",ie,je,q),ie}function _($){if(!($ instanceof S))throw new Error("ProjectivePoint expected")}const B=pn(($,M)=>{const{px:W,py:z,pz:q}=$;if(r.eql(q,r.ONE))return{x:W,y:z};const ie=$.is0();M==null&&(M=ie?r.ONE:r.inv(q));const k=r.mul(W,M),Z=r.mul(z,M),G=r.mul(q,M);if(ie)return{x:r.ZERO,y:r.ZERO};if(!r.eql(G,r.ONE))throw new Error("invZ was invalid");return{x:k,y:Z}}),I=pn($=>{if($.is0()){if(t.allowInfinityPoint&&!r.is0($.py))return;throw new Error("bad point: ZERO")}const{x:M,y:W}=$.toAffine();if(!r.isValid(M)||!r.isValid(W))throw new Error("bad point: x or y not FE");const z=r.sqr(W),q=f(M);if(!r.eql(z,q))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class S{constructor(M,W,z){if(this.px=M,this.py=W,this.pz=z,M==null||!r.isValid(M))throw new Error("x required");if(W==null||!r.isValid(W))throw new Error("y required");if(z==null||!r.isValid(z))throw new Error("z required");Object.freeze(this)}static fromAffine(M){const{x:W,y:z}=M||{};if(!M||!r.isValid(W)||!r.isValid(z))throw new Error("invalid affine point");if(M instanceof S)throw new Error("projective point not allowed");const q=ie=>r.eql(ie,r.ZERO);return q(W)&&q(z)?S.ZERO:new S(W,z,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){const W=r.invertBatch(M.map(z=>z.pz));return M.map((z,q)=>z.toAffine(W[q])).map(S.fromAffine)}static fromHex(M){const W=S.fromAffine(c(ut("pointHex",M)));return W.assertValidity(),W}static fromPrivateKey(M){return S.BASE.multiply(w(M))}static msm(M,W){return Oc(S,n,M,W)}_setWindowSize(M){b.setWindowSize(this,M)}assertValidity(){I(this)}hasEvenY(){const{y:M}=this.toAffine();if(r.isOdd)return!r.isOdd(M);throw new Error("Field doesn't support isOdd")}equals(M){_(M);const{px:W,py:z,pz:q}=this,{px:ie,py:k,pz:Z}=M,G=r.eql(r.mul(W,Z),r.mul(ie,q)),Q=r.eql(r.mul(z,Z),r.mul(k,q));return G&&Q}negate(){return new S(this.px,r.neg(this.py),this.pz)}double(){const{a:M,b:W}=t,z=r.mul(W,wi),{px:q,py:ie,pz:k}=this;let Z=r.ZERO,G=r.ZERO,Q=r.ZERO,te=r.mul(q,q),X=r.mul(ie,ie),he=r.mul(k,k),le=r.mul(q,ie);return le=r.add(le,le),Q=r.mul(q,k),Q=r.add(Q,Q),Z=r.mul(M,Q),G=r.mul(z,he),G=r.add(Z,G),Z=r.sub(X,G),G=r.add(X,G),G=r.mul(Z,G),Z=r.mul(le,Z),Q=r.mul(z,Q),he=r.mul(M,he),le=r.sub(te,he),le=r.mul(M,le),le=r.add(le,Q),Q=r.add(te,te),te=r.add(Q,te),te=r.add(te,he),te=r.mul(te,le),G=r.add(G,te),he=r.mul(ie,k),he=r.add(he,he),te=r.mul(he,le),Z=r.sub(Z,te),Q=r.mul(he,X),Q=r.add(Q,Q),Q=r.add(Q,Q),new S(Z,G,Q)}add(M){_(M);const{px:W,py:z,pz:q}=this,{px:ie,py:k,pz:Z}=M;let G=r.ZERO,Q=r.ZERO,te=r.ZERO;const X=t.a,he=r.mul(t.b,wi);let le=r.mul(W,ie),O=r.mul(z,k),P=r.mul(q,Z),D=r.add(W,z),V=r.add(ie,k);D=r.mul(D,V),V=r.add(le,O),D=r.sub(D,V),V=r.add(W,q);let j=r.add(ie,Z);return V=r.mul(V,j),j=r.add(le,P),V=r.sub(V,j),j=r.add(z,q),G=r.add(k,Z),j=r.mul(j,G),G=r.add(O,P),j=r.sub(j,G),te=r.mul(X,V),G=r.mul(he,P),te=r.add(G,te),G=r.sub(O,te),te=r.add(O,te),Q=r.mul(G,te),O=r.add(le,le),O=r.add(O,le),P=r.mul(X,P),V=r.mul(he,V),O=r.add(O,P),P=r.sub(le,P),P=r.mul(X,P),V=r.add(V,P),le=r.mul(O,V),Q=r.add(Q,le),le=r.mul(j,V),G=r.mul(D,G),G=r.sub(G,le),le=r.mul(D,O),te=r.mul(j,te),te=r.add(te,le),new S(G,Q,te)}subtract(M){return this.add(M.negate())}is0(){return this.equals(S.ZERO)}wNAF(M){return b.wNAFCached(this,M,S.normalizeZ)}multiplyUnsafe(M){const{endo:W,n:z}=t;ir("scalar",M,mr,z);const q=S.ZERO;if(M===mr)return q;if(this.is0()||M===je)return this;if(!W||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,M,S.normalizeZ);let{k1neg:ie,k1:k,k2neg:Z,k2:G}=W.splitScalar(M),Q=q,te=q,X=this;for(;k>mr||G>mr;)k&je&&(Q=Q.add(X)),G&je&&(te=te.add(X)),X=X.double(),k>>=je,G>>=je;return ie&&(Q=Q.negate()),Z&&(te=te.negate()),te=new S(r.mul(te.px,W.beta),te.py,te.pz),Q.add(te)}multiply(M){const{endo:W,n:z}=t;ir("scalar",M,je,z);let q,ie;if(W){const{k1neg:k,k1:Z,k2neg:G,k2:Q}=W.splitScalar(M);let{p:te,f:X}=this.wNAF(Z),{p:he,f:le}=this.wNAF(Q);te=b.constTimeNegate(k,te),he=b.constTimeNegate(G,he),he=new S(r.mul(he.px,W.beta),he.py,he.pz),q=te.add(he),ie=X.add(le)}else{const{p:k,f:Z}=this.wNAF(M);q=k,ie=Z}return S.normalizeZ([q,ie])[0]}multiplyAndAddUnsafe(M,W,z){const q=S.BASE,ie=(Z,G)=>G===mr||G===je||!Z.equals(q)?Z.multiplyUnsafe(G):Z.multiply(G),k=ie(this,W).add(ie(M,z));return k.is0()?void 0:k}toAffine(M){return B(this,M)}isTorsionFree(){const{h:M,isTorsionFree:W}=t;if(M===je)return!0;if(W)return W(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:M,clearCofactor:W}=t;return M===je?this:W?W(S,this):this.multiplyUnsafe(t.h)}toRawBytes(M=!0){return on("isCompressed",M),this.assertValidity(),i(S,this,M)}toHex(M=!0){return on("isCompressed",M),Br(this.toRawBytes(M))}}S.BASE=new S(t.Gx,t.Gy,r.ONE),S.ZERO=new S(r.ZERO,r.ONE,r.ZERO);const N=t.nBitLength,b=Rc(S,t.endo?Math.ceil(N/2):N);return{CURVE:t,ProjectivePoint:S,normPrivateKeyToScalar:w,weierstrassEquation:f,isWithinCurveOrder:o}}function Gf(e,t){const r=e.ORDER;let n=mr;for(let b=r-je;b%Yt===mr;b/=Yt)n+=je;const i=n,c=Yt<<i-je-je,f=c*Yt,o=(r-je)/f,w=(o-je)/Yt,_=f-je,B=c,I=e.pow(t,o),S=e.pow(t,(o+je)/Yt);let N=(b,$)=>{let M=I,W=e.pow($,_),z=e.sqr(W);z=e.mul(z,$);let q=e.mul(b,z);q=e.pow(q,w),q=e.mul(q,W),W=e.mul(q,$),z=e.mul(q,b);let ie=e.mul(z,W);q=e.pow(ie,B);let k=e.eql(q,e.ONE);W=e.mul(z,S),q=e.mul(ie,M),z=e.cmov(W,z,k),ie=e.cmov(q,ie,k);for(let Z=i;Z>je;Z--){let G=Z-Yt;G=Yt<<G-je;let Q=e.pow(ie,G);const te=e.eql(Q,e.ONE);W=e.mul(z,M),M=e.mul(M,M),Q=e.mul(ie,M),z=e.cmov(W,z,te),ie=e.cmov(Q,ie,te)}return{isValid:k,value:z}};if(e.ORDER%Ba===wi){const b=(e.ORDER-wi)/Ba,$=e.sqrt(e.neg(t));N=(M,W)=>{let z=e.sqr(W);const q=e.mul(M,W);z=e.mul(z,q);let ie=e.pow(z,b);ie=e.mul(ie,q);const k=e.mul(ie,$),Z=e.mul(e.sqr(ie),W),G=e.eql(Z,M);let Q=e.cmov(k,ie,G);return{isValid:G,value:Q}}}return N}function Fc(e,t){if(vc(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=Gf(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,c,f,o,w,_,B,I;i=e.sqr(n),i=e.mul(i,t.Z),c=e.sqr(i),c=e.add(c,i),f=e.add(c,e.ONE),f=e.mul(f,t.B),o=e.cmov(t.Z,e.neg(c),!e.eql(c,e.ZERO)),o=e.mul(o,t.A),c=e.sqr(f),_=e.sqr(o),w=e.mul(_,t.A),c=e.add(c,w),c=e.mul(c,f),_=e.mul(_,o),w=e.mul(_,t.B),c=e.add(c,w),B=e.mul(i,f);const{isValid:S,value:N}=r(c,_);I=e.mul(i,n),I=e.mul(I,N),B=e.cmov(B,f,S),I=e.cmov(I,N,S);const b=e.isOdd(n)===e.isOdd(I);return I=e.cmov(e.neg(I),I,b),B=e.div(B,o),{x:B,y:I}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jf=BigInt(0),Fn=BigInt(1),Na=BigInt(2),Vr=BigInt(3);function Hf(e){const t=[];for(;e>Fn;e>>=Fn)(e&Fn)===jf?t.unshift(0):(e&Vr)===Vr?(t.unshift(-1),e+=Fn):t.unshift(1);return t}function Lf(e){const{Fp:t,Fr:r,Fp2:n,Fp6:i,Fp12:c}=e.fields,f=e.params.xNegative,o=e.params.twistType,w=Aa({n:r.ORDER,...e.G1}),_=Object.assign(w,va(w.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),B=Aa({n:r.ORDER,...e.G2}),I=Object.assign(B,va(B.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let S;if(o==="multiplicative")S=(re,E,se,ue,pe,ne)=>c.mul014(ue,re,n.mul(E,pe),n.mul(se,ne));else if(o==="divisive")S=(re,E,se,ue,pe,ne)=>c.mul034(ue,n.mul(se,ne),n.mul(E,pe),re);else throw new Error("bls: unknown twist type");const N=n.div(n.ONE,n.mul(n.ONE,Na));function b(re,E,se,ue){const pe=n.sqr(se),ne=n.sqr(ue),ce=n.mulByB(n.mul(ne,Vr)),m=n.mul(ce,Vr),s=n.sub(n.sub(n.sqr(n.add(se,ue)),ne),pe),h=n.sub(ce,pe),x=n.mul(n.sqr(E),Vr),T=n.neg(s);return re.push([h,x,T]),E=n.mul(n.mul(n.mul(n.sub(pe,m),E),se),N),se=n.sub(n.sqr(n.mul(n.add(pe,m),N)),n.mul(n.sqr(ce),Vr)),ue=n.mul(pe,s),{Rx:E,Ry:se,Rz:ue}}function $(re,E,se,ue,pe,ne){const ce=n.sub(se,n.mul(ne,ue)),m=n.sub(E,n.mul(pe,ue)),s=n.sub(n.mul(ce,pe),n.mul(m,ne)),h=n.neg(ce),x=m;re.push([s,h,x]);const T=n.sqr(m),U=n.mul(T,m),p=n.mul(T,E),a=n.add(n.sub(U,n.mul(p,Na)),n.mul(n.sqr(ce),ue));return E=n.mul(m,a),se=n.sub(n.mul(n.sub(p,a),ce),n.mul(U,se)),ue=n.mul(ue,U),{Rx:E,Ry:se,Rz:ue}}const M=Hf(e.params.ateLoopSize),W=pn(re=>{const E=re,{x:se,y:ue}=E.toAffine(),pe=se,ne=ue,ce=n.neg(ue);let m=pe,s=ne,h=n.ONE;const x=[];for(const T of M){const U=[];({Rx:m,Ry:s,Rz:h}=b(U,m,s,h)),T&&({Rx:m,Ry:s,Rz:h}=$(U,m,s,h,pe,T===-1?ce:ne)),x.push(U)}if(e.postPrecompute){const T=x[x.length-1];e.postPrecompute(m,s,h,pe,ne,$.bind(null,T))}return x});function z(re,E=!1){let se=c.ONE;if(re.length){const ue=re[0][0].length;for(let pe=0;pe<ue;pe++){se=c.sqr(se);for(const[ne,ce,m]of re)for(const[s,h,x]of ne[pe])se=S(s,h,x,se,ce,m)}}return f&&(se=c.conjugate(se)),E?c.finalExponentiate(se):se}function q(re,E=!0){const se=[];_.ProjectivePoint.normalizeZ(re.map(({g1:ue})=>ue)),I.ProjectivePoint.normalizeZ(re.map(({g2:ue})=>ue));for(const{g1:ue,g2:pe}of re){if(ue.equals(_.ProjectivePoint.ZERO)||pe.equals(I.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");ue.assertValidity(),pe.assertValidity();const ne=ue.toAffine();se.push([W(pe),ne.x,ne.y])}return z(se,E)}function ie(re,E,se=!0){return q([{g1:re,g2:E}],se)}const k={randomPrivateKey:()=>{const re=Ac(r.ORDER);return Ff(e.randomBytes(re),r.ORDER)},calcPairingPrecomputes:W},{ShortSignature:Z}=e.G1,{Signature:G}=e.G2;function Q(re){return re instanceof _.ProjectivePoint?re:_.ProjectivePoint.fromHex(re)}function te(re,E){return re instanceof _.ProjectivePoint?re:_.hashToCurve(ut("point",re),E)}function X(re){return re instanceof I.ProjectivePoint?re:G.fromHex(re)}function he(re,E){return re instanceof I.ProjectivePoint?re:I.hashToCurve(ut("point",re),E)}function le(re){return _.ProjectivePoint.fromPrivateKey(re).toRawBytes(!0)}function O(re){return I.ProjectivePoint.fromPrivateKey(re).toRawBytes(!0)}function P(re,E,se){const ue=he(re,se);ue.assertValidity();const pe=ue.multiply(_.normPrivateKeyToScalar(E));return re instanceof I.ProjectivePoint?pe:G.toRawBytes(pe)}function D(re,E,se){const ue=te(re,se);ue.assertValidity();const pe=ue.multiply(_.normPrivateKeyToScalar(E));return re instanceof _.ProjectivePoint?pe:Z.toRawBytes(pe)}function V(re,E,se,ue){const pe=Q(se),ne=he(E,ue),ce=_.ProjectivePoint.BASE,m=X(re),s=q([{g1:pe.negate(),g2:ne},{g1:ce,g2:m}]);return c.eql(s,c.ONE)}function j(re,E,se,ue){const pe=X(se),ne=te(E,ue),ce=I.ProjectivePoint.BASE,m=Q(re),s=q([{g1:ne,g2:pe},{g1:m,g2:ce.negate()}]);return c.eql(s,c.ONE)}function J(re){if(!Array.isArray(re)||re.length===0)throw new Error("expected non-empty array")}function ee(re){J(re);const se=re.map(Q).reduce((ue,pe)=>ue.add(pe),_.ProjectivePoint.ZERO);return re[0]instanceof _.ProjectivePoint?(se.assertValidity(),se):se.toRawBytes(!0)}function ge(re){J(re);const se=re.map(X).reduce((ue,pe)=>ue.add(pe),I.ProjectivePoint.ZERO);return re[0]instanceof I.ProjectivePoint?(se.assertValidity(),se):G.toRawBytes(se)}function ae(re){J(re);const se=re.map(Q).reduce((ue,pe)=>ue.add(pe),_.ProjectivePoint.ZERO);return re[0]instanceof _.ProjectivePoint?(se.assertValidity(),se):Z.toRawBytes(se)}function fe(re,E,se,ue){if(J(E),se.length!==E.length)throw new Error("amount of public keys and messages should be equal");const pe=X(re),ne=E.map(h=>he(h,ue)),ce=se.map(Q),m=new Map;for(let h=0;h<ce.length;h++){const x=ce[h],T=ne[h];let U=m.get(T);U===void 0&&(U=[],m.set(T,U)),U.push(x)}const s=[];try{for(const[h,x]of m){const T=x.reduce((U,p)=>U.add(p));s.push({g1:T,g2:h})}return s.push({g1:_.ProjectivePoint.BASE.negate(),g2:pe}),c.eql(q(s),c.ONE)}catch{return!1}}return _.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:le,getPublicKeyForShortSignatures:O,sign:P,signShortSignature:D,verify:V,verifyBatch:fe,verifyShortSignature:j,aggregatePublicKeys:ee,aggregateSignatures:ge,aggregateShortSignatures:ae,millerLoopBatch:z,pairing:ie,pairingBatch:q,G1:_,G2:I,Signature:G,ShortSignature:Z,fields:{Fr:r,Fp:t,Fp2:n,Fp6:i,Fp12:c},params:{ateLoopSize:e.params.ateLoopSize,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kf=BigInt(0),$r=BigInt(1),qt=BigInt(2),Sa=BigInt(3);function ns(e,t,r,n,i=1,c){const f=BigInt(c===void 0?n:c),o=r**BigInt(n),w=[];for(let _=0;_<i;_++){const B=BigInt(_+1),I=[];for(let S=0,N=$r;S<n;S++){const b=(B*N-B)/f%o;I.push(e.pow(t,b)),N*=r}w.push(I)}return w}function zf(e,t,r){const n=t.pow(r,(e.ORDER-$r)/Sa),i=t.pow(r,(e.ORDER-$r)/qt);function c(S,N){const b=t.mul(t.frobeniusMap(S,1),n),$=t.mul(t.frobeniusMap(N,1),i);return[b,$]}const f=t.pow(r,(e.ORDER**qt-$r)/Sa),o=t.pow(r,(e.ORDER**qt-$r)/qt);if(!t.eql(o,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function w(S,N){return[t.mul(S,f),t.neg(N)]}const _=S=>(N,b)=>{const $=b.toAffine(),M=S($.x,$.y);return N.fromAffine({x:M[0],y:M[1]})},B=_(c),I=_(w);return{psi:c,psi2:w,G2psi:B,G2psi2:I,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:o}}function Df(e){const{ORDER:t}=e,r=An(t),n=r.create(e.NONRESIDUE||BigInt(-1)),i=Uf(t),c=r.div(r.ONE,qt),f=ns(r,n,r.ORDER,2)[0],o=({c0:O,c1:P},{c0:D,c1:V})=>({c0:r.add(O,D),c1:r.add(P,V)}),w=({c0:O,c1:P},{c0:D,c1:V})=>({c0:r.sub(O,D),c1:r.sub(P,V)}),_=({c0:O,c1:P},D)=>{if(typeof D=="bigint")return{c0:r.mul(O,D),c1:r.mul(P,D)};const{c0:V,c1:j}=D;let J=r.mul(O,V),ee=r.mul(P,j);const ge=r.sub(J,ee),ae=r.sub(r.mul(r.add(O,P),r.add(V,j)),r.add(J,ee));return{c0:ge,c1:ae}},B=({c0:O,c1:P})=>{const D=r.add(O,P),V=r.sub(O,P),j=r.add(O,O);return{c0:r.mul(D,V),c1:r.mul(j,P)}},I=O=>{if(O.length!==2)throw new Error("invalid tuple");const P=O.map(D=>r.create(D));return{c0:P[0],c1:P[1]}},S=t*t,N=I(e.FP2_NONRESIDUE),b={ORDER:S,isLE:r.isLE,NONRESIDUE:N,BITS:un(S),BYTES:Math.ceil(un(S)/8),MASK:Hn(un(S)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:O=>O,isValid:({c0:O,c1:P})=>typeof O=="bigint"&&typeof P=="bigint",is0:({c0:O,c1:P})=>r.is0(O)&&r.is0(P),eql:({c0:O,c1:P},{c0:D,c1:V})=>r.eql(O,D)&&r.eql(P,V),neg:({c0:O,c1:P})=>({c0:r.neg(O),c1:r.neg(P)}),pow:(O,P)=>Ln(b,O,P),invertBatch:O=>Kn(b,O),add:o,sub:w,mul:_,sqr:B,addN:o,subN:w,mulN:_,sqrN:B,div:(O,P)=>b.mul(O,typeof P=="bigint"?r.inv(r.create(P)):b.inv(P)),inv:({c0:O,c1:P})=>{const D=r.inv(r.create(O*O+P*P));return{c0:r.mul(D,r.create(O)),c1:r.mul(D,r.create(-P))}},sqrt:O=>{if(e.Fp2sqrt)return e.Fp2sqrt(O);const{c0:P,c1:D}=O;if(r.is0(D))return r.eql(i(r,P),r.ONE)?b.create({c0:r.sqrt(P),c1:r.ZERO}):b.create({c0:r.ZERO,c1:r.sqrt(r.div(P,n))});const V=r.sqrt(r.sub(r.sqr(P),r.mul(r.sqr(D),n)));let j=r.mul(r.add(V,P),c);const J=i(r,j);!r.is0(J)&&!r.eql(J,r.ONE)&&(j=r.sub(j,V));const ee=r.sqrt(j),ge=b.create({c0:ee,c1:r.div(r.mul(D,c),ee)});if(!b.eql(b.sqr(ge),O))throw new Error("Cannot find square root");const ae=ge,fe=b.neg(ae),{re,im:E}=b.reim(ae),{re:se,im:ue}=b.reim(fe);return E>ue||E===ue&&re>se?ae:fe},isOdd:O=>{const{re:P,im:D}=b.reim(O),V=P%qt,j=P===Kf,J=D%qt;return BigInt(V||j&&J)==$r},fromBytes(O){if(O.length!==b.BYTES)throw new Error("fromBytes invalid length="+O.length);return{c0:r.fromBytes(O.subarray(0,r.BYTES)),c1:r.fromBytes(O.subarray(r.BYTES))}},toBytes:({c0:O,c1:P})=>Ke(r.toBytes(O),r.toBytes(P)),cmov:({c0:O,c1:P},{c0:D,c1:V},j)=>({c0:r.cmov(O,D,j),c1:r.cmov(P,V,j)}),reim:({c0:O,c1:P})=>({re:O,im:P}),mulByNonresidue:({c0:O,c1:P})=>b.mul({c0:O,c1:P},N),mulByB:e.Fp2mulByB,fromBigTuple:I,frobeniusMap:({c0:O,c1:P},D)=>({c0:O,c1:r.mul(P,f[D%2])})},$=({c0:O,c1:P,c2:D},{c0:V,c1:j,c2:J})=>({c0:b.add(O,V),c1:b.add(P,j),c2:b.add(D,J)}),M=({c0:O,c1:P,c2:D},{c0:V,c1:j,c2:J})=>({c0:b.sub(O,V),c1:b.sub(P,j),c2:b.sub(D,J)}),W=({c0:O,c1:P,c2:D},V)=>{if(typeof V=="bigint")return{c0:b.mul(O,V),c1:b.mul(P,V),c2:b.mul(D,V)};const{c0:j,c1:J,c2:ee}=V,ge=b.mul(O,j),ae=b.mul(P,J),fe=b.mul(D,ee);return{c0:b.add(ge,b.mulByNonresidue(b.sub(b.mul(b.add(P,D),b.add(J,ee)),b.add(ae,fe)))),c1:b.add(b.sub(b.mul(b.add(O,P),b.add(j,J)),b.add(ge,ae)),b.mulByNonresidue(fe)),c2:b.sub(b.add(ae,b.mul(b.add(O,D),b.add(j,ee))),b.add(ge,fe))}},z=({c0:O,c1:P,c2:D})=>{let V=b.sqr(O),j=b.mul(b.mul(O,P),qt),J=b.mul(b.mul(P,D),qt),ee=b.sqr(D);return{c0:b.add(b.mulByNonresidue(J),V),c1:b.add(b.mulByNonresidue(ee),j),c2:b.sub(b.sub(b.add(b.add(j,b.sqr(b.add(b.sub(O,P),D))),J),V),ee)}},[q,ie]=ns(b,N,r.ORDER,6,2,3),k={ORDER:b.ORDER,isLE:b.isLE,BITS:3*b.BITS,BYTES:3*b.BYTES,MASK:Hn(3*b.BITS),ZERO:{c0:b.ZERO,c1:b.ZERO,c2:b.ZERO},ONE:{c0:b.ONE,c1:b.ZERO,c2:b.ZERO},create:O=>O,isValid:({c0:O,c1:P,c2:D})=>b.isValid(O)&&b.isValid(P)&&b.isValid(D),is0:({c0:O,c1:P,c2:D})=>b.is0(O)&&b.is0(P)&&b.is0(D),neg:({c0:O,c1:P,c2:D})=>({c0:b.neg(O),c1:b.neg(P),c2:b.neg(D)}),eql:({c0:O,c1:P,c2:D},{c0:V,c1:j,c2:J})=>b.eql(O,V)&&b.eql(P,j)&&b.eql(D,J),sqrt:ma,div:(O,P)=>k.mul(O,typeof P=="bigint"?r.inv(r.create(P)):k.inv(P)),pow:(O,P)=>Ln(k,O,P),invertBatch:O=>Kn(k,O),add:$,sub:M,mul:W,sqr:z,addN:$,subN:M,mulN:W,sqrN:z,inv:({c0:O,c1:P,c2:D})=>{let V=b.sub(b.sqr(O),b.mulByNonresidue(b.mul(D,P))),j=b.sub(b.mulByNonresidue(b.sqr(D)),b.mul(O,P)),J=b.sub(b.sqr(P),b.mul(O,D)),ee=b.inv(b.add(b.mulByNonresidue(b.add(b.mul(D,j),b.mul(P,J))),b.mul(O,V)));return{c0:b.mul(ee,V),c1:b.mul(ee,j),c2:b.mul(ee,J)}},fromBytes:O=>{if(O.length!==k.BYTES)throw new Error("fromBytes invalid length="+O.length);return{c0:b.fromBytes(O.subarray(0,b.BYTES)),c1:b.fromBytes(O.subarray(b.BYTES,2*b.BYTES)),c2:b.fromBytes(O.subarray(2*b.BYTES))}},toBytes:({c0:O,c1:P,c2:D})=>Ke(b.toBytes(O),b.toBytes(P),b.toBytes(D)),cmov:({c0:O,c1:P,c2:D},{c0:V,c1:j,c2:J},ee)=>({c0:b.cmov(O,V,ee),c1:b.cmov(P,j,ee),c2:b.cmov(D,J,ee)}),fromBigSix:O=>{if(!Array.isArray(O)||O.length!==6)throw new Error("invalid Fp6 usage");return{c0:b.fromBigTuple(O.slice(0,2)),c1:b.fromBigTuple(O.slice(2,4)),c2:b.fromBigTuple(O.slice(4,6))}},frobeniusMap:({c0:O,c1:P,c2:D},V)=>({c0:b.frobeniusMap(O,V),c1:b.mul(b.frobeniusMap(P,V),q[V%6]),c2:b.mul(b.frobeniusMap(D,V),ie[V%6])}),mulByFp2:({c0:O,c1:P,c2:D},V)=>({c0:b.mul(O,V),c1:b.mul(P,V),c2:b.mul(D,V)}),mulByNonresidue:({c0:O,c1:P,c2:D})=>({c0:b.mulByNonresidue(D),c1:O,c2:P}),mul1:({c0:O,c1:P,c2:D},V)=>({c0:b.mulByNonresidue(b.mul(D,V)),c1:b.mul(O,V),c2:b.mul(P,V)}),mul01({c0:O,c1:P,c2:D},V,j){let J=b.mul(O,V),ee=b.mul(P,j);return{c0:b.add(b.mulByNonresidue(b.sub(b.mul(b.add(P,D),j),ee)),J),c1:b.sub(b.sub(b.mul(b.add(V,j),b.add(O,P)),J),ee),c2:b.add(b.sub(b.mul(b.add(O,D),V),J),ee)}}},Z=ns(b,N,r.ORDER,12,1,6)[0],G=({c0:O,c1:P},{c0:D,c1:V})=>({c0:k.add(O,D),c1:k.add(P,V)}),Q=({c0:O,c1:P},{c0:D,c1:V})=>({c0:k.sub(O,D),c1:k.sub(P,V)}),te=({c0:O,c1:P},D)=>{if(typeof D=="bigint")return{c0:k.mul(O,D),c1:k.mul(P,D)};let{c0:V,c1:j}=D,J=k.mul(O,V),ee=k.mul(P,j);return{c0:k.add(J,k.mulByNonresidue(ee)),c1:k.sub(k.mul(k.add(O,P),k.add(V,j)),k.add(J,ee))}},X=({c0:O,c1:P})=>{let D=k.mul(O,P);return{c0:k.sub(k.sub(k.mul(k.add(k.mulByNonresidue(P),O),k.add(O,P)),D),k.mulByNonresidue(D)),c1:k.add(D,D)}};function he(O,P){const D=b.sqr(O),V=b.sqr(P);return{first:b.add(b.mulByNonresidue(V),D),second:b.sub(b.sub(b.sqr(b.add(O,P)),D),V)}}const le={ORDER:b.ORDER,isLE:k.isLE,BITS:2*b.BITS,BYTES:2*b.BYTES,MASK:Hn(2*b.BITS),ZERO:{c0:k.ZERO,c1:k.ZERO},ONE:{c0:k.ONE,c1:k.ZERO},create:O=>O,isValid:({c0:O,c1:P})=>k.isValid(O)&&k.isValid(P),is0:({c0:O,c1:P})=>k.is0(O)&&k.is0(P),neg:({c0:O,c1:P})=>({c0:k.neg(O),c1:k.neg(P)}),eql:({c0:O,c1:P},{c0:D,c1:V})=>k.eql(O,D)&&k.eql(P,V),sqrt:ma,inv:({c0:O,c1:P})=>{let D=k.inv(k.sub(k.sqr(O),k.mulByNonresidue(k.sqr(P))));return{c0:k.mul(O,D),c1:k.neg(k.mul(P,D))}},div:(O,P)=>le.mul(O,typeof P=="bigint"?r.inv(r.create(P)):le.inv(P)),pow:(O,P)=>Ln(le,O,P),invertBatch:O=>Kn(le,O),add:G,sub:Q,mul:te,sqr:X,addN:G,subN:Q,mulN:te,sqrN:X,fromBytes:O=>{if(O.length!==le.BYTES)throw new Error("fromBytes invalid length="+O.length);return{c0:k.fromBytes(O.subarray(0,k.BYTES)),c1:k.fromBytes(O.subarray(k.BYTES))}},toBytes:({c0:O,c1:P})=>Ke(k.toBytes(O),k.toBytes(P)),cmov:({c0:O,c1:P},{c0:D,c1:V},j)=>({c0:k.cmov(O,D,j),c1:k.cmov(P,V,j)}),fromBigTwelve:O=>({c0:k.fromBigSix(O.slice(0,6)),c1:k.fromBigSix(O.slice(6,12))}),frobeniusMap(O,P){const{c0:D,c1:V,c2:j}=k.frobeniusMap(O.c1,P),J=Z[P%12];return{c0:k.frobeniusMap(O.c0,P),c1:k.create({c0:b.mul(D,J),c1:b.mul(V,J),c2:b.mul(j,J)})}},mulByFp2:({c0:O,c1:P},D)=>({c0:k.mulByFp2(O,D),c1:k.mulByFp2(P,D)}),conjugate:({c0:O,c1:P})=>({c0:O,c1:k.neg(P)}),mul014:({c0:O,c1:P},D,V,j)=>{let J=k.mul01(O,D,V),ee=k.mul1(P,j);return{c0:k.add(k.mulByNonresidue(ee),J),c1:k.sub(k.sub(k.mul01(k.add(P,O),D,b.add(V,j)),J),ee)}},mul034:({c0:O,c1:P},D,V,j)=>{const J=k.create({c0:b.mul(O.c0,D),c1:b.mul(O.c1,D),c2:b.mul(O.c2,D)}),ee=k.mul01(P,V,j),ge=k.mul01(k.add(O,P),b.add(D,V),j);return{c0:k.add(k.mulByNonresidue(ee),J),c1:k.sub(ge,k.add(J,ee))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:r,Fp2:b,Fp6:k,Fp4Square:he,Fp12:le}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ct=BigInt(0),mi=BigInt(1),Xe=BigInt(2),Pn=BigInt(3),ln=BigInt(4),tr=BigInt("0xd201000000010000"),Wf=un(tr),{Fp:we,Fp2:be,Fp6:Ss,Fp4Square:is,Fp12:Ne}=Df({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[mi,mi],Fp2mulByB:({c0:e,c1:t})=>{const r=we.mul(e,ln),n=we.mul(t,ln);return{c0:we.sub(r,n),c1:we.add(r,n)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:r,c1:n,c2:i}=e,{c0:c,c1:f,c2:o}=t,{first:w,second:_}=is(r,f),{first:B,second:I}=is(c,i),{first:S,second:N}=is(n,o),b=be.mulByNonresidue(N);return{c0:Ss.create({c0:be.add(be.mul(be.sub(w,r),Xe),w),c1:be.add(be.mul(be.sub(B,n),Xe),B),c2:be.add(be.mul(be.sub(S,i),Xe),S)}),c1:Ss.create({c0:be.add(be.mul(be.add(b,c),Xe),b),c1:be.add(be.mul(be.add(_,f),Xe),_),c2:be.add(be.mul(be.add(I,o),Xe),I)})}},Fp12cyclotomicExp(e,t){let r=Ne.ONE;for(let n=Wf-1;n>=0;n--)r=Ne._cyclotomicSquare(r),Tf(t,n)&&(r=Ne.mul(r,e));return r},Fp12finalExponentiate:e=>{const t=tr,r=Ne.div(Ne.frobeniusMap(e,6),e),n=Ne.mul(Ne.frobeniusMap(r,2),r),i=Ne.conjugate(Ne._cyclotomicExp(n,t)),c=Ne.mul(Ne.conjugate(Ne._cyclotomicSquare(n)),i),f=Ne.conjugate(Ne._cyclotomicExp(c,t)),o=Ne.conjugate(Ne._cyclotomicExp(f,t)),w=Ne.mul(Ne.conjugate(Ne._cyclotomicExp(o,t)),Ne._cyclotomicSquare(i)),_=Ne.conjugate(Ne._cyclotomicExp(w,t)),B=Ne.frobeniusMap(Ne.mul(i,o),2),I=Ne.frobeniusMap(Ne.mul(f,n),3),S=Ne.frobeniusMap(Ne.mul(w,Ne.conjugate(n)),1),N=Ne.mul(Ne.mul(_,Ne.conjugate(c)),n);return Ne.mul(Ne.mul(Ne.mul(B,I),S),N)}}),Ia=An(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),Yf=Nc(be,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>be.fromBigTuple(t.map(BigInt))))),Zf=Nc(we,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),Xf=Fc(be,{A:be.create({c0:we.create(ct),c1:we.create(BigInt(240))}),B:be.create({c0:we.create(BigInt(1012)),c1:we.create(BigInt(1012))}),Z:be.create({c0:we.create(BigInt(-2)),c1:we.create(BigInt(-1))})}),Jf=Fc(we,{A:we.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:we.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:we.create(BigInt(11))}),{G2psi:Ra,G2psi2:Qf}=zf(we,be,be.div(be.ONE,be.NONRESIDUE)),ss=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:we.ORDER,m:2,k:128,expand:"xmd",hash:Vs}),bi=gn(we.toBytes(ct),{infinity:!0,compressed:!0});function kn(e){e=e.slice();const t=e[0]&224,r=!!(t>>7&1),n=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:r,infinity:n,sort:i,value:e}}function gn(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function Oa(e){e.assertValidity();const t=e.equals(yt.G1.ProjectivePoint.ZERO),{x:r,y:n}=e.toAffine();if(t)return bi.slice();const i=we.ORDER,c=!!(n*Xe/i);return gn(tt(r,we.BYTES),{compressed:!0,sort:c})}function Ua(e){e.assertValidity();const t=we.BYTES;if(e.equals(yt.G2.ProjectivePoint.ZERO))return Ke(bi,tt(ct,t));const{x:r,y:n}=e.toAffine(),{re:i,im:c}=be.reim(r),{re:f,im:o}=be.reim(n),_=!!((o>ct?o*Xe:f*Xe)/we.ORDER&mi),B=i;return Ke(gn(tt(c,t),{sort:_,compressed:!0}),tt(B,t))}const yt=Lf({fields:{Fp:we,Fp2:be,Fp6:Ss,Fp12:Ne,Fr:Ia},G1:{Fp:we,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:we.ZERO,b:ln,htfDefaults:{...ss,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new e(we.mul(t.px,r),t.py,t.pz);return t.multiplyUnsafe(tr).negate().multiplyUnsafe(tr).equals(n)},clearCofactor:(e,t)=>t.multiplyUnsafe(tr).add(t),mapToCurve:e=>{const{x:t,y:r}=Jf(we.create(e[0]));return Zf(t,r)},fromBytes:e=>{const{compressed:t,infinity:r,sort:n,value:i}=kn(e);if(i.length===48&&t){const c=we.ORDER,f=Tt(i),o=we.create(f&we.MASK);if(r){if(o!==ct)throw new Error("G1: non-empty compressed point at infinity");return{x:ct,y:ct}}const w=we.add(we.pow(o,Pn),we.create(yt.params.G1b));let _=we.sqrt(w);if(!_)throw new Error("invalid compressed G1 point");return _*Xe/c!==BigInt(n)&&(_=we.neg(_)),{x:we.create(o),y:we.create(_)}}else if(i.length===96&&!t){const c=Tt(i.subarray(0,we.BYTES)),f=Tt(i.subarray(we.BYTES));if(r){if(c!==ct||f!==ct)throw new Error("G1: non-empty point at infinity");return yt.G1.ProjectivePoint.ZERO.toAffine()}return{x:we.create(c),y:we.create(f)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(e,t,r)=>{const n=t.equals(e.ZERO),{x:i,y:c}=t.toAffine();if(r){if(n)return bi.slice();const f=we.ORDER,o=!!(c*Xe/f);return gn(tt(i,we.BYTES),{compressed:!0,sort:o})}else return n?Ke(new Uint8Array([64]),new Uint8Array(2*we.BYTES-1)):Ke(tt(i,we.BYTES),tt(c,we.BYTES))},ShortSignature:{fromHex(e){const{infinity:t,sort:r,value:n}=kn(ut("signatureHex",e,48)),i=we.ORDER,c=Tt(n);if(t)return yt.G1.ProjectivePoint.ZERO;const f=we.create(c&we.MASK),o=we.add(we.pow(f,Pn),we.create(yt.params.G1b));let w=we.sqrt(o);if(!w)throw new Error("invalid compressed G1 point");const _=BigInt(r);w*Xe/i!==_&&(w=we.neg(w));const B=yt.G1.ProjectivePoint.fromAffine({x:f,y:w});return B.assertValidity(),B},toRawBytes(e){return Oa(e)},toHex(e){return Br(Oa(e))}}},G2:{Fp:be,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:be.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:be.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:be.ZERO,b:be.fromBigTuple([ln,ln]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...ss},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:e=>{const{x:t,y:r}=Xf(be.fromBigTuple(e));return Yf(t,r)},isTorsionFree:(e,t)=>t.multiplyUnsafe(tr).negate().equals(Ra(e,t)),clearCofactor:(e,t)=>{const r=tr;let n=t.multiplyUnsafe(r).negate(),i=Ra(e,t),c=t.double();return c=Qf(e,c),c=c.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),c=c.add(i),c=c.subtract(n),c.subtract(t)},fromBytes:e=>{const{compressed:t,infinity:r,sort:n,value:i}=kn(e);if(!t&&!r&&n||!t&&r&&n||n&&r&&t)throw new Error("invalid encoding flag: "+(e[0]&224));const c=we.BYTES,f=(o,w,_)=>Tt(o.slice(w,_));if(i.length===96&&t){const o=yt.params.G2b,w=we.ORDER;if(r){if(i.reduce(($,M)=>$!==0?M+1:M,0)>0)throw new Error("invalid compressed G2 point");return{x:be.ZERO,y:be.ZERO}}const _=f(i,0,c),B=f(i,c,2*c),I=be.create({c0:we.create(B),c1:we.create(_)}),S=be.add(be.pow(I,Pn),o);let N=be.sqrt(S);const b=N.c1===ct?N.c0*Xe/w:N.c1*Xe/w?mi:ct;return N=n&&b>0?N:be.neg(N),{x:I,y:N}}else if(i.length===192&&!t){if(r){if(i.reduce((I,S)=>I!==0?S+1:S,0)>0)throw new Error("invalid uncompressed G2 point");return{x:be.ZERO,y:be.ZERO}}const o=f(i,0,c),w=f(i,c,2*c),_=f(i,2*c,3*c),B=f(i,3*c,4*c);return{x:be.fromBigTuple([w,o]),y:be.fromBigTuple([B,_])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(e,t,r)=>{const{BYTES:n,ORDER:i}=we,c=t.equals(e.ZERO),{x:f,y:o}=t.toAffine();if(r){if(c)return Ke(bi,tt(ct,n));const w=!!(o.c1===ct?o.c0*Xe/i:o.c1*Xe/i);return Ke(gn(tt(f.c1,n),{compressed:!0,sort:w}),tt(f.c0,n))}else{if(c)return Ke(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:w,im:_}=be.reim(f),{re:B,im:I}=be.reim(o);return Ke(tt(_,n),tt(w,n),tt(I,n),tt(B,n))}},Signature:{fromHex(e){const{infinity:t,sort:r,value:n}=kn(ut("signatureHex",e)),i=we.ORDER,c=n.length/2;if(c!==48&&c!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const f=Tt(n.slice(0,c)),o=Tt(n.slice(c));if(t)return yt.G2.ProjectivePoint.ZERO;const w=we.create(f&we.MASK),_=we.create(o),B=be.create({c0:_,c1:w}),I=be.add(be.pow(B,Pn),yt.params.G2b);let S=be.sqrt(I);if(!S)throw new Error("Failed to find a square root");const{re:N,im:b}=be.reim(S),$=BigInt(r),M=b>ct&&b*Xe/i!==$,W=b===ct&&N*Xe/i!==$;(M||W)&&(S=be.neg(S));const z=yt.G2.ProjectivePoint.fromAffine({x:B,y:S});return z.assertValidity(),z},toRawBytes(e){return Ua(e)},toHex(e){return Br(Ua(e))}}},params:{ateLoopSize:tr,r:Ia.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:ss,hash:Vs,randomBytes:ao});function ed(e,t,r){const n=typeof e=="string"?e:Ce(e),i=typeof t=="string"?t:Ce(t),c=typeof r=="string"?r:Ce(r);return yt.verifyShortSignature(i,c,n)}const Pc=e=>Ze(new Dr(e)),Js=e=>{const t=Pc(e);return new Date(Number(t)/1e6)};var td=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},rd=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},zn;class Pt extends qe{constructor(t){super(`Invalid certificate: ${t}`)}}var ht;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(ht||(ht={}));function nd(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class Er{constructor(t,r,n,i,c=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=c,zn.set(this,!1),td(this,zn,f,"f"),this.cert=jt(new Uint8Array(t))}static async create(t){const r=Er.createUnverified(t);return await r.verify(),r}static createUnverified(t){let r=t.blsVerify;return r||(r=ed),new Er(t.certificate,t.rootKey,t.canisterId,r,t.maxAgeInMinutes,t.disableTimeVerification)}lookup(t){return Kr(t,this.cert.tree)}lookup_label(t){return this.lookup([t])}async verify(){const t=await Dn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=sd(r),c=At(en("ic-state-root"),t);let f=!1;const o=wt(this.lookup(["time"]));if(!o)throw new Pt("Certificate does not contain a time");if(!rd(this,zn,"f")){const _=this._maxAgeInMinutes*60*1e3,B=Date.now(),I=B-_,S=B+3e5,N=Js(o);if(N.getTime()<I)throw new Pt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+N.toISOString()+" Current time: "+new Date(B).toISOString());if(N.getTime()>S)throw new Pt("Certificate is signed more than 5 minutes in the future. Certificate time: "+N.toISOString()+" Current time: "+new Date(B).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(c))}catch{f=!1}if(!f)throw new Pt("Signature verification failed")}async _checkDelegationAndGetKey(t){if(!t)return this._rootKey;const r=await Er.createUnverified({certificate:t.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Pt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Jd&&!kc({canisterId:this._canisterId,subnetId:Te.fromUint8Array(new Uint8Array(t.subnet_id)),tree:r.cert.tree}))throw new Pt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Ce(t.subnet_id)}`);const n=wt(r.lookup(["subnet",t.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Ce(t.subnet_id)}`);return n}}zn=new WeakMap;const Zr=Lt("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),id=96;function sd(e){const t=Zr.byteLength+id;if(e.byteLength!==t)throw new TypeError(`BLS DER-encoded public key must be ${t} bytes long`);const r=e.slice(0,Zr.byteLength);if(!En(r,Zr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Zr}, but get ${r}`);return e.slice(Zr.byteLength)}function wt(e){if(e.status===ze.Found){if(e.value instanceof ArrayBuffer)return e.value;if(e.value instanceof Uint8Array)return e.value.buffer}}async function Dn(e){switch(e[0]){case ht.Empty:return Bt(en("ic-hashtree-empty"));case ht.Pruned:return e[1];case ht.Leaf:return Bt(At(en("ic-hashtree-leaf"),e[1]));case ht.Labeled:return Bt(At(en("ic-hashtree-labeled"),e[1],await Dn(e[2])));case ht.Fork:return Bt(At(en("ic-hashtree-fork"),await Dn(e[1]),await Dn(e[2])));default:throw new Error("unreachable")}}function en(e){const t=new Uint8Array([e.length]),r=new TextEncoder().encode(e);return At(t,r)}var ze;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(ze||(ze={}));var Gt;(function(e){e.Less="less",e.Greater="greater"})(Gt||(Gt={}));function Kr(e,t){if(e.length===0)switch(t[0]){case ht.Leaf:{if(!t[1])throw new Error("Invalid tree structure for leaf");return t[1]instanceof ArrayBuffer?{status:ze.Found,value:t[1]}:t[1]instanceof Uint8Array?{status:ze.Found,value:t[1].buffer}:{status:ze.Found,value:t[1]}}default:return{status:ze.Found,value:t}}const r=typeof e[0]=="string"?new TextEncoder().encode(e[0]):e[0],n=Wn(r,t);switch(n.status){case ze.Found:return Kr(e.slice(1),n.value);case Gt.Greater:case Gt.Less:return{status:ze.Absent};default:return n}}function Is(e){switch(e[0]){case ht.Empty:return[];case ht.Fork:return Is(e[1]).concat(Is(e[2]));default:return[e]}}function Wn(e,t){switch(t[0]){case ht.Labeled:return nd(e,t[1])?{status:Gt.Greater}:En(e,t[1])?{status:ze.Found,value:t[2]}:{status:Gt.Less};case ht.Fork:const r=Wn(e,t[1]);switch(r.status){case Gt.Greater:{const n=Wn(e,t[2]);return n.status===Gt.Less?{status:ze.Absent}:n}case ze.Unknown:{let n=Wn(e,t[2]);return n.status===Gt.Less?{status:ze.Unknown}:n}default:return r}case ht.Pruned:return{status:ze.Unknown};default:return{status:ze.Absent}}}function kc(e){const{canisterId:t,subnetId:r,tree:n}=e,i=Kr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==ze.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return jt(i.value).map(w=>[Te.fromUint8Array(w[0]),Te.fromUint8Array(w[1])]).some(w=>w[0].ltEq(t)&&w[1].gtEq(t))}class ad{constructor(t,r,n){this.key=t,this.path=r,this.decodeStrategy=n}}const Cc=async e=>{const{agent:t,paths:r}=e,n=Te.from(e.canisterId),i=[...new Set(r)],c=i.map(w=>Rs(w,n)),f=new Map,o=i.map((w,_)=>(async()=>{var B;try{const I=await t.readState(n,{paths:[c[_]]});if(t.rootKey==null)throw new Error("Agent is missing root key");const S=await Er.create({certificate:I.certificate,rootKey:t.rootKey,canisterId:n,disableTimeVerification:!0}),N=(M,W)=>{if(W==="subnet"){if(t.rootKey==null)throw new Error("Agent is missing root key");const z=Mc(I.certificate,n,t.rootKey);return{path:W,data:z}}else return{path:W,data:wt(M.lookup(Rs(W,n)))}},{path:b,data:$}=N(S,i[_]);if(!$)console.warn(`Expected to find result for path ${b}, but instead found nothing.`),typeof b=="string"?f.set(b,null):f.set(b.key,null);else switch(b){case"time":{f.set(b,Js($));break}case"controllers":{f.set(b,cd($));break}case"module_hash":{f.set(b,Fa($));break}case"subnet":{f.set(b,$);break}case"candid":{f.set(b,new TextDecoder().decode($));break}default:if(typeof b!="string"&&"key"in b&&"path"in b)switch(b.decodeStrategy){case"raw":f.set(b.key,$);break;case"leb128":{f.set(b.key,Pc($));break}case"cbor":{f.set(b.key,Vc($));break}case"hex":{f.set(b.key,Fa($));break}case"utf-8":f.set(b.key,od($))}}}catch(I){if(!((B=I?.message)===null||B===void 0)&&B.includes("Invalid certificate"))throw new qe(I.message);typeof w!="string"&&"key"in w&&"path"in w?f.set(w.key,null):f.set(w,null),console.group(),console.warn(`Expected to find result for path ${w}, but instead found nothing.`),console.warn(I),console.groupEnd()}})());return await Promise.all(o),f},Mc=(e,t,r)=>{if(!t._isPrincipal)throw new Error("Invalid canisterId");const n=jt(new Uint8Array(e)),i=n.tree;let c=n.delegation,f;if(c&&c.subnet_id?f=Te.fromUint8Array(new Uint8Array(c.subnet_id)):!c&&typeof r<"u"?(f=Te.selfAuthenticating(new Uint8Array(r)),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=Te.selfAuthenticating(Te.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!kc({canisterId:t,subnetId:f,tree:i}))throw new Error("Canister not in range");const w=Kr(["subnet",c.subnet_id,"node"],i);if(w.status!==ze.Found)throw new Error("Node not found");if(w.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const _=Is(w.value),B=new Map;return _.forEach(I=>{const S=Te.from(new Uint8Array(I[1])).toText(),N=Kr(["public_key"],I[2]);if(N.status!==ze.Found)throw new Error("Public key not found");const b=N.value;if(b.byteLength!==44)throw new Error("Invalid public key length");B.set(S,b)}),{subnetId:Te.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:B}},Rs=(e,t)=>{const r=new TextEncoder,n=c=>new DataView(r.encode(c).buffer).buffer,i=new DataView(t.toUint8Array().buffer).buffer;switch(e){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in e&&"path"in e)if(typeof e.path=="string"||e.path instanceof ArrayBuffer){const c=e.path,f=typeof c=="string"?n(c):c;return[n("canister"),i,n("metadata"),f]}else return e.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${e} was formatted correctly.`)},Fa=e=>Ce(e),Vc=e=>jt(e),od=e=>new TextDecoder().decode(e),cd=e=>Vc(e).map(r=>Te.fromUint8Array(new Uint8Array(r))),ud=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:ad,encodePath:Rs,fetchNodeKeys:Mc,request:Cc},Symbol.toStringTag,{value:"Module"})),Cn=BigInt(2**32-1),Os=BigInt(32);function $c(e,t=!1){return t?{h:Number(e&Cn),l:Number(e>>Os&Cn)}:{h:Number(e>>Os&Cn)|0,l:Number(e&Cn)|0}}function ld(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:c,l:f}=$c(e[i],t);[r[i],n[i]]=[c,f]}return[r,n]}const fd=(e,t)=>BigInt(e>>>0)<<Os|BigInt(t>>>0),dd=(e,t,r)=>e>>>r,hd=(e,t,r)=>e<<32-r|t>>>r,pd=(e,t,r)=>e>>>r|t<<32-r,yd=(e,t,r)=>e<<32-r|t>>>r,gd=(e,t,r)=>e<<64-r|t>>>r-32,wd=(e,t,r)=>e>>>r-32|t<<64-r,md=(e,t)=>t,bd=(e,t)=>e,_d=(e,t,r)=>e<<r|t>>>32-r,Ed=(e,t,r)=>t<<r|e>>>32-r,xd=(e,t,r)=>t<<r-32|e>>>64-r,vd=(e,t,r)=>e<<r-32|t>>>64-r;function Td(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Bd=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Ad=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Nd=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Sd=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Id=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Rd=(e,t,r,n,i,c)=>t+r+n+i+c+(e/2**32|0)|0,Be={fromBig:$c,split:ld,toBig:fd,shrSH:dd,shrSL:hd,rotrSH:pd,rotrSL:yd,rotrBH:gd,rotrBL:wd,rotr32H:md,rotr32L:bd,rotlSH:_d,rotlSL:Ed,rotlBH:xd,rotlBL:vd,add:Td,add3L:Bd,add3H:Ad,add4L:Nd,add4H:Sd,add5H:Rd,add5L:Id},[Od,Ud]=Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Zt=new Uint32Array(80),Xt=new Uint32Array(80);class Fd extends oo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:i,Ch:c,Cl:f,Dh:o,Dl:w,Eh:_,El:B,Fh:I,Fl:S,Gh:N,Gl:b,Hh:$,Hl:M}=this;return[t,r,n,i,c,f,o,w,_,B,I,S,N,b,$,M]}set(t,r,n,i,c,f,o,w,_,B,I,S,N,b,$,M){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=c|0,this.Cl=f|0,this.Dh=o|0,this.Dl=w|0,this.Eh=_|0,this.El=B|0,this.Fh=I|0,this.Fl=S|0,this.Gh=N|0,this.Gl=b|0,this.Hh=$|0,this.Hl=M|0}process(t,r){for(let q=0;q<16;q++,r+=4)Zt[q]=t.getUint32(r),Xt[q]=t.getUint32(r+=4);for(let q=16;q<80;q++){const ie=Zt[q-15]|0,k=Xt[q-15]|0,Z=Be.rotrSH(ie,k,1)^Be.rotrSH(ie,k,8)^Be.shrSH(ie,k,7),G=Be.rotrSL(ie,k,1)^Be.rotrSL(ie,k,8)^Be.shrSL(ie,k,7),Q=Zt[q-2]|0,te=Xt[q-2]|0,X=Be.rotrSH(Q,te,19)^Be.rotrBH(Q,te,61)^Be.shrSH(Q,te,6),he=Be.rotrSL(Q,te,19)^Be.rotrBL(Q,te,61)^Be.shrSL(Q,te,6),le=Be.add4L(G,he,Xt[q-7],Xt[q-16]),O=Be.add4H(le,Z,X,Zt[q-7],Zt[q-16]);Zt[q]=O|0,Xt[q]=le|0}let{Ah:n,Al:i,Bh:c,Bl:f,Ch:o,Cl:w,Dh:_,Dl:B,Eh:I,El:S,Fh:N,Fl:b,Gh:$,Gl:M,Hh:W,Hl:z}=this;for(let q=0;q<80;q++){const ie=Be.rotrSH(I,S,14)^Be.rotrSH(I,S,18)^Be.rotrBH(I,S,41),k=Be.rotrSL(I,S,14)^Be.rotrSL(I,S,18)^Be.rotrBL(I,S,41),Z=I&N^~I&$,G=S&b^~S&M,Q=Be.add5L(z,k,G,Ud[q],Xt[q]),te=Be.add5H(Q,W,ie,Z,Od[q],Zt[q]),X=Q|0,he=Be.rotrSH(n,i,28)^Be.rotrBH(n,i,34)^Be.rotrBH(n,i,39),le=Be.rotrSL(n,i,28)^Be.rotrBL(n,i,34)^Be.rotrBL(n,i,39),O=n&c^n&o^c&o,P=i&f^i&w^f&w;W=$|0,z=M|0,$=N|0,M=b|0,N=I|0,b=S|0,{h:I,l:S}=Be.add(_|0,B|0,te|0,X|0),_=o|0,B=w|0,o=c|0,w=f|0,c=n|0,f=i|0;const D=Be.add3L(X,le,P);n=Be.add3H(D,te,he,O),i=D|0}({h:n,l:i}=Be.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:c,l:f}=Be.add(this.Bh|0,this.Bl|0,c|0,f|0),{h:o,l:w}=Be.add(this.Ch|0,this.Cl|0,o|0,w|0),{h:_,l:B}=Be.add(this.Dh|0,this.Dl|0,_|0,B|0),{h:I,l:S}=Be.add(this.Eh|0,this.El|0,I|0,S|0),{h:N,l:b}=Be.add(this.Fh|0,this.Fl|0,N|0,b|0),{h:$,l:M}=Be.add(this.Gh|0,this.Gl|0,$|0,M|0),{h:W,l:z}=Be.add(this.Hh|0,this.Hl|0,W|0,z|0),this.set(n,i,c,f,o,w,_,B,I,S,N,b,$,M,W,z)}roundClean(){Zt.fill(0),Xt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Pd=Ms(()=>new Fd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _t=BigInt(0),ft=BigInt(1),Mn=BigInt(2),kd=BigInt(8),Cd={zip215:!0};function Md(e){const t=Uc(e);return Bn(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Vd(e){const t=Md(e),{Fp:r,n,prehash:i,hash:c,randomBytes:f,nByteLength:o,h:w}=t,_=Mn<<BigInt(o*8)-ft,B=r.create,I=An(t.n,t.nBitLength),S=t.uvRatio||((V,j)=>{try{return{isValid:!0,value:r.sqrt(V*r.inv(j))}}catch{return{isValid:!1,value:_t}}}),N=t.adjustScalarBytes||(V=>V),b=t.domain||((V,j,J)=>{if(on("phflag",J),j.length||J)throw new Error("Contexts/pre-hash are not supported");return V});function $(V,j){ir("coordinate "+V,j,_t,_)}function M(V){if(!(V instanceof q))throw new Error("ExtendedPoint expected")}const W=pn((V,j)=>{const{ex:J,ey:ee,ez:ge}=V,ae=V.is0();j==null&&(j=ae?kd:r.inv(ge));const fe=B(J*j),re=B(ee*j),E=B(ge*j);if(ae)return{x:_t,y:ft};if(E!==ft)throw new Error("invZ was invalid");return{x:fe,y:re}}),z=pn(V=>{const{a:j,d:J}=t;if(V.is0())throw new Error("bad point: ZERO");const{ex:ee,ey:ge,ez:ae,et:fe}=V,re=B(ee*ee),E=B(ge*ge),se=B(ae*ae),ue=B(se*se),pe=B(re*j),ne=B(se*B(pe+E)),ce=B(ue+B(J*B(re*E)));if(ne!==ce)throw new Error("bad point: equation left != right (1)");const m=B(ee*ge),s=B(ae*fe);if(m!==s)throw new Error("bad point: equation left != right (2)");return!0});class q{constructor(j,J,ee,ge){this.ex=j,this.ey=J,this.ez=ee,this.et=ge,$("x",j),$("y",J),$("z",ee),$("t",ge),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(j){if(j instanceof q)throw new Error("extended point not allowed");const{x:J,y:ee}=j||{};return $("x",J),$("y",ee),new q(J,ee,ft,B(J*ee))}static normalizeZ(j){const J=r.invertBatch(j.map(ee=>ee.ez));return j.map((ee,ge)=>ee.toAffine(J[ge])).map(q.fromAffine)}static msm(j,J){return Oc(q,I,j,J)}_setWindowSize(j){Z.setWindowSize(this,j)}assertValidity(){z(this)}equals(j){M(j);const{ex:J,ey:ee,ez:ge}=this,{ex:ae,ey:fe,ez:re}=j,E=B(J*re),se=B(ae*ge),ue=B(ee*re),pe=B(fe*ge);return E===se&&ue===pe}is0(){return this.equals(q.ZERO)}negate(){return new q(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){const{a:j}=t,{ex:J,ey:ee,ez:ge}=this,ae=B(J*J),fe=B(ee*ee),re=B(Mn*B(ge*ge)),E=B(j*ae),se=J+ee,ue=B(B(se*se)-ae-fe),pe=E+fe,ne=pe-re,ce=E-fe,m=B(ue*ne),s=B(pe*ce),h=B(ue*ce),x=B(ne*pe);return new q(m,s,x,h)}add(j){M(j);const{a:J,d:ee}=t,{ex:ge,ey:ae,ez:fe,et:re}=this,{ex:E,ey:se,ez:ue,et:pe}=j;if(J===BigInt(-1)){const v=B((ae-ge)*(se+E)),R=B((ae+ge)*(se-E)),H=B(R-v);if(H===_t)return this.double();const Y=B(fe*Mn*pe),oe=B(re*Mn*ue),ye=oe+Y,me=R+v,y=oe-Y,l=B(ye*H),d=B(me*y),A=B(ye*y),C=B(H*me);return new q(l,d,C,A)}const ne=B(ge*E),ce=B(ae*se),m=B(re*ee*pe),s=B(fe*ue),h=B((ge+ae)*(E+se)-ne-ce),x=s-m,T=s+m,U=B(ce-J*ne),p=B(h*x),a=B(T*U),u=B(h*U),g=B(x*T);return new q(p,a,g,u)}subtract(j){return this.add(j.negate())}wNAF(j){return Z.wNAFCached(this,j,q.normalizeZ)}multiply(j){const J=j;ir("scalar",J,ft,n);const{p:ee,f:ge}=this.wNAF(J);return q.normalizeZ([ee,ge])[0]}multiplyUnsafe(j,J=q.ZERO){const ee=j;return ir("scalar",ee,_t,n),ee===_t?k:this.is0()||ee===ft?this:Z.wNAFCachedUnsafe(this,ee,q.normalizeZ,J)}isSmallOrder(){return this.multiplyUnsafe(w).is0()}isTorsionFree(){return Z.unsafeLadder(this,n).is0()}toAffine(j){return W(this,j)}clearCofactor(){const{h:j}=t;return j===ft?this:this.multiplyUnsafe(j)}static fromHex(j,J=!1){const{d:ee,a:ge}=t,ae=r.BYTES;j=ut("pointHex",j,ae),on("zip215",J);const fe=j.slice(),re=j[ae-1];fe[ae-1]=re&-129;const E=cn(fe),se=J?_:r.ORDER;ir("pointHex.y",E,_t,se);const ue=B(E*E),pe=B(ue-ft),ne=B(ee*ue-ge);let{isValid:ce,value:m}=S(pe,ne);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const s=(m&ft)===ft,h=(re&128)!==0;if(!J&&m===_t&&h)throw new Error("Point.fromHex: x=0 and x_0=1");return h!==s&&(m=B(-m)),q.fromAffine({x:m,y:E})}static fromPrivateKey(j){return te(j).point}toRawBytes(){const{x:j,y:J}=this.toAffine(),ee=gi(J,r.BYTES);return ee[ee.length-1]|=j&ft?128:0,ee}toHex(){return Br(this.toRawBytes())}}q.BASE=new q(t.Gx,t.Gy,ft,B(t.Gx*t.Gy)),q.ZERO=new q(_t,ft,ft,_t);const{BASE:ie,ZERO:k}=q,Z=Rc(q,o*8);function G(V){return $e(V,n)}function Q(V){return G(cn(V))}function te(V){const j=r.BYTES;V=ut("private key",V,j);const J=ut("hashed private key",c(V),2*j),ee=N(J.slice(0,j)),ge=J.slice(j,2*j),ae=Q(ee),fe=ie.multiply(ae),re=fe.toRawBytes();return{head:ee,prefix:ge,scalar:ae,point:fe,pointBytes:re}}function X(V){return te(V).pointBytes}function he(V=new Uint8Array,...j){const J=Ke(...j);return Q(c(b(J,ut("context",V),!!i)))}function le(V,j,J={}){V=ut("message",V),i&&(V=i(V));const{prefix:ee,scalar:ge,pointBytes:ae}=te(j),fe=he(J.context,ee,V),re=ie.multiply(fe).toRawBytes(),E=he(J.context,re,ae,V),se=G(fe+E*ge);ir("signature.s",se,_t,n);const ue=Ke(re,gi(se,r.BYTES));return ut("result",ue,r.BYTES*2)}const O=Cd;function P(V,j,J,ee=O){const{context:ge,zip215:ae}=ee,fe=r.BYTES;V=ut("signature",V,2*fe),j=ut("message",j),J=ut("publicKey",J,fe),ae!==void 0&&on("zip215",ae),i&&(j=i(j));const re=cn(V.slice(fe,2*fe));let E,se,ue;try{E=q.fromHex(J,ae),se=q.fromHex(V.slice(0,fe),ae),ue=ie.multiplyUnsafe(re)}catch{return!1}if(!ae&&E.isSmallOrder())return!1;const pe=he(ge,se.toRawBytes(),E.toRawBytes(),j);return se.add(E.multiplyUnsafe(pe)).subtract(ue).clearCofactor().equals(q.ZERO)}return ie._setWindowSize(8),{CURVE:t,getPublicKey:X,sign:le,verify:P,ExtendedPoint:q,utils:{getExtendedPublicKey:te,randomPrivateKey:()=>f(r.BYTES),precompute(V=8,j=q.BASE){return j._setWindowSize(V),j.multiply(BigInt(3)),j}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Pa=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const $d=BigInt(1),ka=BigInt(2);BigInt(3);const qd=BigInt(5),Gd=BigInt(8);function jd(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),c=Qs,o=e*e%c*e%c,w=It(o,ka,c)*o%c,_=It(w,$d,c)*e%c,B=It(_,qd,c)*_%c,I=It(B,t,c)*B%c,S=It(I,r,c)*I%c,N=It(S,n,c)*S%c,b=It(N,i,c)*N%c,$=It(b,i,c)*N%c,M=It($,t,c)*B%c;return{pow_p_5_8:It(M,ka,c)*e%c,b2:o}}function Hd(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Ld(e,t){const r=Qs,n=$e(t*t*t,r),i=$e(n*n*t,r),c=jd(e*i).pow_p_5_8;let f=$e(e*n*c,r);const o=$e(t*f*f,r),w=f,_=$e(f*Pa,r),B=o===e,I=o===$e(-e,r),S=o===$e(-e*Pa,r);return B&&(f=w),(I||S)&&(f=_),Rf(f,r)&&(f=$e(-f,r)),{isValid:B||I,value:f}}const Kd=An(Qs,void 0,!0),zd={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Kd,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Gd,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Pd,randomBytes:ao,adjustScalarBytes:Hd,uvRatio:Ld},Or=Vd(zd);var Ca=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},ot=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},nt,tn,qc,Gc;class Dd{constructor(t={}){nt.set(this,void 0),tn.set(this,void 0),this[qc]=this.entries.bind(this),this[Gc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=t,i=Date.now();Ca(this,nt,new Map([...r].map(([c,f])=>[c,{value:f,timestamp:i}])),"f"),Ca(this,tn,n,"f")}prune(){const t=Date.now();for(const[r,n]of ot(this,nt,"f").entries())t-n.timestamp>ot(this,tn,"f")&&ot(this,nt,"f").delete(r);return this}set(t,r){this.prune();const n={value:r,timestamp:Date.now()};return ot(this,nt,"f").set(t,n),this}get(t){const r=ot(this,nt,"f").get(t);if(r!==void 0){if(Date.now()-r.timestamp>ot(this,tn,"f")){ot(this,nt,"f").delete(t);return}return r.value}}clear(){ot(this,nt,"f").clear()}entries(){const t=ot(this,nt,"f").entries();return function*(){for(const[n,i]of t)yield[n,i.value]}()}values(){const t=ot(this,nt,"f").values();return function*(){for(const n of t)yield n.value}()}keys(){return ot(this,nt,"f").keys()}forEach(t,r){for(const[n,i]of ot(this,nt,"f").entries())t.call(r,i.value,n,this)}has(t){return ot(this,nt,"f").has(t)}delete(t){return ot(this,nt,"f").delete(t)}get size(){return ot(this,nt,"f").size}}nt=new WeakMap,tn=new WeakMap,qc=Symbol.iterator,Gc=Symbol.toStringTag;const Ma=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Va=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Us=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},Wd=(e,t)=>{const r=Us(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const _i=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function jc(e,t){const r=2+Ma(e.byteLength+1),n=t.byteLength+r+e.byteLength;let i=0;const c=new Uint8Array(1+Ma(n)+n);return c[i++]=48,i+=Va(c,i,n),c.set(t,i),i+=t.byteLength,c[i++]=3,i+=Va(c,i,e.byteLength+1),c[i++]=0,c.set(new Uint8Array(e),i),c}const Hc=(e,t)=>{let r=0;const n=(o,w)=>{if(i[r++]!==o)throw new Error("Expected: "+w)},i=new Uint8Array(e);if(n(48,"sequence"),r+=Us(i,r),!En(i.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,n(3,"bit string");const c=Wd(i,r)-1;r+=Us(i,r),n(0,"0 padding");const f=i.slice(r);if(c!==f.length)throw new Error(`DER payload mismatch: Expected length ${c} actual length ${f.length}`);return f};var $a=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},qa=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Yn,Zn;let Lc=class rn{constructor(t){if(Yn.set(this,void 0),Zn.set(this,void 0),t.byteLength!==rn.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");$a(this,Yn,t,"f"),$a(this,Zn,rn.derEncode(t),"f")}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new rn(t)}static fromDer(t){return new rn(this.derDecode(t))}static derEncode(t){return jc(t,_i).buffer}static derDecode(t){const r=Hc(t,_i);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return qa(this,Yn,"f")}get derKey(){return qa(this,Zn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}};Yn=new WeakMap,Zn=new WeakMap;Lc.RAW_KEY_LENGTH=32;class Yd{constructor(){this.observers=[]}subscribe(t){this.observers.push(t)}unsubscribe(t){this.observers=this.observers.filter(r=>r!==t)}notify(t,...r){this.observers.forEach(n=>n(t,...r))}}class Zd extends Yd{constructor(){super()}print(t,...r){this.notify({message:t,level:"info"},...r)}warn(t,...r){this.notify({message:t,level:"warn"},...r)}error(t,r,...n){this.notify({message:t,level:"error",error:r},...n)}}var Rt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},rt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ot,Xn,Jn,Qn,ei,ti,ri,ni,Ur;const Kc=.5,zc=1.5,Dc=500,Wc=6e4,Yc=9e5,Zc=10;class Ci{constructor(t=Ci.default){Ot.set(this,void 0),Xn.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),ei.set(this,void 0),ti.set(this,void 0),ri.set(this,void 0),ni.set(this,void 0),Ur.set(this,0);const{initialInterval:r=Dc,randomizationFactor:n=Kc,multiplier:i=zc,maxInterval:c=Wc,maxElapsedTime:f=Yc,maxIterations:o=Zc,date:w=Date}=t;Rt(this,Ot,r,"f"),Rt(this,Xn,n,"f"),Rt(this,Jn,i,"f"),Rt(this,Qn,c,"f"),Rt(this,ni,w,"f"),Rt(this,ei,w.now(),"f"),Rt(this,ti,f,"f"),Rt(this,ri,o,"f")}get ellapsedTimeInMsec(){return rt(this,ni,"f").now()-rt(this,ei,"f")}get currentInterval(){return rt(this,Ot,"f")}get count(){return rt(this,Ur,"f")}get randomValueFromInterval(){const t=rt(this,Xn,"f")*rt(this,Ot,"f"),r=rt(this,Ot,"f")-t,n=rt(this,Ot,"f")+t;return Math.random()*(n-r)+r}incrementCurrentInterval(){var t;return Rt(this,Ot,Math.min(rt(this,Ot,"f")*rt(this,Jn,"f"),rt(this,Qn,"f")),"f"),Rt(this,Ur,(t=rt(this,Ur,"f"),t++,t),"f"),rt(this,Ot,"f")}next(){return this.ellapsedTimeInMsec>=rt(this,ti,"f")||rt(this,Ur,"f")>=rt(this,ri,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Ot=new WeakMap,Xn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,ni=new WeakMap,Ur=new WeakMap;Ci.default={initialInterval:Dc,randomizationFactor:Kc,multiplier:zc,maxInterval:Wc,maxElapsedTime:Yc,maxIterations:Zc,date:Date};var et=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},de=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},it,hr,Gr,Ut,Vt,qr,nn,Fr,xt,vt,pr,yr,sn,Pr,kr,gr,br,Xc,ii,si,wr,$t;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})($t||($t={}));const Vn=60*1e3,Xd="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Jd="aaaaa-aa",Qd="ic0.app",e0=".ic0.app",t0="icp0.io",r0=".icp0.io",n0="icp-api.io",i0=".icp-api.io";class as extends qe{constructor(t){super(t),this.message=t}}class $n extends qe{constructor(t){super(t),this.message=t}}function s0(){let e;if(typeof window<"u")if(window.fetch)e=window.fetch.bind(window);else throw new as("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)e=global.fetch.bind(global);else throw new as("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new as("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function a0(e){let t;if(e!==void 0)!e.match(/^[a-z]+:/)&&typeof window<"u"?t=new URL(window.location.protocol+"//"+e):t=new URL(e);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,c=i?.hostname;let f;c&&typeof c=="string"&&(n.some(o=>c.endsWith(o))?f=c:f=r.find(o=>c.endsWith(o))),i&&f?t=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):t=new URL("https://icp-api.io")}return t.toString()}class _r{constructor(t={}){var r,n;it.add(this),hr.set(this,null),Gr.set(this,!1),Ut.set(this,void 0),Vt.set(this,void 0),qr.set(this,void 0),nn.set(this,void 0),Fr.set(this,0),xt.set(this,void 0),vt.set(this,void 0),pr.set(this,void 0),yr.set(this,void 0),this._isAgent=!0,this.config={},sn.set(this,0),this.log=new Zd,Pr.set(this,[]),kr.set(this,[]),gr.set(this,new Dd({expirationTime:5*60*1e3})),br.set(this,!0),si.set(this,(f,o)=>{if(de(this,br,"f")===!1)return f;if(!o)throw new Pt("Invalid signature from replica signed query: no matching node key found.");const{status:w,signatures:_=[],requestId:B}=f,I=new TextEncoder().encode("\vic-response");for(const S of _){const{timestamp:N,identity:b}=S,$=Te.fromUint8Array(b).toText();let M;if(w==="replied"){const{reply:k}=f;M=yi({status:w,reply:k,timestamp:BigInt(N),request_id:B})}else if(w==="rejected"){const{reject_code:k,reject_message:Z,error_code:G}=f;M=yi({status:w,reject_code:k,reject_message:Z,error_code:G,timestamp:BigInt(N),request_id:B})}else throw new Error(`Unknown status: ${w}`);const W=At(I,new Uint8Array(M)),z=o?.nodeKeys.get($);if(!z)throw new Pt("Invalid signature from replica signed query: no matching node key found.");const q=Lc.fromDer(z).rawKey;if(Or.verify(S.signature,new Uint8Array(W),new Uint8Array(q)))return f;throw new Pt(`Invalid signature from replica ${$} signed query.`)}return f}),this.config=t,et(this,Vt,t.fetch||s0()||fetch.bind(global),"f"),et(this,qr,t.fetchOptions,"f"),et(this,nn,t.callOptions,"f"),et(this,Gr,(r=t.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),t.rootKey?this.rootKey=t.rootKey:de(this,Gr,"f")?this.rootKey=null:this.rootKey=Lt(Xd);const i=a0(t.host);this.host=new URL(i),t.verifyQuerySignatures!==void 0&&et(this,br,t.verifyQuerySignatures,"f"),et(this,vt,(n=t.retryTimes)!==null&&n!==void 0?n:3,"f");const c=()=>new Ci({maxIterations:de(this,vt,"f")});if(et(this,pr,t.backoffStrategy||c,"f"),this.host.hostname.endsWith(e0)?this.host.hostname=Qd:this.host.hostname.endsWith(r0)?this.host.hostname=t0:this.host.hostname.endsWith(i0)&&(this.host.hostname=n0),t.credentials){const{name:f,password:o}=t.credentials;et(this,xt,`${f}${o?":"+o:""}`,"f")}if(et(this,Ut,Promise.resolve(t.identity||new hn),"f"),t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes>5)throw new qe(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);if(t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes<=0)throw new qe(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);et(this,yr,t.ingressExpiryInMinutes||5,"f"),this.addTransform("update",ga(As)),t.useQueryNonces&&this.addTransform("query",ga(As)),t.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return de(this,sn,"f")}static createSync(t={}){return new this(Object.assign({},t))}static async create(t={shouldFetchRootKey:!1}){const r=_r.createSync(t),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&t.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(t){var r;try{return"config"in t?await _r.create(t.config):await _r.create({fetch:t._fetch,fetchOptions:t._fetchOptions,callOptions:t._callOptions,host:t._host.toString(),identity:(r=t._identity)!==null&&r!==void 0?r:void 0})}catch{throw new qe("Failed to create agent from provided agent")}}isLocal(){const t=this.host.hostname;return t==="127.0.0.1"||t.endsWith("127.0.0.1")}addTransform(t,r,n=r.priority||0){if(t==="update"){const i=de(this,kr,"f").findIndex(c=>(c.priority||0)<n);de(this,kr,"f").splice(i>=0?i:de(this,kr,"f").length,0,Object.assign(r,{priority:n}))}else if(t==="query"){const i=de(this,Pr,"f").findIndex(c=>(c.priority||0)<n);de(this,Pr,"f").splice(i>=0?i:de(this,Pr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!de(this,Ut,"f"))throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");return(await de(this,Ut,"f")).getPrincipal()}async call(t,r,n){var i,c;await de(this,it,"m",wr).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,o=await(n!==void 0?await n:await de(this,Ut,"f"));if(!o)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const w=Te.from(t),_=r.effectiveCanisterId?Te.from(r.effectiveCanisterId):w,B=o.getPrincipal()||Te.anonymous();let I=new On(de(this,yr,"f")*Vn);Math.abs(de(this,Fr,"f"))>1e3*30&&(I=new On(de(this,yr,"f")*Vn+de(this,Fr,"f")));const S={request_type:Bs.Call,canister_id:w,method_name:r.methodName,arg:r.arg,sender:B,ingress_expiry:I};let N=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},de(this,xt,"f")?{Authorization:"Basic "+btoa(de(this,xt,"f"))}:{})},endpoint:"call",body:S});const b=N.body.nonce?$(N.body.nonce):void 0;S.nonce=b;function $(q){return new Uint8Array(q)}N=await o.transformRequest(N);const M=Zi(N.body),W=de(this,pr,"f").call(this),z=dn(S);try{const q=()=>(this.log.print(`fetching "/api/v3/canister/${_.toText()}/call" with request:`,N),de(this,Vt,"f").call(this,""+new URL(`/api/v3/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},de(this,nn,"f")),N.request),{body:M}))),ie=()=>(this.log.print(`fetching "/api/v2/canister/${_.toText()}/call" with request:`,N),de(this,Vt,"f").call(this,""+new URL(`/api/v2/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},de(this,nn,"f")),N.request),{body:M}))),Z=await de(this,it,"m",ii).call(this,{request:f?q:ie,backoff:W,tries:0}),G=await Z.arrayBuffer(),Q=Z.status===200&&G.byteLength>0?jt(G):null;if(Q&&"certificate"in Q){const te=await this.parseTimeFromResponse({certificate:Q.certificate});et(this,sn,te,"f")}return{requestId:z,response:{ok:Z.ok,status:Z.status,statusText:Z.statusText,body:Q,headers:Qr(Z.headers)},requestDetails:S}}catch(q){if(q.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(t,Object.assign(Object.assign({},r),{callSync:!1}),n);const ie=`Error while making call: ${(c=q.message)!==null&&c!==void 0?c:String(q)}`,k=new bf(ie,q,Ce(z),Ce(N.body.sender_pubkey),Ce(N.body.sender_sig),String(N.body.content.ingress_expiry._value));throw this.log.error(ie,k),k}}async query(t,r,n){var i,c,f,o;await de(this,it,"m",wr).call(this);const w=de(this,pr,"f").call(this),_=r.effectiveCanisterId?Te.from(r.effectiveCanisterId):Te.from(t);this.log.print(`ecid ${_.toString()}`),this.log.print(`canisterId ${t.toString()}`);let B,I;const S=await(n!==void 0?n:de(this,Ut,"f"));if(!S)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const N=Te.from(t),b=S?.getPrincipal()||Te.anonymous(),$={request_type:"query",canister_id:N,method_name:r.methodName,arg:r.arg,sender:b,ingress_expiry:new On(de(this,yr,"f")*Vn)},M=dn($);B=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},de(this,xt,"f")?{Authorization:"Basic "+btoa(de(this,xt,"f"))}:{})},endpoint:"read",body:$}),B=await S?.transformRequest(B);const W=Zi(B.body),z={canister:N.toText(),ecid:_,transformedRequest:B,body:W,requestId:M,backoff:w,tries:0},q=async()=>({requestDetails:$,query:await de(this,it,"m",Xc).call(this,z)}),ie=async()=>{if(!de(this,br,"f"))return;const k=de(this,gr,"f").get(_.toString());return k||(await this.fetchSubnetKeys(_.toString()),de(this,gr,"f").get(_.toString()))};try{const[k,Z]=await Promise.all([q(),ie()]);I=k;const{requestDetails:G,query:Q}=I,te=Object.assign(Object.assign({},Q),{requestDetails:G});if(this.log.print("Query response:",te),!de(this,br,"f"))return te;try{return de(this,si,"f").call(this,te,Z)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),de(this,gr,"f").delete(t.toString()),await this.fetchSubnetKeys(_.toString());const he=de(this,gr,"f").get(t.toString());if(!he)throw new Pt("Invalid signature from replica signed query: no matching node key found.");return de(this,si,"f").call(this,te,he)}}catch(k){const Z=`Error while making call: ${(i=k.message)!==null&&i!==void 0?i:String(k)}`,G=new _f(Z,k,String(M),Ce((c=B?.body)===null||c===void 0?void 0:c.sender_pubkey),Ce((f=B?.body)===null||f===void 0?void 0:f.sender_sig),String((o=B?.body)===null||o===void 0?void 0:o.content.ingress_expiry._value));throw this.log.error(Z,G),G}}async createReadStateRequest(t,r){await de(this,it,"m",wr).call(this);const n=await(r!==void 0?await r:await de(this,Ut,"f"));if(!n)throw new $n("This identity has expired due this application's security policy. Please refresh your authentication.");const i=n?.getPrincipal()||Te.anonymous(),c=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},de(this,xt,"f")?{Authorization:"Basic "+btoa(de(this,xt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:i,ingress_expiry:new On(de(this,yr,"f")*Vn)}});return n?.transformRequest(c)}async readState(t,r,n,i){var c,f,o,w;function _($){for(const M of $.paths){const[W,z]=M,q=new TextEncoder().encode("request_status");if(En(W,q))return z}}const B=_(r);await de(this,it,"m",wr).call(this);const I=typeof t=="string"?Te.fromText(t):t,S=i??await this.createReadStateRequest(r,n),N=Zi(S.body);this.log.print(`fetching "/api/v2/canister/${I}/read_state" with request:`,S);const b=de(this,pr,"f").call(this);try{const $=await de(this,it,"m",ii).call(this,{request:()=>de(this,Vt,"f").call(this,""+new URL(`/api/v2/canister/${I.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},de(this,qr,"f")),S.request),{body:N})),backoff:b,tries:0});if(!$.ok)throw new Error(`Server returned an error:
  Code: ${$.status} (${$.statusText})
  Body: ${await $.text()}
`);const M=jt(await $.arrayBuffer());this.log.print("Read state response:",M);const W=await this.parseTimeFromResponse(M);return W>0&&(this.log.print("Read state response time:",W),et(this,sn,W,"f")),M}catch($){const M=`Caught exception while attempting to read state: ${(c=$.message)!==null&&c!==void 0?c:String($)}`,W=new Ef(M,$,String(B),Ce((f=S?.body)===null||f===void 0?void 0:f.sender_pubkey),Ce((o=S?.body)===null||o===void 0?void 0:o.sender_sig),String((w=S?.body)===null||w===void 0?void 0:w.content.ingress_expiry._value));throw this.log.error(M,W),W}}async parseTimeFromResponse(t){let r;if(t.certificate){const n=jt(t.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Kr(["time"],r);if(i.status!==ze.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const c=Js($s(i.value));return this.log.print("Time from response:",c),this.log.print("Time from response in milliseconds:",Number(c)),Number(c)}else this.log.warn("No certificate found in response");return 0}async syncTime(t){await de(this,it,"m",wr).call(this);const r=await Ru(()=>Promise.resolve().then(()=>ud),void 0,import.meta.url),n=Date.now();try{t||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=_r.createSync({identity:new hn,host:this.host.toString(),fetch:de(this,Vt,"f"),retryTimes:0}),f=(await r.request({canisterId:t??Te.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(et(this,Fr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${de(this,Fr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const t=de(this,xt,"f")?{Authorization:"Basic "+btoa(de(this,xt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=de(this,pr,"f").call(this),n=await de(this,it,"m",ii).call(this,{backoff:r,request:()=>de(this,Vt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:t},de(this,qr,"f"))),tries:0});return jt(await n.arrayBuffer())}async fetchRootKey(){let t;return de(this,hr,"f")?t=await de(this,hr,"f"):(et(this,hr,new Promise((r,n)=>{this.status().then(i=>{const c=i.root_key;this.rootKey=c,r(c)}).catch(n)}),"f"),t=await de(this,hr,"f")),et(this,hr,null,"f"),t}invalidateIdentity(){et(this,Ut,null,"f")}replaceIdentity(t){et(this,Ut,Promise.resolve(t),"f")}async fetchSubnetKeys(t){await de(this,it,"m",wr).call(this);const r=Te.from(t),i=(await Cc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return de(this,gr,"f").set(r.toText(),i),i}_transform(t){let r=Promise.resolve(t);if(t.endpoint==="call")for(const n of de(this,kr,"f"))r=r.then(i=>n(i).then(c=>c||i));else for(const n of de(this,Pr,"f"))r=r.then(i=>n(i).then(c=>c||i));return r}}hr=new WeakMap,Gr=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,qr=new WeakMap,nn=new WeakMap,Fr=new WeakMap,xt=new WeakMap,vt=new WeakMap,pr=new WeakMap,yr=new WeakMap,sn=new WeakMap,Pr=new WeakMap,kr=new WeakMap,gr=new WeakMap,br=new WeakMap,si=new WeakMap,it=new WeakSet,Xc=async function e(t){var r,n;const{ecid:i,transformedRequest:c,body:f,requestId:o,backoff:w,tries:_}=t,B=_===0?0:w.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:_,backoff:w,delay:B}),B===null)throw new qe(`Timestamp failed to pass the watermark after retrying the configured ${de(this,vt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);B>0&&await new Promise(b=>setTimeout(b,B));let I;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,c);const b=await de(this,Vt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},de(this,qr,"f")),c.request),{body:f}));if(b.status===200){const $=jt(await b.arrayBuffer());I=Object.assign(Object.assign({},$),{httpDetails:{ok:b.ok,status:b.status,statusText:b.statusText,headers:Qr(b.headers)},requestId:o})}else throw new Xi(`Gateway returned an error:
  Code: ${b.status} (${b.statusText})
  Body: ${await b.text()}
`,{ok:b.ok,status:b.status,statusText:b.statusText,headers:Qr(b.headers)})}catch(b){if(_<de(this,vt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${b}
  Retrying query.`),await de(this,it,"m",e).call(this,Object.assign(Object.assign({},t),{tries:_+1}));throw b}const S=(n=(r=I.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!de(this,br,"f"))return I;if(!S)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const N=Number(BigInt(S)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:N}),Number(this.waterMark)>N){const b=new qe("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",b,{timestamp:S,waterMark:this.waterMark}),_<de(this,vt,"f"))return await de(this,it,"m",e).call(this,Object.assign(Object.assign({},t),{tries:_+1}));throw new qe(`Timestamp failed to pass the watermark after retrying the configured ${de(this,vt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return I},ii=async function e(t){const{request:r,backoff:n,tries:i}=t,c=i===0?0:n.next();if(c===null)throw new qe(`Timestamp failed to pass the watermark after retrying the configured ${de(this,vt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(_=>setTimeout(_,c));let f;try{f=await r()}catch(_){if(de(this,vt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${_}
  Retrying request.`),await de(this,it,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw _}if(f.ok)return f;const o=await f.clone().text(),w=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${o}
`;if(f.status===404&&f.url.includes("api/v3"))throw new Xi("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:Qr(f.headers)});if(i<de(this,vt,"f"))return await de(this,it,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw new Xi(w,{ok:f.ok,status:f.status,statusText:f.statusText,headers:Qr(f.headers)})},wr=async function(){if(!this.rootKey)if(this.rootKey===null&&de(this,Gr,"f"))await this.fetchRootKey();else throw new qe(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${de(this,Gr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var Ga;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(Ga||(Ga={}));function ja(){const e=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}const o0=5*60*1e3;function Jc(){return d0(u0(c0(),1e3),f0(1e3,1.2),l0(o0))}function c0(){let e=!0;return async()=>e?(e=!1,!0):!1}function u0(e,t){return async(r,n,i)=>{if(await e(r,n,i))return new Promise(c=>setTimeout(c,t))}}function l0(e){const t=Date.now()+e;return async(r,n,i)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${Ce(n)}
  Request status: ${i}
`)}}function f0(e,t){let r=e;return()=>new Promise(n=>setTimeout(()=>{r*=t,n()},r))}function d0(...e){return async(t,r,n)=>{for(const i of e)await i(t,r,n)}}async function Qc(e,t,r,n=Jc(),i,c){var f;const o=[new TextEncoder().encode("request_status"),r],w=i??await((f=e.createReadStateRequest)===null||f===void 0?void 0:f.call(e,{paths:[o]})),_=await e.readState(t,{paths:[o]},void 0,w);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");const B=await Er.create({certificate:_.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:c}),I=wt(B.lookup([...o,new TextEncoder().encode("status")]));let S;switch(typeof I>"u"?S=$t.Unknown:S=new TextDecoder().decode(I),S){case $t.Replied:return{reply:wt(B.lookup([...o,"reply"])),certificate:B};case $t.Received:case $t.Unknown:case $t.Processing:return await n(t,r,S),Qc(e,t,r,n,w,c);case $t.Rejected:{const N=new Uint8Array(wt(B.lookup([...o,"reject_code"])))[0],b=new TextDecoder().decode(wt(B.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Ce(r)}
  Reject code: ${N}
  Reject text: ${b}
`)}case $t.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Ce(r)}
`)}throw new Error("unreachable")}const h0=({IDL:e})=>{const t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),i=e.Nat64,c=i,f=e.Nat32,o=e.Record({start_height:f,end_height:e.Opt(f),network:t}),w=e.Vec(e.Nat8),_=e.Record({tip_height:f,block_headers:e.Vec(w)}),B=e.Record({network:t}),I=e.Nat64,S=e.Vec(I),N=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),b=e.Vec(e.Nat8),$=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),M=e.Record({height:e.Nat32,value:i,outpoint:$}),W=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:f,tip_block_hash:b,utxos:e.Vec(M)}),z=e.Record({transaction:e.Vec(e.Nat8),network:t}),q=e.Principal,ie=e.Record({canister_id:q,num_requested_changes:e.Opt(e.Nat64)}),k=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),Z=e.Vec(e.Nat8),G=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:Z}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),Q=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:k,details:G}),te=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(Q),total_num_changes:e.Nat64}),X=e.Record({canister_id:q}),he=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),le=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:he,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),O=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:le,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),P=e.Record({canister_id:q}),D=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(he),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),V=e.Record({settings:e.Opt(D),sender_canister_version:e.Opt(e.Nat64)}),j=e.Record({canister_id:q}),J=e.Record({canister_id:q}),ee=e.Record({canister_id:q,snapshot_id:Z}),ge=e.Record({canister_id:q}),ae=e.Variant({secp256k1:e.Null}),fe=e.Record({key_id:e.Record({name:e.Text,curve:ae}),canister_id:e.Opt(q),derivation_path:e.Vec(e.Vec(e.Nat8))}),re=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),E=e.Record({canister_id:q}),se=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),ue=e.Record({canister_log_records:e.Vec(se)}),pe=e.Record({value:e.Text,name:e.Text}),ne=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(pe)}),ce=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:ne})],[ne],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(pe)}),m=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),s=e.Record({hash:e.Vec(e.Nat8)}),h=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:m,chunk_hashes_list:e.Vec(s),target_canister:q,store_canister:e.Opt(q),sender_canister_version:e.Opt(e.Nat64)}),x=e.Vec(e.Nat8),T=e.Record({arg:e.Vec(e.Nat8),wasm_module:x,mode:m,canister_id:q,sender_canister_version:e.Opt(e.Nat64)}),U=e.Record({canister_id:q}),p=e.Record({id:Z,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),a=e.Vec(p),u=e.Record({canister_id:q,sender_canister_version:e.Opt(e.Nat64),snapshot_id:Z}),g=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),v=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),R=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(v)})),H=e.Record({settings:e.Opt(D),specified_id:e.Opt(q),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),Y=e.Record({canister_id:q}),oe=e.Record({canister_id:q,amount:e.Nat}),ye=e.Vec(e.Nat8),me=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),y=e.Record({key_id:e.Record({algorithm:me,name:e.Text}),canister_id:e.Opt(q),derivation_path:e.Vec(e.Vec(e.Nat8))}),l=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),d=e.Record({key_id:e.Record({name:e.Text,curve:ae}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),A=e.Record({signature:e.Vec(e.Nat8)}),C=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),K=e.Record({aux:e.Opt(C),key_id:e.Record({algorithm:me,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),L=e.Record({signature:e.Vec(e.Nat8)}),_e=e.Record({canister_id:q}),ve=e.Record({canister_id:q}),xe=e.Record({canister_id:q}),Ee=e.Vec(s),Re=e.Record({subnet_id:e.Principal}),ke=e.Record({replica_version:e.Text}),$i=e.Record({replace_snapshot:e.Opt(Z),canister_id:q}),qi=p,Gi=e.Record({canister_id:q,sender_canister_version:e.Opt(e.Nat64)}),ji=e.Record({canister_id:e.Principal,settings:D,sender_canister_version:e.Opt(e.Nat64)}),Hi=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),zt=s;return e.Service({bitcoin_get_balance:e.Func([n],[c],[]),bitcoin_get_block_headers:e.Func([o],[_],[]),bitcoin_get_current_fee_percentiles:e.Func([B],[S],[]),bitcoin_get_utxos:e.Func([N],[W],[]),bitcoin_send_transaction:e.Func([z],[],[]),canister_info:e.Func([ie],[te],[]),canister_status:e.Func([X],[O],[]),clear_chunk_store:e.Func([P],[],[]),create_canister:e.Func([V],[j],[]),delete_canister:e.Func([J],[],[]),delete_canister_snapshot:e.Func([ee],[],[]),deposit_cycles:e.Func([ge],[],[]),ecdsa_public_key:e.Func([fe],[re],[]),fetch_canister_logs:e.Func([E],[ue],["query"]),http_request:e.Func([ce],[ne],[]),install_chunked_code:e.Func([h],[],[]),install_code:e.Func([T],[],[]),list_canister_snapshots:e.Func([U],[a],[]),load_canister_snapshot:e.Func([u],[],[]),node_metrics_history:e.Func([g],[R],[]),provisional_create_canister_with_cycles:e.Func([H],[Y],[]),provisional_top_up_canister:e.Func([oe],[],[]),raw_rand:e.Func([],[ye],[]),schnorr_public_key:e.Func([y],[l],[]),sign_with_ecdsa:e.Func([d],[A],[]),sign_with_schnorr:e.Func([K],[L],[]),start_canister:e.Func([_e],[],[]),stop_canister:e.Func([ve],[],[]),stored_chunks:e.Func([xe],[Ee],[]),subnet_info:e.Func([Re],[ke],[]),take_canister_snapshot:e.Func([$i],[qi],[]),uninstall_code:e.Func([Gi],[],[]),update_settings:e.Func([ji],[],[]),upload_chunk:e.Func([Hi],[zt],[])})};class eu extends qe{constructor(t,r,n,i){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(c=>`  "${c}": ${JSON.stringify(i[c])}`)].join(`
`)),this.canisterId=t,this.methodName=r,this.type=n,this.props=i}}class p0 extends eu{constructor(t,r,n){var i;super(t,r,"query",{Status:n.status,Code:(i=ys[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class Ha extends eu{constructor(t,r,n,i,c,f,o){super(t,r,"update",Object.assign({"Request ID":Ce(n)},i.body?Object.assign(Object.assign({},o?{"Error code":o}:{}),{"Reject code":String(c),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=c,this.reject_message=f,this.error_code=o}}const gt=Symbol.for("ic-agent-metadata");class wn{constructor(t){this[gt]=Object.freeze(t)}static agentOf(t){return t[gt].config.agent}static interfaceOf(t){return t[gt].service}static canisterIdOf(t){return Te.from(t[gt].config.canisterId)}static async install(t,r){const n=t.mode===void 0?{install:null}:t.mode,i=t.arg?[...new Uint8Array(t.arg)]:[],c=[...new Uint8Array(t.module)],f=typeof r.canisterId=="string"?Te.fromText(r.canisterId):r.canisterId;await La(r).install_code({mode:n,arg:i,wasm_module:c,canister_id:f,sender_canister_version:[]})}static async createCanister(t,r){function n(c){return[{controllers:c.controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await La(t||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(t,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(t,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(t,r){const n=t({IDL:El});class i extends wn{constructor(f){if(!f.canisterId)throw new qe(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof f.canisterId=="string"?Te.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},tu),f),{canisterId:o}),service:n});for(const[w,_]of n._fields)r?.httpDetails&&_.annotations.push(Fs),r?.certificate&&_.annotations.push(ru),this[w]=y0(this,w,_,f.blsVerify)}}return i}static createActor(t,r){if(!r.canisterId)throw new qe(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(r)}static createActorWithHttpDetails(t,r){return new(this.createActorClass(t,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(t,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,n))(r)}}function Rr(e,t){const r=vo(e,ro.Buffer.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const tu={pollingStrategyFactory:Jc},Fs="http-details",ru="certificate";function y0(e,t,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...o)=>{var w,_;f=Object.assign(Object.assign({},f),(_=(w=e[gt].config).queryTransform)===null||_===void 0?void 0:_.call(w,t,o,Object.assign(Object.assign({},e[gt].config),f)));const B=f.agent||e[gt].config.agent||ja(),I=Te.from(f.canisterId||e[gt].config.canisterId),S=ws(r.argTypes,o),N=await B.query(I,{methodName:t,arg:S,effectiveCanisterId:f.effectiveCanisterId}),b=Object.assign(Object.assign({},N.httpDetails),{requestDetails:N.requestDetails});switch(N.status){case"rejected":throw new p0(I,t,N);case"replied":return r.annotations.includes(Fs)?{httpDetails:b,result:Rr(r.retTypes,N.reply.arg)}:Rr(r.retTypes,N.reply.arg)}}:i=async(f,...o)=>{var w,_;f=Object.assign(Object.assign({},f),(_=(w=e[gt].config).callTransform)===null||_===void 0?void 0:_.call(w,t,o,Object.assign(Object.assign({},e[gt].config),f)));const B=f.agent||e[gt].config.agent||ja(),{canisterId:I,effectiveCanisterId:S,pollingStrategyFactory:N}=Object.assign(Object.assign(Object.assign({},tu),e[gt].config),f),b=Te.from(I),$=S!==void 0?Te.from(S):b,M=ws(r.argTypes,o),{requestId:W,response:z,requestDetails:q}=await B.call(b,{methodName:t,arg:M,effectiveCanisterId:$});let ie,k;if(z.body&&z.body.certificate){if(B.rootKey==null)throw new Error("Agent is missing root key");const te=z.body.certificate;k=await Er.create({certificate:di(te),rootKey:B.rootKey,canisterId:Te.from(I),blsVerify:n});const X=[new TextEncoder().encode("request_status"),W];switch(new TextDecoder().decode(wt(k.lookup([...X,"status"])))){case"replied":ie=wt(k.lookup([...X,"reply"]));break;case"rejected":{const le=new Uint8Array(wt(k.lookup([...X,"reject_code"])))[0],O=new TextDecoder().decode(wt(k.lookup([...X,"reject_message"]))),P=wt(k.lookup([...X,"error_code"])),D=P?new TextDecoder().decode(P):void 0;throw new Ha(b,t,W,z,le,O,D)}}}else if(z.body&&"reject_message"in z.body){const{reject_code:te,reject_message:X,error_code:he}=z.body;throw new Ha(b,t,W,z,te,X,he)}if(z.status===202){const te=N(),X=await Qc(B,$,W,te,n);k=X.certificate,ie=X.reply}const Z=r.annotations.includes(Fs),G=r.annotations.includes(ru),Q=Object.assign(Object.assign({},z),{requestDetails:q});if(ie!==void 0)return Z&&G?{httpDetails:Q,certificate:k,result:Rr(r.retTypes,ie)}:G?{certificate:k,result:Rr(r.retTypes,ie)}:Z?{httpDetails:Q,result:Rr(r.retTypes,ie)}:Rr(r.retTypes,ie);if(r.retTypes.length===0)return Z?{httpDetails:z,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const c=(...f)=>i({},...f);return c.withOptions=f=>(...o)=>i(f,...o),c}function La(e){function t(r,n){if(e.effectiveCanisterId)return{effectiveCanisterId:Te.from(e.effectiveCanisterId)};const i=n[0];let c=Te.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(c=Te.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(c=Te.from(i.canister_id)),{effectiveCanisterId:c}}return wn.createActor(h0,Object.assign(Object.assign(Object.assign({},e),{canisterId:Te.fromHex("")}),{callTransform:t,queryTransform:t}))}var Ei=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},rr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ai,oi,Cr,Mr;function Ka(e){return e!==null&&typeof e=="object"}class Ht{constructor(t){if(ai.set(this,void 0),oi.set(this,void 0),t.byteLength!==Ht.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");Ei(this,ai,t,"f"),Ei(this,oi,Ht.derEncode(t),"f")}static from(t){if(typeof t=="string"){const r=Lt(t);return this.fromRaw(r)}else if(Ka(t)){const r=t;if(Ka(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const n=r;return this.fromRaw($s(n.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(t){return new Ht(t)}static fromDer(t){return new Ht(this.derDecode(t))}static derEncode(t){const r=jc(t,_i).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(t){const r=Hc(t,_i);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return rr(this,ai,"f")}get derKey(){return rr(this,oi,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}ai=new WeakMap,oi=new WeakMap;Ht.RAW_KEY_LENGTH=32;class or extends zs{constructor(t,r){super(),Cr.set(this,void 0),Mr.set(this,void 0),Ei(this,Cr,Ht.from(t),"f"),Ei(this,Mr,new Uint8Array(r),"f")}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");t||(t=Or.utils.randomPrivateKey()),En(t,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let i=0;i<32;i++)r[i]=new Uint8Array(t)[i];const n=Or.getPublicKey(r);return or.fromKeyPair(n,r)}static fromParsedJson(t){const[r,n]=t;return new or(Ht.fromDer(Lt(r)),Lt(n))}static fromJSON(t){const r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new or(Ht.fromRaw(t),r)}static fromSecretKey(t){const r=Or.getPublicKey(new Uint8Array(t));return or.fromKeyPair(r,t)}toJSON(){return[Ce(rr(this,Cr,"f").toDer()),Ce(rr(this,Mr,"f"))]}getKeyPair(){return{secretKey:rr(this,Mr,"f"),publicKey:rr(this,Cr,"f")}}getPublicKey(){return rr(this,Cr,"f")}async sign(t){const r=new Uint8Array(t),n=an(Or.sign(r,rr(this,Mr,"f").slice(0,32)));return Object.defineProperty(n,"__signature__",{enumerable:!1,value:void 0}),n}static verify(t,r,n){const[i,c,f]=[t,r,n].map(o=>(typeof o=="string"&&(o=Lt(o)),o instanceof Uint8Array&&(o=o.buffer),new Uint8Array(o)));return Or.verify(c,i,f)}}Cr=new WeakMap,Mr=new WeakMap;class ea extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,ea.prototype)}}function za(e){if(typeof global<"u"&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new ea("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class xi extends zs{constructor(t,r,n){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=n}static async generate(t){const{extractable:r=!1,keyUsages:n=["sign","verify"],subtleCrypto:i}=t??{},c=za(i),f=await c.generateKey({name:"ECDSA",namedCurve:"P-256"},r,n),o=await c.exportKey("spki",f.publicKey);return new this(f,o,c)}static async fromKeyPair(t,r){const n=za(r),i=await n.exportKey("spki",t.publicKey);return new xi(t,i,n)}getKeyPair(){return this._keyPair}getPublicKey(){const t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){const r={name:"ECDSA",hash:{name:"SHA-256"}};return await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}}var g0=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Xr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Qt;class w0{constructor(t){Qt.set(this,void 0),g0(this,Qt,t,"f")}get rawKey(){return Xr(this,Qt,"f").rawKey}get derKey(){return Xr(this,Qt,"f").derKey}toDer(){return Xr(this,Qt,"f").toDer()}getPublicKey(){return Xr(this,Qt,"f")}getPrincipal(){return Te.from(Xr(this,Qt,"f").rawKey)}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}Qt=new WeakMap;var m0=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},b0=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},_0=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ci;const E0=new TextEncoder().encode("ic-request-auth-delegation"),x0=new TextEncoder().encode(`
ic-request`);function os(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return Lt(e)}class ta{constructor(t,r,n){this.pubkey=t,this.expiration=r,this.targets=n}toCBOR(){return dt.value.map(Object.assign({pubkey:dt.value.bytes(this.pubkey),expiration:dt.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:dt.value.array(this.targets.map(t=>dt.value.bytes(t.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:Ce(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}}async function v0(e,t,r,n){const i=new ta(t.toDer(),BigInt(+r)*BigInt(1e6),n),c=new Uint8Array([...E0,...new Uint8Array(dn(Object.assign({},i)))]),f=await e.sign(c);return{delegation:i,signature:f}}class vi{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,n=new Date(Date.now()+15*60*1e3),i={}){var c,f;const o=await v0(t,r,n,i.targets);return new vi([...((c=i.previous)===null||c===void 0?void 0:c.delegations)||[],o],((f=i.previous)===null||f===void 0?void 0:f.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){const{publicKey:r,delegations:n}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(n))throw new Error("Invalid delegations.");const i=n.map(c=>{const{delegation:f,signature:o}=c,{pubkey:w,expiration:_,targets:B}=f;if(B!==void 0&&!Array.isArray(B))throw new Error("Invalid targets.");return{delegation:new ta(os(w),BigInt("0x"+_),B&&B.map(I=>{if(typeof I!="string")throw new Error("Invalid target.");return Te.fromHex(I)})),signature:os(o)}});return new this(i,os(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{const{delegation:r,signature:n}=t,{targets:i}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:Ce(r.pubkey)},i&&{targets:i.map(c=>c.toHex())}),signature:Ce(n)}}),publicKey:Ce(this.publicKey)}}}class Da extends zs{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){const{body:r}=t,n=_0(t,["body"]),i=await dn(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_sig:await this.sign(new Uint8Array([...x0,...new Uint8Array(i)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class Ti extends w0{constructor(t,r){super(t),ci.set(this,void 0),m0(this,ci,r,"f")}get delegation(){return b0(this,ci,"f")}static fromDelegation(t,r){return new Ti(t,r)}}ci=new WeakMap;function T0(e,t){for(const{delegation:n}of e.delegations)if(+new Date(Number(n.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[];for(const n of r){const i=n.toText();for(const{delegation:c}of e.delegations){if(c.targets===void 0)continue;let f=!0;for(const o of c.targets)if(o.toText()===i){f=!1;break}if(f)return!1}}return!0}var Wa;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Wa||(Wa={}));const Ya=["mousedown","mousemove","keydown","touchstart","wheel"];class Za{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:n,idleTimeout:i=10*60*1e3}=t||{};this.callbacks=n?[n]:[],this.idleTimeout=i;const c=this._resetTimer.bind(this);window.addEventListener("load",c,!0),Ya.forEach(function(o){document.addEventListener(o,c,!0)});const f=(o,w)=>{let _;return(...B)=>{const I=this,S=function(){_=void 0,o.apply(I,B)};clearTimeout(_),_=window.setTimeout(S,w)}};if(t?.captureScroll){const o=f(c,(r=t?.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",o,!0)}c()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const t=this._resetTimer.bind(this);Ya.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}}const B0=(e,t)=>t.some(r=>e instanceof r);let Xa,Ja;function A0(){return Xa||(Xa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N0(){return Ja||(Ja=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nu=new WeakMap,Ps=new WeakMap,iu=new WeakMap,cs=new WeakMap,ra=new WeakMap;function S0(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",c),e.removeEventListener("error",f)},c=()=>{r(ur(e.result)),i()},f=()=>{n(e.error),i()};e.addEventListener("success",c),e.addEventListener("error",f)});return t.then(r=>{r instanceof IDBCursor&&nu.set(r,e)}).catch(()=>{}),ra.set(t,e),t}function I0(e){if(Ps.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",c),e.removeEventListener("error",f),e.removeEventListener("abort",f)},c=()=>{r(),i()},f=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",c),e.addEventListener("error",f),e.addEventListener("abort",f)});Ps.set(e,t)}let ks={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Ps.get(e);if(t==="objectStoreNames")return e.objectStoreNames||iu.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ur(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function R0(e){ks=e(ks)}function O0(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(us(this),t,...r);return iu.set(n,t.sort?t.sort():[t]),ur(n)}:N0().includes(e)?function(...t){return e.apply(us(this),t),ur(nu.get(this))}:function(...t){return ur(e.apply(us(this),t))}}function U0(e){return typeof e=="function"?O0(e):(e instanceof IDBTransaction&&I0(e),B0(e,A0())?new Proxy(e,ks):e)}function ur(e){if(e instanceof IDBRequest)return S0(e);if(cs.has(e))return cs.get(e);const t=U0(e);return t!==e&&(cs.set(e,t),ra.set(t,e)),t}const us=e=>ra.get(e);function F0(e,t,{blocked:r,upgrade:n,blocking:i,terminated:c}={}){const f=indexedDB.open(e,t),o=ur(f);return n&&f.addEventListener("upgradeneeded",w=>{n(ur(f.result),w.oldVersion,w.newVersion,ur(f.transaction),w)}),r&&f.addEventListener("blocked",w=>r(w.oldVersion,w.newVersion,w)),o.then(w=>{c&&w.addEventListener("close",()=>c()),i&&w.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),o}const P0=["get","getKey","getAll","getAllKeys","count"],k0=["put","add","delete","clear"],ls=new Map;function Qa(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ls.get(t))return ls.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=k0.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||P0.includes(r)))return;const c=async function(f,...o){const w=this.transaction(f,i?"readwrite":"readonly");let _=w.store;return n&&(_=_.index(o.shift())),(await Promise.all([_[r](...o),i&&w.done]))[0]};return ls.set(t,c),c}R0(e=>({...e,get:(t,r,n)=>Qa(t,r)||e.get(t,r,n),has:(t,r)=>!!Qa(t,r)||e.has(t,r)}));const su="auth-client-db",au="ic-keyval",C0=async(e=su,t=au,r)=>(ou&&(localStorage!=null&&localStorage.getItem(ar))&&(localStorage.removeItem(ar),localStorage.removeItem(nr)),await F0(e,r,{upgrade:n=>{n.objectStoreNames.contains(t)&&n.clear(t),n.createObjectStore(t)}}));async function M0(e,t,r){return await e.get(t,r)}async function V0(e,t,r,n){return await e.put(t,n,r)}async function $0(e,t,r){return await e.delete(t,r)}class na{constructor(t,r){this._db=t,this._storeName=r}static async create(t){const{dbName:r=su,storeName:n=au,version:i=H0}=t??{},c=await C0(r,n,i);return new na(c,n)}async set(t,r){return await V0(this._db,this._storeName,t,r)}async get(t){var r;return(r=await M0(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await $0(this._db,this._storeName,t)}}var q0=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},G0=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ui;const nr="identity",ar="delegation",j0="iv",H0=1,ou=typeof window<"u";class L0{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.localStorage:global.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}}class K0{constructor(t){ui.set(this,void 0),q0(this,ui,t??{},"f")}get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}na.create(G0(this,ui,"f")).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}}ui=new WeakMap;const z0="https://identity.ic0.app",D0="#authorize",fs="ECDSA",ds="Ed25519",W0=500,Y0="UserInterrupt";class Dh{constructor(t,r,n,i,c,f,o,w){this._identity=t,this._key=r,this._chain=n,this._storage=i,this.idleManager=c,this._createOptions=f,this._idpWindow=o,this._eventHandler=w,this._registerDefaultIdleCallback()}static async create(t={}){var r,n,i;const c=(r=t.storage)!==null&&r!==void 0?r:new K0,f=(n=t.keyType)!==null&&n!==void 0?n:fs;let o=null;if(t.identity)o=t.identity;else{let I=await c.get(nr);if(!I&&ou)try{const S=new L0,N=await S.get(ar),b=await S.get(nr);N&&b&&f===fs&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await c.set(ar,N),await c.set(nr,b),I=N,await S.remove(ar),await S.remove(nr))}catch(S){console.error("error while attempting to recover localstorage: "+S)}if(I)try{typeof I=="object"?f===ds&&typeof I=="string"?o=await or.fromJSON(I):o=await xi.fromKeyPair(I):typeof I=="string"&&(o=or.fromJSON(I))}catch{}}let w=new hn,_=null;if(o)try{const I=await c.get(ar);if(typeof I=="object"&&I!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?w=t.identity:I&&(_=vi.fromJSON(I),T0(_)?"toDer"in o?w=Ti.fromDelegation(o,_):w=Da.fromDelegation(o,_):(await hs(c),o=null))}catch(I){console.error(I),await hs(c),o=null}let B;return!((i=t.idleOptions)===null||i===void 0)&&i.disableIdle?B=void 0:(_||t.identity)&&(B=Za.create(t.idleOptions)),o||(f===ds?(o=await or.generate(),await c.set(nr,JSON.stringify(o.toJSON()))):(t.storage&&f===fs&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${ds}' as the key type, as it can serialize to a string`),o=await xi.generate(),await c.set(nr,o.getKeyPair()))),new this(w,o,_,c,B,t)}_registerDefaultIdleCallback(){var t,r;const n=(t=this._createOptions)===null||t===void 0?void 0:t.idleOptions;!n?.onIdle&&!n?.disableDefaultIdleCallback&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(t,r){var n,i;const c=t.delegations.map(_=>({delegation:new ta(_.delegation.pubkey,_.delegation.expiration,_.delegation.targets),signature:_.signature.buffer})),f=vi.fromDelegations(c,t.userPublicKey.buffer),o=this._key;if(!o)return;this._chain=f,"toDer"in o?this._identity=Ti.fromDelegation(o,this._chain):this._identity=Da.fromDelegation(o,this._chain),(n=this._idpWindow)===null||n===void 0||n.close();const w=(i=this._createOptions)===null||i===void 0?void 0:i.idleOptions;!this.idleManager&&!w?.disableIdle&&(this.idleManager=Za.create(w),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(ar,JSON.stringify(this._chain.toJSON())),r?.(t)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,n,i,c;const f=BigInt(8)*BigInt(36e11),o=new URL(((r=t?.identityProvider)===null||r===void 0?void 0:r.toString())||z0);o.hash=D0,(n=this._idpWindow)===null||n===void 0||n.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(o,Object.assign({maxTimeToLive:(i=t?.maxTimeToLive)!==null&&i!==void 0?i:f},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(c=window.open(o.toString(),"idpWindow",t?.windowOpenerFeatures))!==null&&c!==void 0?c:void 0;const w=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(Y0,t?.onError):setTimeout(w,W0))};w()}_getEventHandler(t,r){return async n=>{var i,c,f;if(n.origin!==t.origin)return;const o=n.data;switch(o.kind){case"authorize-ready":{const w=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((i=this._key)===null||i===void 0?void 0:i.getPublicKey().toDer()),maxTimeToLive:r?.maxTimeToLive,allowPinAuthentication:r?.allowPinAuthentication,derivationOrigin:(c=r?.derivationOrigin)===null||c===void 0?void 0:c.toString()},r?.customValues);(f=this._idpWindow)===null||f===void 0||f.postMessage(w,t.origin);break}case"authorize-client-success":try{await this._handleSuccess(o,r?.onSuccess)}catch(w){this._handleFailure(w.message,r?.onError)}break;case"authorize-client-failure":this._handleFailure(o.text,r?.onError);break}}}_handleFailure(t,r){var n;(n=this._idpWindow)===null||n===void 0||n.close(),r?.(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await hs(this._storage),this._identity=new hn,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}}async function hs(e){await e.remove(nr),await e.remove(ar),await e.remove(j0)}var Z0=(e=>(e[e.FractionalMoreThan8Decimals=0]="FractionalMoreThan8Decimals",e[e.InvalidFormat=1]="InvalidFormat",e[e.FractionalTooManyDecimals=2]="FractionalTooManyDecimals",e))(Z0||{});BigInt(1e8);var X0=class{constructor(e,t,r){this.id=e,this.service=t,this.certifiedService=r,this.caller=({certified:n=!0})=>n?this.certifiedService:this.service}get canisterId(){return this.id}},cu=e=>e==null,Cs=e=>!cu(e),J0=()=>_r.createSync({host:"https://icp-api.io",identity:new hn}),Wh=async({identity:e,host:t,fetchRootKey:r=!1,verifyQuerySignatures:n=!1,retryTimes:i})=>await _r.create({identity:e,...Cs(t)&&{host:t},verifyQuerySignatures:n,...Cs(i)&&{retryTimes:i},shouldFetchRootKey:r}),Q0=({options:{canisterId:e,serviceOverride:t,certifiedServiceOverride:r,agent:n,callTransform:i,queryTransform:c},idlFactory:f,certifiedIdlFactory:o})=>{let w=n??J0(),_=t??wn.createActor(f,{agent:w,canisterId:e,callTransform:i,queryTransform:c}),B=r??wn.createActor(o,{agent:w,canisterId:e,callTransform:i,queryTransform:c});return{service:_,certifiedService:B,agent:w,canisterId:e}},eo="abcdefghijklmnopqrstuvwxyz234567",mn=Object.create(null);for(let e=0;e<eo.length;e++)mn[eo[e]]=e;mn[0]=mn.o;mn[1]=mn.i;var Je=e=>Cs(e)?[e]:[],eh=({IDL:e})=>{let t=e.Rec(),r=e.Rec(),n=e.Rec(),i=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),c=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),f=e.Vec(e.Nat8),o=e.Record({owner:e.Principal,subaccount:e.Opt(f)}),w=e.Variant({SetTo:o,Unset:e.Null}),_=e.Record({icrc2:e.Bool}),B=e.Record({change_archive_options:e.Opt(i),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,c))),change_fee_collector:e.Opt(w),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(_)}),I=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,c)),minting_account:o,initial_balances:e.Vec(e.Tuple(o,e.Nat)),fee_collector_account:e.Opt(o),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(_)});e.Variant({Upgrade:e.Opt(B),Init:I});let S=e.Nat,N=e.Record({block_range_end:S,canister_id:e.Principal,block_range_start:S}),b=e.Record({start:S,length:e.Nat}),$=e.Vec(e.Tuple(e.Text,n));n.fill(e.Variant({Int:e.Int,Map:$,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(n)}));let M=n,W=e.Record({blocks:e.Vec(M)}),z=e.Func([b],[W],[]),q=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:S,blocks:e.Vec(M),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:z,start:S,length:e.Nat}))}),ie=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),k=e.Nat,Z=e.Record({start:k,length:e.Nat}),G=e.Nat64,Q=e.Record({from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,spender:e.Opt(o)}),te=e.Record({to:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat}),X=e.Record({fee:e.Opt(e.Nat),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(G),spender:o}),he=e.Record({to:o,fee:e.Opt(e.Nat),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,spender:e.Opt(o)}),le=e.Record({burn:e.Opt(Q),kind:e.Text,mint:e.Opt(te),approve:e.Opt(X),timestamp:G,transfer:e.Opt(he)}),O=e.Record({transactions:e.Vec(le)}),P=e.Func([Z],[O],[]),D=e.Record({first_index:k,log_length:e.Nat,transactions:e.Vec(le),archived_transactions:e.Vec(e.Record({callback:P,start:k,length:e.Nat}))}),V=e.Nat,j=e.Record({url:e.Text,name:e.Text}),J=e.Record({to:o,fee:e.Opt(V),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(f),created_at_time:e.Opt(G),amount:V}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:V}),Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:V}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,InsufficientFunds:e.Record({balance:V})}),ge=e.Variant({Ok:S,Err:ee}),ae=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),fe=e.Record({metadata:ae,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),re=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:fe}),E=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),se=e.Record({metadata:ae,consent_message:E}),ue=e.Record({description:e.Text}),pe=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:ue,UnsupportedCanisterCall:ue,ConsentMessageUnavailable:ue}),ne=e.Variant({Ok:se,Err:pe}),ce=e.Record({account:o,spender:o}),m=e.Record({allowance:e.Nat,expires_at:e.Opt(G)}),s=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(G),spender:o}),h=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,Expired:e.Record({ledger_time:G}),InsufficientFunds:e.Record({balance:e.Nat})}),x=e.Variant({Ok:S,Err:h}),T=e.Record({to:o,fee:e.Opt(V),spender_subaccount:e.Opt(f),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:V}),U=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:V}),BadBurn:e.Record({min_burn_amount:V}),Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:V}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,InsufficientFunds:e.Record({balance:V})}),p=e.Variant({Ok:S,Err:U}),a=e.Record({from:e.Opt(e.Principal)}),u=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));r.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,r)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)})),t.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:r})),archived_blocks:e.Vec(e.Record({args:e.Vec(b),callback:e.Func([e.Vec(b)],[t],[])}))}));let g=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(N)],[]),get_blocks:e.Func([b],[q],[]),get_data_certificate:e.Func([],[ie],[]),get_transactions:e.Func([Z],[D],[]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_balance_of:e.Func([o],[V],[]),icrc1_decimals:e.Func([],[e.Nat8],[]),icrc1_fee:e.Func([],[V],[]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,c))],[]),icrc1_minting_account:e.Func([],[e.Opt(o)],[]),icrc1_name:e.Func([],[e.Text],[]),icrc1_supported_standards:e.Func([],[e.Vec(j)],[]),icrc1_symbol:e.Func([],[e.Text],[]),icrc1_total_supply:e.Func([],[V],[]),icrc1_transfer:e.Func([J],[ge],[]),icrc21_canister_call_consent_message:e.Func([re],[ne],[]),icrc2_allowance:e.Func([ce],[m],[]),icrc2_approve:e.Func([s],[x],[]),icrc2_transfer_from:e.Func([T],[p],[]),icrc3_get_archives:e.Func([a],[u],[]),icrc3_get_blocks:e.Func([e.Vec(b)],[t],[]),icrc3_get_tip_certificate:e.Func([],[e.Opt(g)],[]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],[]),is_ledger_ready:e.Func([],[e.Bool],[])})},th=({IDL:e})=>{let t=e.Rec(),r=e.Rec(),n=e.Rec(),i=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),c=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),f=e.Vec(e.Nat8),o=e.Record({owner:e.Principal,subaccount:e.Opt(f)}),w=e.Variant({SetTo:o,Unset:e.Null}),_=e.Record({icrc2:e.Bool}),B=e.Record({change_archive_options:e.Opt(i),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,c))),change_fee_collector:e.Opt(w),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(_)}),I=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,c)),minting_account:o,initial_balances:e.Vec(e.Tuple(o,e.Nat)),fee_collector_account:e.Opt(o),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(_)});e.Variant({Upgrade:e.Opt(B),Init:I});let S=e.Nat,N=e.Record({block_range_end:S,canister_id:e.Principal,block_range_start:S}),b=e.Record({start:S,length:e.Nat}),$=e.Vec(e.Tuple(e.Text,n));n.fill(e.Variant({Int:e.Int,Map:$,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(n)}));let M=n,W=e.Record({blocks:e.Vec(M)}),z=e.Func([b],[W],["query"]),q=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:S,blocks:e.Vec(M),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:z,start:S,length:e.Nat}))}),ie=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),k=e.Nat,Z=e.Record({start:k,length:e.Nat}),G=e.Nat64,Q=e.Record({from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,spender:e.Opt(o)}),te=e.Record({to:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat}),X=e.Record({fee:e.Opt(e.Nat),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(G),spender:o}),he=e.Record({to:o,fee:e.Opt(e.Nat),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,spender:e.Opt(o)}),le=e.Record({burn:e.Opt(Q),kind:e.Text,mint:e.Opt(te),approve:e.Opt(X),timestamp:G,transfer:e.Opt(he)}),O=e.Record({transactions:e.Vec(le)}),P=e.Func([Z],[O],["query"]),D=e.Record({first_index:k,log_length:e.Nat,transactions:e.Vec(le),archived_transactions:e.Vec(e.Record({callback:P,start:k,length:e.Nat}))}),V=e.Nat,j=e.Record({url:e.Text,name:e.Text}),J=e.Record({to:o,fee:e.Opt(V),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(f),created_at_time:e.Opt(G),amount:V}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:V}),Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:V}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,InsufficientFunds:e.Record({balance:V})}),ge=e.Variant({Ok:S,Err:ee}),ae=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),fe=e.Record({metadata:ae,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),re=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:fe}),E=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),se=e.Record({metadata:ae,consent_message:E}),ue=e.Record({description:e.Text}),pe=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:ue,UnsupportedCanisterCall:ue,ConsentMessageUnavailable:ue}),ne=e.Variant({Ok:se,Err:pe}),ce=e.Record({account:o,spender:o}),m=e.Record({allowance:e.Nat,expires_at:e.Opt(G)}),s=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(G),spender:o}),h=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,Expired:e.Record({ledger_time:G}),InsufficientFunds:e.Record({balance:e.Nat})}),x=e.Variant({Ok:S,Err:h}),T=e.Record({to:o,fee:e.Opt(V),spender_subaccount:e.Opt(f),from:o,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(G),amount:V}),U=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:V}),BadBurn:e.Record({min_burn_amount:V}),Duplicate:e.Record({duplicate_of:S}),BadFee:e.Record({expected_fee:V}),CreatedInFuture:e.Record({ledger_time:G}),TooOld:e.Null,InsufficientFunds:e.Record({balance:V})}),p=e.Variant({Ok:S,Err:U}),a=e.Record({from:e.Opt(e.Principal)}),u=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));r.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,r)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)})),t.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:r})),archived_blocks:e.Vec(e.Record({args:e.Vec(b),callback:e.Func([e.Vec(b)],[t],["query"])}))}));let g=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(N)],["query"]),get_blocks:e.Func([b],[q],["query"]),get_data_certificate:e.Func([],[ie],["query"]),get_transactions:e.Func([Z],[D],["query"]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],["query"]),icrc1_balance_of:e.Func([o],[V],["query"]),icrc1_decimals:e.Func([],[e.Nat8],["query"]),icrc1_fee:e.Func([],[V],["query"]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,c))],["query"]),icrc1_minting_account:e.Func([],[e.Opt(o)],["query"]),icrc1_name:e.Func([],[e.Text],["query"]),icrc1_supported_standards:e.Func([],[e.Vec(j)],["query"]),icrc1_symbol:e.Func([],[e.Text],["query"]),icrc1_total_supply:e.Func([],[V],["query"]),icrc1_transfer:e.Func([J],[ge],[]),icrc21_canister_call_consent_message:e.Func([re],[ne],[]),icrc2_allowance:e.Func([ce],[m],["query"]),icrc2_approve:e.Func([s],[x],[]),icrc2_transfer_from:e.Func([T],[p],[]),icrc3_get_archives:e.Func([a],[u],["query"]),icrc3_get_blocks:e.Func([e.Vec(b)],[t],["query"]),icrc3_get_tip_certificate:e.Func([],[e.Opt(g)],["query"]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],["query"]),is_ledger_ready:e.Func([],[e.Bool],["query"])})},rh=({from_subaccount:e,fee:t,created_at_time:r,memo:n,...i})=>({...i,fee:Je(t),memo:Je(n),from_subaccount:Je(e),created_at_time:Je(r)}),nh=({spender_subaccount:e,fee:t,created_at_time:r,memo:n,...i})=>({...i,fee:Je(t),memo:Je(n),spender_subaccount:Je(e),created_at_time:Je(r)}),ih=({fee:e,created_at_time:t,memo:r,from_subaccount:n,expected_allowance:i,expires_at:c,...f})=>({...f,fee:Je(e),memo:Je(r),from_subaccount:Je(n),created_at_time:Je(t),expected_allowance:Je(i),expires_at:Je(c)}),sh=({userPreferences:{metadata:{utcOffsetMinutes:e,language:t},deriveSpec:r},...n})=>({...n,user_preferences:{metadata:{language:t,utc_offset_minutes:Je(e)},device_spec:cu(r)?Je():Je("GenericDisplay"in r?{GenericDisplay:null}:{LineDisplay:{characters_per_line:r.LineDisplay.charactersPerLine,lines_per_page:r.LineDisplay.linesPerPage}})}}),ps=class extends Error{constructor({msg:e,errorType:t}){super(e),this.errorType=t}},ah=class extends Error{constructor(e,t){super(),this.message=e,this.error_code=t}},Mi=class extends Error{},oh=class extends Mi{},ch=class extends Mi{},uh=class extends Mi{},lh=e=>"GenericError"in e?new ah(e.GenericError.description,e.GenericError.error_code):"InsufficientPayment"in e?new oh(e.InsufficientPayment.description):"UnsupportedCanisterCall"in e?new ch(e.UnsupportedCanisterCall.description):"ConsentMessageUnavailable"in e?new uh(e.ConsentMessageUnavailable.description):new Mi(`Unknown error type ${JSON.stringify(e)}`),Yh=class uu extends X0{constructor(){super(...arguments),this.metadata=t=>this.caller(t).icrc1_metadata(),this.transactionFee=t=>this.caller(t).icrc1_fee(),this.balance=t=>this.caller({certified:t.certified}).icrc1_balance_of({owner:t.owner,subaccount:Je(t.subaccount)}),this.transfer=async t=>{let r=await this.caller({certified:!0}).icrc1_transfer(rh(t));if("Err"in r)throw new ps({errorType:r.Err,msg:"Failed to transfer"});return r.Ok},this.totalTokensSupply=t=>this.caller(t).icrc1_total_supply(),this.transferFrom=async t=>{let r=await this.caller({certified:!0}).icrc2_transfer_from(nh(t));if("Err"in r)throw new ps({errorType:r.Err,msg:"Failed to transfer from"});return r.Ok},this.approve=async t=>{let r=await this.caller({certified:!0}).icrc2_approve(ih(t));if("Err"in r)throw new ps({errorType:r.Err,msg:"Failed to entitle the spender to transfer the amount"});return r.Ok},this.allowance=async t=>{let{certified:r,...n}=t;return this.caller({certified:r}).icrc2_allowance({...n})},this.consentMessage=async t=>{let{icrc21_canister_call_consent_message:r}=this.caller({certified:!0}),n=await r(sh(t));if("Err"in n)throw lh(n.Err);return n.Ok}}static create(t){let{service:r,certifiedService:n,canisterId:i}=Q0({options:t,idlFactory:th,certifiedIdlFactory:eh});return new uu(i,r,n)}},fh=(e=>(e.SYMBOL="icrc1:symbol",e.NAME="icrc1:name",e.DECIMALS="icrc1:decimals",e.FEE="icrc1:fee",e.LOGO="icrc1:logo",e))(fh||{}),dh={};const hh=Ou(hl);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.bufFromBufLike=lt.uint8ToBuf=lt.PipeArrayBuffer=lt.fromHexString=lt.toHexString=lt.concat=void 0;function ph(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}lt.concat=ph;function yh(e){return new Uint8Array(e).reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")}lt.toHexString=yh;function gh(e){var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))}lt.fromHexString=gh;class wh{constructor(t,r=t?.byteLength||0){this._buffer=Bi(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return Bi(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}}lt.PipeArrayBuffer=wh;function li(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}lt.uint8ToBuf=li;function Bi(e){return e instanceof Uint8Array?li(e):e instanceof ArrayBuffer?e:Array.isArray(e)?li(new Uint8Array(e)):"buffer"in e?Bi(e.buffer):li(new Uint8Array(e))}lt.bufFromBufLike=Bi;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.idlLabelToId=void 0;function mh(e){const r=new TextEncoder().encode(e);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function bh(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return mh(e)}Vi.idlLabelToId=bh;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.readIntLE=Ve.readUIntLE=Ve.writeIntLE=Ve.writeUIntLE=Ve.slebDecode=Ve.slebEncode=Ve.lebDecode=Ve.lebEncode=Ve.safeReadUint8=Ve.safeRead=void 0;const ia=lt;function lu(){throw new Error("unexpected end of buffer")}function fu(e,t){return e.byteLength<t&&lu(),e.read(t)}Ve.safeRead=fu;function Ai(e){const t=e.readUint8();return t===void 0&&lu(),t}Ve.safeReadUint8=Ai;function _h(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new ia.PipeArrayBuffer(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}Ve.lebEncode=_h;function du(e){let t=BigInt(1),r=BigInt(0),n;do n=Ai(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}Ve.lebDecode=du;function Eh(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new ia.PipeArrayBuffer(new ArrayBuffer(r),0);for(;;){const c=i(e);if(e/=BigInt(128),t&&e===BigInt(0)&&c&64||!t&&e===BigInt(0)&&!(c&64)){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const f=c%BigInt(128);return Number(t?BigInt(128)-f-BigInt(1):f)}return n.buffer}Ve.slebEncode=Eh;function xh(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if(!(t[r]&64))return du(e);break}const n=new Uint8Array(fu(e,r+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}Ve.slebDecode=xh;function vh(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return hu(e,t)}Ve.writeUIntLE=vh;function hu(e,t){e=BigInt(e);const r=new ia.PipeArrayBuffer(new ArrayBuffer(Math.min(1,t)),0);let n=0,i=BigInt(256),c=BigInt(0),f=Number(e%i);for(r.write(new Uint8Array([f]));++n<t;)e<0&&c===BigInt(0)&&f!==0&&(c=BigInt(1)),f=Number((e/i-c)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}Ve.writeIntLE=hu;function pu(e,t){let r=BigInt(Ai(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);const c=BigInt(Ai(e));r=r+n*c}return r}Ve.readUIntLE=pu;function Th(e,t){let r=pu(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}Ve.readIntLE=Th;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.iexp2=zr.ilog2=void 0;function Bh(e){const t=BigInt(e);if(e<=0)throw new RangeError("Input must be positive");return t.toString(2).length-1}zr.ilog2=Bh;function Ah(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}zr.iexp2=Ah;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Variant=e.Record=e.Opt=e.Vec=e.Tuple=e.Principal=e.Nat64=e.Nat32=e.Nat16=e.Nat8=e.Int64=e.Int32=e.Int16=e.Int8=e.Float64=e.Float32=e.Nat=e.Int=e.Text=e.Null=e.Bool=e.Unknown=e.Reserved=e.Empty=e.decode=e.encode=e.ServiceClass=e.FuncClass=e.PrincipalClass=e.RecClass=e.VariantClass=e.TupleClass=e.RecordClass=e.OptClass=e.VecClass=e.FixedNatClass=e.FixedIntClass=e.FloatClass=e.NatClass=e.IntClass=e.TextClass=e.ReservedClass=e.NullClass=e.BoolClass=e.UnknownClass=e.EmptyClass=e.ConstructType=e.PrimitiveType=e.Type=e.Visitor=void 0,e.Service=e.Func=e.Rec=void 0;const t=hh,r=lt,n=Vi,i=Ve,c=zr,f="DIDL",o=400;function w(m,s,h){return m.map((x,T)=>h(x,s[T]))}class _{constructor(){this._typs=[],this._idx=new Map}has(s){return this._idx.has(s.name)}add(s,h){const x=this._typs.length;this._idx.set(s.name,x),this._typs.push(h)}merge(s,h){const x=this._idx.get(s.name),T=this._idx.get(h);if(x===void 0)throw new Error("Missing type index for "+s);if(T===void 0)throw new Error("Missing type index for "+h);this._typs[x]=this._typs[T],this._typs.splice(T,1),this._idx.delete(h)}encode(){const s=(0,i.lebEncode)(this._typs.length),h=(0,r.concat)(...this._typs);return(0,r.concat)(s,h)}indexOf(s){if(!this._idx.has(s))throw new Error("Missing type index for "+s);return(0,i.slebEncode)(this._idx.get(s)||0)}}class B{visitType(s,h){throw new Error("Not implemented")}visitPrimitive(s,h){return this.visitType(s,h)}visitEmpty(s,h){return this.visitPrimitive(s,h)}visitBool(s,h){return this.visitPrimitive(s,h)}visitNull(s,h){return this.visitPrimitive(s,h)}visitReserved(s,h){return this.visitPrimitive(s,h)}visitText(s,h){return this.visitPrimitive(s,h)}visitNumber(s,h){return this.visitPrimitive(s,h)}visitInt(s,h){return this.visitNumber(s,h)}visitNat(s,h){return this.visitNumber(s,h)}visitFloat(s,h){return this.visitPrimitive(s,h)}visitFixedInt(s,h){return this.visitNumber(s,h)}visitFixedNat(s,h){return this.visitNumber(s,h)}visitPrincipal(s,h){return this.visitPrimitive(s,h)}visitConstruct(s,h){return this.visitType(s,h)}visitVec(s,h,x){return this.visitConstruct(s,x)}visitOpt(s,h,x){return this.visitConstruct(s,x)}visitRecord(s,h,x){return this.visitConstruct(s,x)}visitTuple(s,h,x){const T=h.map((U,p)=>[`_${p}_`,U]);return this.visitRecord(s,T,x)}visitVariant(s,h,x){return this.visitConstruct(s,x)}visitRec(s,h,x){return this.visitConstruct(h,x)}visitFunc(s,h){return this.visitConstruct(s,h)}visitService(s,h){return this.visitConstruct(s,h)}}e.Visitor=B;class I{display(){return this.name}valueToString(s){return ee(s)}buildTypeTable(s){s.has(this)||this._buildTypeTableImpl(s)}}e.Type=I;class S extends I{checkType(s){if(this.name!==s.name)throw new Error(`type mismatch: type on the wire ${s.name}, expect type ${this.name}`);return s}_buildTypeTableImpl(s){}}e.PrimitiveType=S;class N extends I{checkType(s){if(s instanceof P){const h=s.getType();if(typeof h>"u")throw new Error("type mismatch with uninitialized type");return h}throw new Error(`type mismatch: type on the wire ${s.name}, expect type ${this.name}`)}encodeType(s){return s.indexOf(this.name)}}e.ConstructType=N;class b extends S{accept(s,h){return s.visitEmpty(this,h)}covariant(s){throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return(0,i.slebEncode)(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}e.EmptyClass=b;class $ extends I{checkType(s){throw new Error("Method not implemented for unknown.")}accept(s,h){throw s.visitType(this,h)}covariant(s){throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(s,h){let x=h.decodeValue(s,h);Object(x)!==x&&(x=Object(x));let T;return h instanceof P?T=()=>h.getType():T=()=>h,Object.defineProperty(x,"type",{value:T,writable:!0,enumerable:!1,configurable:!0}),x}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}e.UnknownClass=$;class M extends S{accept(s,h){return s.visitBool(this,h)}covariant(s){if(typeof s=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return new Uint8Array([s?1:0])}encodeType(){return(0,i.slebEncode)(-2)}decodeValue(s,h){switch(this.checkType(h),(0,i.safeReadUint8)(s)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}e.BoolClass=M;class W extends S{accept(s,h){return s.visitNull(this,h)}covariant(s){if(s===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return(0,i.slebEncode)(-1)}decodeValue(s,h){return this.checkType(h),null}get name(){return"null"}}e.NullClass=W;class z extends S{accept(s,h){return s.visitReserved(this,h)}covariant(s){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return(0,i.slebEncode)(-16)}decodeValue(s,h){return h.name!==this.name&&h.decodeValue(s,h),null}get name(){return"reserved"}}e.ReservedClass=z;class q extends S{accept(s,h){return s.visitText(this,h)}covariant(s){if(typeof s=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=new TextEncoder().encode(s),x=(0,i.lebEncode)(h.byteLength);return(0,r.concat)(x,h)}encodeType(){return(0,i.slebEncode)(-15)}decodeValue(s,h){this.checkType(h);const x=(0,i.lebDecode)(s),T=(0,i.safeRead)(s,Number(x));return new TextDecoder("utf8",{fatal:!0}).decode(T)}get name(){return"text"}valueToString(s){return'"'+s+'"'}}e.TextClass=q;class ie extends S{accept(s,h){return s.visitInt(this,h)}covariant(s){if(typeof s=="bigint"||Number.isInteger(s))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return(0,i.slebEncode)(s)}encodeType(){return(0,i.slebEncode)(-4)}decodeValue(s,h){return this.checkType(h),(0,i.slebDecode)(s)}get name(){return"int"}valueToString(s){return s.toString()}}e.IntClass=ie;class k extends S{accept(s,h){return s.visitNat(this,h)}covariant(s){if(typeof s=="bigint"&&s>=BigInt(0)||Number.isInteger(s)&&s>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return(0,i.lebEncode)(s)}encodeType(){return(0,i.slebEncode)(-3)}decodeValue(s,h){return this.checkType(h),(0,i.lebDecode)(s)}get name(){return"nat"}valueToString(s){return s.toString()}}e.NatClass=k;class Z extends S{constructor(s){if(super(),this._bits=s,s!==32&&s!==64)throw new Error("not a valid float type")}accept(s,h){return s.visitFloat(this,h)}covariant(s){if(typeof s=="number"||s instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=new ArrayBuffer(this._bits/8),x=new DataView(h);return this._bits===32?x.setFloat32(0,s,!0):x.setFloat64(0,s,!0),h}encodeType(){const s=this._bits===32?-13:-14;return(0,i.slebEncode)(s)}decodeValue(s,h){this.checkType(h);const x=(0,i.safeRead)(s,this._bits/8),T=new DataView(x);return this._bits===32?T.getFloat32(0,!0):T.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(s){return s.toString()}}e.FloatClass=Z;class G extends S{constructor(s){super(),this._bits=s}accept(s,h){return s.visitFixedInt(this,h)}covariant(s){const h=(0,c.iexp2)(this._bits-1)*BigInt(-1),x=(0,c.iexp2)(this._bits-1)-BigInt(1);let T=!1;if(typeof s=="bigint")T=s>=h&&s<=x;else if(Number.isInteger(s)){const U=BigInt(s);T=U>=h&&U<=x}else T=!1;if(T)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return(0,i.writeIntLE)(s,this._bits/8)}encodeType(){const s=Math.log2(this._bits)-3;return(0,i.slebEncode)(-9-s)}decodeValue(s,h){this.checkType(h);const x=(0,i.readIntLE)(s,this._bits/8);return this._bits<=32?Number(x):x}get name(){return`int${this._bits}`}valueToString(s){return s.toString()}}e.FixedIntClass=G;class Q extends S{constructor(s){super(),this._bits=s}accept(s,h){return s.visitFixedNat(this,h)}covariant(s){const h=(0,c.iexp2)(this._bits);let x=!1;if(typeof s=="bigint"&&s>=BigInt(0)?x=s<h:Number.isInteger(s)&&s>=0?x=BigInt(s)<h:x=!1,x)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return(0,i.writeUIntLE)(s,this._bits/8)}encodeType(){const s=Math.log2(this._bits)-3;return(0,i.slebEncode)(-5-s)}decodeValue(s,h){this.checkType(h);const x=(0,i.readUIntLE)(s,this._bits/8);return this._bits<=32?Number(x):x}get name(){return`nat${this._bits}`}valueToString(s){return s.toString()}}e.FixedNatClass=Q;class te extends N{constructor(s){super(),this._type=s,this._blobOptimization=!1,s instanceof Q&&s._bits===8&&(this._blobOptimization=!0)}accept(s,h){return s.visitVec(this,this._type,h)}covariant(s){const h=this._type instanceof Q?this._type._bits:this._type instanceof G?this._type._bits:0;if(ArrayBuffer.isView(s)&&h==s.BYTES_PER_ELEMENT*8||Array.isArray(s)&&s.every((x,T)=>{try{return this._type.covariant(x)}catch(U){throw new Error(`Invalid ${this.display()} argument: 

index ${T} -> ${U.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=(0,i.lebEncode)(s.length);if(this._blobOptimization)return(0,r.concat)(h,new Uint8Array(s));if(ArrayBuffer.isView(s))return(0,r.concat)(h,new Uint8Array(s.buffer));const x=new r.PipeArrayBuffer(new ArrayBuffer(h.byteLength+s.length),0);x.write(h);for(const T of s){const U=this._type.encodeValue(T);x.write(new Uint8Array(U))}return x.buffer}_buildTypeTableImpl(s){this._type.buildTypeTable(s);const h=(0,i.slebEncode)(-19),x=this._type.encodeType(s);s.add(this,(0,r.concat)(h,x))}decodeValue(s,h){const x=this.checkType(h);if(!(x instanceof te))throw new Error("Not a vector type");const T=Number((0,i.lebDecode)(s));if(this._type instanceof Q){if(this._type._bits==8)return new Uint8Array(s.read(T));if(this._type._bits==16)return new Uint16Array(s.read(T*2));if(this._type._bits==32)return new Uint32Array(s.read(T*4));if(this._type._bits==64)return new BigUint64Array(s.read(T*8))}if(this._type instanceof G){if(this._type._bits==8)return new Int8Array(s.read(T));if(this._type._bits==16)return new Int16Array(s.read(T*2));if(this._type._bits==32)return new Int32Array(s.read(T*4));if(this._type._bits==64)return new BigInt64Array(s.read(T*8))}const U=[];for(let p=0;p<T;p++)U.push(this._type.decodeValue(s,x._type));return U}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(s){return"vec {"+s.map(x=>this._type.valueToString(x)).join("; ")+"}"}}e.VecClass=te;class X extends N{constructor(s){super(),this._type=s}accept(s,h){return s.visitOpt(this,this._type,h)}covariant(s){try{if(Array.isArray(s)&&(s.length===0||s.length===1&&this._type.covariant(s[0])))return!0}catch(h){throw new Error(`Invalid ${this.display()} argument: ${ee(s)} 

-> ${h.message}`)}throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){return s.length===0?new Uint8Array([0]):(0,r.concat)(new Uint8Array([1]),this._type.encodeValue(s[0]))}_buildTypeTableImpl(s){this._type.buildTypeTable(s);const h=(0,i.slebEncode)(-18),x=this._type.encodeType(s);s.add(this,(0,r.concat)(h,x))}decodeValue(s,h){const x=this.checkType(h);if(!(x instanceof X))throw new Error("Not an option type");switch((0,i.safeReadUint8)(s)){case 0:return[];case 1:return[this._type.decodeValue(s,x._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(s){return s.length===0?"null":`opt ${this._type.valueToString(s[0])}`}}e.OptClass=X;class he extends N{constructor(s={}){super(),this._fields=Object.entries(s).sort((h,x)=>(0,n.idlLabelToId)(h[0])-(0,n.idlLabelToId)(x[0]))}accept(s,h){return s.visitRecord(this,this._fields,h)}tryAsTuple(){const s=[];for(let h=0;h<this._fields.length;h++){const[x,T]=this._fields[h];if(x!==`_${h}_`)return null;s.push(T)}return s}covariant(s){if(typeof s=="object"&&this._fields.every(([h,x])=>{if(!s.hasOwnProperty(h))throw new Error(`Record is missing key "${h}".`);try{return x.covariant(s[h])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

field ${h} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=this._fields.map(([T])=>s[T]),x=w(this._fields,h,([,T],U)=>T.encodeValue(U));return(0,r.concat)(...x)}_buildTypeTableImpl(s){this._fields.forEach(([U,p])=>p.buildTypeTable(s));const h=(0,i.slebEncode)(-20),x=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([U,p])=>(0,r.concat)((0,i.lebEncode)((0,n.idlLabelToId)(U)),p.encodeType(s)));s.add(this,(0,r.concat)(h,x,(0,r.concat)(...T)))}decodeValue(s,h){const x=this.checkType(h);if(!(x instanceof he))throw new Error("Not a record type");const T={};let U=0,p=0;for(;p<x._fields.length;){const[a,u]=x._fields[p];if(U>=this._fields.length){u.decodeValue(s,u),p++;continue}const[g,v]=this._fields[U],R=(0,n.idlLabelToId)(this._fields[U][0]),H=(0,n.idlLabelToId)(a);if(R===H)T[g]=v.decodeValue(s,u),U++,p++;else if(H>R)if(v instanceof X||v instanceof z)T[g]=[],U++;else throw new Error("Cannot find required field "+g);else u.decodeValue(s,u),p++}for(const[a,u]of this._fields.slice(U))if(u instanceof X||u instanceof z)T[a]=[];else throw new Error("Cannot find required field "+a);return T}get name(){return`record {${this._fields.map(([h,x])=>h+":"+x.name).join("; ")}}`}display(){return`record {${this._fields.map(([h,x])=>h+":"+x.display()).join("; ")}}`}valueToString(s){const h=this._fields.map(([T])=>s[T]);return`record {${w(this._fields,h,([T,U],p)=>T+"="+U.valueToString(p)).join("; ")}}`}}e.RecordClass=he;class le extends he{constructor(s){const h={};s.forEach((x,T)=>h["_"+T+"_"]=x),super(h),this._components=s}accept(s,h){return s.visitTuple(this,this._components,h)}covariant(s){if(Array.isArray(s)&&s.length>=this._fields.length&&this._components.every((h,x)=>{try{return h.covariant(s[x])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

index ${x} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=w(this._components,s,(x,T)=>x.encodeValue(T));return(0,r.concat)(...h)}decodeValue(s,h){const x=this.checkType(h);if(!(x instanceof le))throw new Error("not a tuple type");if(x._components.length<this._components.length)throw new Error("tuple mismatch");const T=[];for(const[U,p]of x._components.entries())U>=this._components.length?p.decodeValue(s,p):T.push(this._components[U].decodeValue(s,p));return T}display(){return`record {${this._components.map(h=>h.display()).join("; ")}}`}valueToString(s){return`record {${w(this._components,s,(x,T)=>x.valueToString(T)).join("; ")}}`}}e.TupleClass=le;class O extends N{constructor(s={}){super(),this._fields=Object.entries(s).sort((h,x)=>(0,n.idlLabelToId)(h[0])-(0,n.idlLabelToId)(x[0]))}accept(s,h){return s.visitVariant(this,this._fields,h)}covariant(s){if(typeof s=="object"&&Object.entries(s).length===1&&this._fields.every(([h,x])=>{try{return!s.hasOwnProperty(h)||x.covariant(s[h])}catch(T){throw new Error(`Invalid ${this.display()} argument: 

variant ${h} -> ${T.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){for(let h=0;h<this._fields.length;h++){const[x,T]=this._fields[h];if(s.hasOwnProperty(x)){const U=(0,i.lebEncode)(h),p=T.encodeValue(s[x]);return(0,r.concat)(U,p)}}throw Error("Variant has no data: "+s)}_buildTypeTableImpl(s){this._fields.forEach(([,U])=>{U.buildTypeTable(s)});const h=(0,i.slebEncode)(-21),x=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([U,p])=>(0,r.concat)((0,i.lebEncode)((0,n.idlLabelToId)(U)),p.encodeType(s)));s.add(this,(0,r.concat)(h,x,...T))}decodeValue(s,h){const x=this.checkType(h);if(!(x instanceof O))throw new Error("Not a variant type");const T=Number((0,i.lebDecode)(s));if(T>=x._fields.length)throw Error("Invalid variant index: "+T);const[U,p]=x._fields[T];for(const[a,u]of this._fields)if((0,n.idlLabelToId)(U)===(0,n.idlLabelToId)(a)){const g=u.decodeValue(s,p);return{[a]:g}}throw new Error("Cannot find field hash "+U)}get name(){return`variant {${this._fields.map(([h,x])=>h+":"+x.name).join("; ")}}`}display(){return`variant {${this._fields.map(([h,x])=>h+(x.name==="null"?"":`:${x.display()}`)).join("; ")}}`}valueToString(s){for(const[h,x]of this._fields)if(s.hasOwnProperty(h)){const T=x.valueToString(s[h]);return T==="null"?`variant {${h}}`:`variant {${h}=${T}}`}throw new Error("Variant has no data: "+s)}}e.VariantClass=O;class P extends N{constructor(){super(...arguments),this._id=P._counter++,this._type=void 0}accept(s,h){if(!this._type)throw Error("Recursive type uninitialized.");return s.visitRec(this,this._type,h)}fill(s){this._type=s}getType(){return this._type}covariant(s){if(this._type&&this._type.covariant(s))return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(s)}_buildTypeTableImpl(s){if(!this._type)throw Error("Recursive type uninitialized.");s.add(this,new Uint8Array([])),this._type.buildTypeTable(s),s.merge(this,this._type.name)}decodeValue(s,h){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(s,h)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(s){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(s)}}e.RecClass=P,P._counter=0;function D(m){if((0,i.safeReadUint8)(m)!==1)throw new Error("Cannot decode principal");const h=Number((0,i.lebDecode)(m));return t.Principal.fromUint8Array(new Uint8Array((0,i.safeRead)(m,h)))}class V extends S{accept(s,h){return s.visitPrincipal(this,h)}covariant(s){if(s&&s._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=s.toUint8Array(),x=(0,i.lebEncode)(h.byteLength);return(0,r.concat)(new Uint8Array([1]),x,h)}encodeType(){return(0,i.slebEncode)(-24)}decodeValue(s,h){return this.checkType(h),D(s)}get name(){return"principal"}valueToString(s){return`${this.name} "${s.toText()}"`}}e.PrincipalClass=V;class j extends N{constructor(s,h,x=[]){super(),this.argTypes=s,this.retTypes=h,this.annotations=x}static argsToString(s,h){if(s.length!==h.length)throw new Error("arity mismatch");return"("+s.map((x,T)=>x.valueToString(h[T])).join(", ")+")"}accept(s,h){return s.visitFunc(this,h)}covariant(s){if(Array.isArray(s)&&s.length===2&&s[0]&&s[0]._isPrincipal&&typeof s[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue([s,h]){const x=s.toUint8Array(),T=(0,i.lebEncode)(x.byteLength),U=(0,r.concat)(new Uint8Array([1]),T,x),p=new TextEncoder().encode(h),a=(0,i.lebEncode)(p.byteLength);return(0,r.concat)(new Uint8Array([1]),U,a,p)}_buildTypeTableImpl(s){this.argTypes.forEach(g=>g.buildTypeTable(s)),this.retTypes.forEach(g=>g.buildTypeTable(s));const h=(0,i.slebEncode)(-22),x=(0,i.lebEncode)(this.argTypes.length),T=(0,r.concat)(...this.argTypes.map(g=>g.encodeType(s))),U=(0,i.lebEncode)(this.retTypes.length),p=(0,r.concat)(...this.retTypes.map(g=>g.encodeType(s))),a=(0,i.lebEncode)(this.annotations.length),u=(0,r.concat)(...this.annotations.map(g=>this.encodeAnnotation(g)));s.add(this,(0,r.concat)(h,x,T,U,p,a,u))}decodeValue(s){if((0,i.safeReadUint8)(s)!==1)throw new Error("Cannot decode function reference");const x=D(s),T=Number((0,i.lebDecode)(s)),U=(0,i.safeRead)(s,T),a=new TextDecoder("utf8",{fatal:!0}).decode(U);return[x,a]}get name(){const s=this.argTypes.map(T=>T.name).join(", "),h=this.retTypes.map(T=>T.name).join(", "),x=" "+this.annotations.join(" ");return`(${s}) -> (${h})${x}`}valueToString([s,h]){return`func "${s.toText()}".${h}`}display(){const s=this.argTypes.map(T=>T.display()).join(", "),h=this.retTypes.map(T=>T.display()).join(", "),x=" "+this.annotations.join(" ");return`(${s})  (${h})${x}`}encodeAnnotation(s){if(s==="query")return new Uint8Array([1]);if(s==="oneway")return new Uint8Array([2]);if(s==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}e.FuncClass=j;class J extends N{constructor(s){super(),this._fields=Object.entries(s).sort((h,x)=>h[0]<x[0]?-1:h[0]>x[0]?1:0)}accept(s,h){return s.visitService(this,h)}covariant(s){if(s&&s._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${ee(s)}`)}encodeValue(s){const h=s.toUint8Array(),x=(0,i.lebEncode)(h.length);return(0,r.concat)(new Uint8Array([1]),x,h)}_buildTypeTableImpl(s){this._fields.forEach(([U,p])=>p.buildTypeTable(s));const h=(0,i.slebEncode)(-23),x=(0,i.lebEncode)(this._fields.length),T=this._fields.map(([U,p])=>{const a=new TextEncoder().encode(U),u=(0,i.lebEncode)(a.length);return(0,r.concat)(u,a,p.encodeType(s))});s.add(this,(0,r.concat)(h,x,...T))}decodeValue(s){return D(s)}get name(){return`service {${this._fields.map(([h,x])=>h+":"+x.name).join("; ")}}`}valueToString(s){return`service "${s.toText()}"`}}e.ServiceClass=J;function ee(m){const s=JSON.stringify(m,(h,x)=>typeof x=="bigint"?`BigInt(${x})`:x);return s&&s.length>o?s.substring(0,o-3)+"...":s}function ge(m,s){if(s.length<m.length)throw Error("Wrong number of message arguments");const h=new _;m.forEach(u=>u.buildTypeTable(h));const x=new TextEncoder().encode(f),T=h.encode(),U=(0,i.lebEncode)(s.length),p=(0,r.concat)(...m.map(u=>u.encodeType(h))),a=(0,r.concat)(...w(m,s,(u,g)=>{try{u.covariant(g)}catch(v){throw new Error(v.message+`

`)}return u.encodeValue(g)}));return(0,r.concat)(x,T,U,p,a)}e.encode=ge;function ae(m,s){const h=new r.PipeArrayBuffer(s);if(s.byteLength<f.length)throw new Error("Message length smaller than magic number");const x=(0,i.safeRead)(h,f.length),T=new TextDecoder().decode(x);if(T!==f)throw new Error("Wrong magic number: "+JSON.stringify(T));function U(Y){const oe=[],ye=Number((0,i.lebDecode)(Y));for(let l=0;l<ye;l++){const d=Number((0,i.slebDecode)(Y));switch(d){case-18:case-19:{const A=Number((0,i.slebDecode)(Y));oe.push([d,A]);break}case-20:case-21:{const A=[];let C=Number((0,i.lebDecode)(Y)),K;for(;C--;){const L=Number((0,i.lebDecode)(Y));if(L>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof K=="number"&&K>=L)throw new Error("field id collision or not sorted");K=L;const _e=Number((0,i.slebDecode)(Y));A.push([L,_e])}oe.push([d,A]);break}case-22:{const A=[];let C=Number((0,i.lebDecode)(Y));for(;C--;)A.push(Number((0,i.slebDecode)(Y)));const K=[];let L=Number((0,i.lebDecode)(Y));for(;L--;)K.push(Number((0,i.slebDecode)(Y)));const _e=[];let ve=Number((0,i.lebDecode)(Y));for(;ve--;)switch(Number((0,i.lebDecode)(Y))){case 1:{_e.push("query");break}case 2:{_e.push("oneway");break}case 3:{_e.push("composite_query");break}default:throw new Error("unknown annotation")}oe.push([d,[A,K,_e]]);break}case-23:{let A=Number((0,i.lebDecode)(Y));const C=[];for(;A--;){const K=Number((0,i.lebDecode)(Y)),L=new TextDecoder().decode((0,i.safeRead)(Y,K)),_e=(0,i.slebDecode)(Y);C.push([L,_e])}oe.push([d,C]);break}default:throw new Error("Illegal op_code: "+d)}}const me=[],y=Number((0,i.lebDecode)(Y));for(let l=0;l<y;l++)me.push(Number((0,i.slebDecode)(Y)));return[oe,me]}const[p,a]=U(h);if(a.length<m.length)throw new Error("Wrong number of return values");const u=p.map(Y=>pe());function g(Y){if(Y<-24)throw new Error("future value not supported");if(Y<0)switch(Y){case-1:return e.Null;case-2:return e.Bool;case-3:return e.Nat;case-4:return e.Int;case-5:return e.Nat8;case-6:return e.Nat16;case-7:return e.Nat32;case-8:return e.Nat64;case-9:return e.Int8;case-10:return e.Int16;case-11:return e.Int32;case-12:return e.Int64;case-13:return e.Float32;case-14:return e.Float64;case-15:return e.Text;case-16:return e.Reserved;case-17:return e.Empty;case-24:return e.Principal;default:throw new Error("Illegal op_code: "+Y)}if(Y>=p.length)throw new Error("type index out of range");return u[Y]}function v(Y){switch(Y[0]){case-19:{const oe=g(Y[1]);return re(oe)}case-18:{const oe=g(Y[1]);return E(oe)}case-20:{const oe={};for(const[y,l]of Y[1]){const d=`_${y}_`;oe[d]=g(l)}const ye=se(oe),me=ye.tryAsTuple();return Array.isArray(me)?fe(...me):ye}case-21:{const oe={};for(const[ye,me]of Y[1]){const y=`_${ye}_`;oe[y]=g(me)}return ue(oe)}case-22:{const[oe,ye,me]=Y[1];return ne(oe.map(y=>g(y)),ye.map(y=>g(y)),me)}case-23:{const oe={},ye=Y[1];for(const[me,y]of ye){let l=g(y);if(l instanceof P&&(l=l.getType()),!(l instanceof j))throw new Error("Illegal service definition: services can only contain functions");oe[me]=l}return ce(oe)}default:throw new Error("Illegal op_code: "+Y[0])}}p.forEach((Y,oe)=>{if(Y[0]===-22){const ye=v(Y);u[oe].fill(ye)}}),p.forEach((Y,oe)=>{if(Y[0]!==-22){const ye=v(Y);u[oe].fill(ye)}});const R=a.map(Y=>g(Y)),H=m.map((Y,oe)=>Y.decodeValue(h,R[oe]));for(let Y=m.length;Y<R.length;Y++)R[Y].decodeValue(h,R[Y]);if(h.byteLength>0)throw new Error("decode: Left-over bytes");return H}e.decode=ae,e.Empty=new b,e.Reserved=new z,e.Unknown=new $,e.Bool=new M,e.Null=new W,e.Text=new q,e.Int=new ie,e.Nat=new k,e.Float32=new Z(32),e.Float64=new Z(64),e.Int8=new G(8),e.Int16=new G(16),e.Int32=new G(32),e.Int64=new G(64),e.Nat8=new Q(8),e.Nat16=new Q(16),e.Nat32=new Q(32),e.Nat64=new Q(64),e.Principal=new V;function fe(...m){return new le(m)}e.Tuple=fe;function re(m){return new te(m)}e.Vec=re;function E(m){return new X(m)}e.Opt=E;function se(m){return new he(m)}e.Record=se;function ue(m){return new O(m)}e.Variant=ue;function pe(){return new P}e.Rec=pe;function ne(m,s,h=[]){return new j(m,s,h)}e.Func=ne;function ce(m){return new J(m)}e.Service=ce})(dh);export{Dh as A,Ch as D,_r as H,Te as P,Wh as Y,wn as a,cu as b,Mh as c,Yh as f,dh as i,$h as u};
